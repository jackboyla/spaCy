"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{3922:function(e,t,n){let l;n.d(t,{Ym:function(){return ActionButtonRow},Zb:function(){return Card},f6:function(){return nt}});var c,y,_,x,S,w,T,E,F,D,L,j,O=n(5893),W=n(7294),$=n(3199);n(3454);var V=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);let X="_task_hash",Y="NO_LABEL",Z=["accept","reject","ignore","undo"],et=["rect","polygon","freehand"],er={reject:{viewBox:"0 0 24 24",paths:[{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}]},accept:{viewBox:"0 0 24 24",paths:[{d:"M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z"}]},ignore:{viewBox:"0 0 24 24",paths:[{d:"M12 20.016c4.406 0 8.016-3.609 8.016-8.016 0-1.828-0.609-3.563-1.688-4.922l-11.25 11.25c1.359 1.078 3.094 1.688 4.922 1.688zM3.984 12c0 1.828 0.609 3.563 1.688 4.922l11.25-11.25c-1.359-1.078-3.094-1.688-4.922-1.688-4.406 0-8.016 3.609-8.016 8.016zM12 2.016c5.531 0 9.984 4.453 9.984 9.984s-4.453 9.984-9.984 9.984-9.984-4.453-9.984-9.984 4.453-9.984 9.984-9.984z"}]},undo:{viewBox:"0 0 24 24",paths:[{d:"M11.016 9l1.406 1.406-3.609 3.609h9.188v-10.031h2.016v12h-11.203l3.609 3.609-1.406 1.406-6-6z"}]},close:{viewBox:"0 0 24 24",paths:[{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}]},menu:{viewBox:"0 0 24 24",paths:[{d:"M3 5h18q0.414 0 0.707 0.293t0.293 0.707-0.293 0.707-0.707 0.293h-18q-0.414 0-0.707-0.293t-0.293-0.707 0.293-0.707 0.707-0.293zM3 17h18q0.414 0 0.707 0.293t0.293 0.707-0.293 0.707-0.707 0.293h-18q-0.414 0-0.707-0.293t-0.293-0.707 0.293-0.707 0.707-0.293zM3 11h18q0.414 0 0.707 0.293t0.293 0.707-0.293 0.707-0.707 0.293h-18q-0.414 0-0.707-0.293t-0.293-0.707 0.293-0.707 0.707-0.293z"}]},save:{viewBox:"0 0 20 20",paths:[{d:"M15.173 2h-11.173c-1.101 0-2 0.9-2 2v12c0 1.1 0.899 2 2 2h12c1.101 0 2-0.9 2-2v-10.873l-2.827-3.127zM14 8c0 0.549-0.45 1-1 1h-6c-0.55 0-1-0.451-1-1v-5h8v5zM13 4h-2v4h2v-4z"}]},infinity:{viewBox:"0 0 32 32",paths:[{d:"M24.5 23.5c-2.003 0-3.887-0.78-5.303-2.197l-3.197-3.196-3.196 3.196c-1.417 1.417-3.3 2.197-5.303 2.197s-3.887-0.78-5.304-2.197c-1.417-1.417-2.197-3.3-2.197-5.303s0.78-3.887 2.197-5.304c1.417-1.417 3.3-2.197 5.304-2.197s3.887 0.78 5.303 2.197l3.196 3.196 3.196-3.196c1.417-1.417 3.3-2.197 5.303-2.197s3.887 0.78 5.303 2.197c1.417 1.417 2.197 3.3 2.197 5.304s-0.78 3.887-2.197 5.303c-1.416 1.417-3.3 2.197-5.303 2.197zM21.304 19.197c0.854 0.853 1.989 1.324 3.196 1.323s2.342-0.47 3.196-1.324c0.854-0.854 1.324-1.989 1.324-3.196s-0.47-2.342-1.324-3.196c-0.854-0.854-1.989-1.324-3.196-1.324s-2.342 0.47-3.196 1.324l-3.196 3.196 3.196 3.197zM7.5 11.48c-1.207 0-2.342 0.47-3.196 1.324s-1.324 1.989-1.324 3.196c0 1.207 0.47 2.342 1.324 3.196s1.989 1.324 3.196 1.324c1.207 0 2.342-0.47 3.196-1.324l3.196-3.196-3.196-3.196c-0.854-0.854-1.989-1.324-3.196-1.324v0z"}]},plus:{viewBox:"0 0 24 24",paths:[{d:"M18.984 12.984h-6v6h-1.969v-6h-6v-1.969h6v-6h1.969v6h6v1.969z"}]},flag:{viewBox:"0 0 24 24",paths:[{d:"M14.391 6h5.625v9.984h-7.031l-0.375-1.969h-5.625v6.984h-1.969v-17.016h9z"}]},rect:{viewBox:"0 0 24 24",paths:[{d:"M3.3 5a2.3 2.3 0 100 4.7 2.3 2.3 0 000-4.7zM20.6 9.6a2.3 2.3 0 100-4.6 2.3 2.3 0 000 4.6zM3.3 16.5a2.3 2.3 0 100 4.6 2.3 2.3 0 000-4.6zM20.6 16.5a2.3 2.3 0 100 4.6 2.3 2.3 0 000-4.6zM4 15.3v-4.4a.7.7 0 00-1.4 0v4.4a.7.7 0 001.4 0zM17.1 6.6H6.8a.7.7 0 100 1.5h10.3a.7.7 0 100-1.5zM17.1 18H6.8a.7.7 0 100 1.5h10.3a.7.7 0 100-1.5zM20 10.9v4.4a.7.7 0 101.4 0v-4.4a.7.7 0 00-1.5 0z"}]},polygon:{viewBox:"0 0 24 24",paths:[{d:"M14 4.8c-.2.3 0 .7.2 1l3.5 2.5a.7.7 0 001-.2c.2-.3.2-.7-.2-1l-3.4-2.5a.7.7 0 00-1 .2zM12 5.5A2.2 2.2 0 1012 1a2.2 2.2 0 000 4.5zM20.8 7.4a2.2 2.2 0 100 4.5 2.2 2.2 0 000-4.5zM17.4 17.7a2.2 2.2 0 100 4.5 2.2 2.2 0 000-4.5zM6.6 17.7a2.2 2.2 0 100 4.5 2.2 2.2 0 000-4.5zM5.5 9.6a2.2 2.2 0 10-4.5 0 2.2 2.2 0 004.5 0zM5.9 8.4l.4-.1 3.5-2.5a.7.7 0 10-.9-1.2L5.5 7.2a.7.7 0 00.4 1.2zM5.6 17.6h.2c.4-.2.6-.6.4-1l-1.3-4a.7.7 0 10-1.3.4l1.3 4c.1.4.4.6.7.6zM20 12a.7.7 0 00-1 .5l-1.2 4.1a.7.7 0 101.3.5l1.3-4.1c.2-.4 0-.8-.4-1zM14.2 19.2H9.8a.7.7 0 100 1.5h4.4a.7.7 0 100-1.5z"}]},freehand:{viewBox:"0 0 24 24",paths:[{d:"M6.9 20.8a13 13 0 01-3.3-3.6c-.3-.7-.4-1.3-.4-1.8 0-.7.4-1.2 1-1.7a2 2 0 011.4-.3c.4 0 .9.1 1.5.4a22.4 22.4 0 013 1.9l2.4 1.2c-.4-1-.7-1.5-2.4-3.5l-.6-.8a17.6 17.6 0 01-2.3-3.5c-.3-.8-.4-1.5-.4-2 0-.8.4-1.4 1-1.8.6-.4 1.2-.6 1.9-.6.6 0 1.2.2 2 .6a15.8 15.8 0 013.5 3 26 26 0 003 2.7c0-.4-.2-.9-.5-1.5-.8-1.5-2.3-3.5-4.5-6-.3-.5-.2-.9.2-1.3s.8-.4 1.2-.1c1.7 1.8 4.6 4.8 5.5 6.5.5 1 .8 1.9.8 2.6 0 1-.3 1.6-1 2.2-.5.4-1.1.5-1.8.4-.5-.1-1.2-.4-1.8-1a25.3 25.3 0 01-3.5-3.1c-1.1-1.1-2-1.8-2.7-2.2l-.5-.2c-.2.2-.1.4 0 .6a14.6 14.6 0 002.6 3.8c1.7 2.2 2 2.6 2.5 3.5.5.8.8 1.4.8 2a2 2 0 01-.8 1.8c-.7.6-1.5.8-2.6.5a12.1 12.1 0 01-4-2 35.3 35.3 0 00-2-1.2c.3.8 1 1.8 2.2 3.1.3.6.3 1-.1 1.4-.4.4-.8.4-1.3 0z"}]},delete:{viewBox:"0 0 24 24",paths:[{d:"M15.516 3.984h3.469v2.016h-13.969v-2.016h3.469l1.031-0.984h4.969zM8.438 11.859l2.156 2.156-2.109 2.109 1.406 1.406 2.109-2.109 2.109 2.109 1.406-1.406-2.109-2.109 2.109-2.156-1.406-1.406-2.109 2.156-2.109-2.156zM6 18.984v-12h12v12c0 1.078-0.938 2.016-2.016 2.016h-7.969c-1.078 0-2.016-0.938-2.016-2.016z"}]},reset:{viewBox:"0 0 24 24",paths:[{d:"M6 12h3l-3.984 3.984-4.031-3.984h3c0-4.406 3.609-8.016 8.016-8.016 1.547 0 3.047 0.469 4.266 1.266l-1.453 1.453c-0.844-0.469-1.781-0.703-2.813-0.703-3.328 0-6 2.672-6 6zM18.984 8.016l4.031 3.984h-3c0 4.406-3.609 8.016-8.016 8.016-1.547 0-3.047-0.469-4.266-1.266l1.453-1.453c0.844 0.469 1.781 0.703 2.813 0.703 3.328 0 6-2.672 6-6h-3z"}]},help:{viewBox:"0 0 20 20",paths:[{d:"M10 0.4c-5.302 0-9.6 4.298-9.6 9.6s4.298 9.6 9.6 9.6c5.301 0 9.6-4.298 9.6-9.601 0-5.301-4.299-9.599-9.6-9.599zM9.849 15.599h-0.051c-0.782-0.023-1.334-0.6-1.311-1.371 0.022-0.758 0.587-1.309 1.343-1.309l0.046 0.002c0.804 0.023 1.35 0.594 1.327 1.387-0.023 0.76-0.578 1.291-1.354 1.291zM13.14 9.068c-0.184 0.26-0.588 0.586-1.098 0.983l-0.562 0.387c-0.308 0.24-0.494 0.467-0.563 0.688-0.056 0.174-0.082 0.221-0.087 0.576v0.090h-2.145l0.006-0.182c0.027-0.744 0.045-1.184 0.354-1.547 0.485-0.568 1.555-1.258 1.6-1.287 0.154-0.115 0.283-0.246 0.379-0.387 0.225-0.311 0.324-0.555 0.324-0.793 0-0.334-0.098-0.643-0.293-0.916-0.188-0.266-0.545-0.398-1.061-0.398-0.512 0-0.863 0.162-1.072 0.496-0.216 0.341-0.325 0.7-0.325 1.067v0.092h-2.211l0.004-0.096c0.057-1.353 0.541-2.328 1.435-2.897 0.563-0.361 1.264-0.544 2.081-0.544 1.068 0 1.972 0.26 2.682 0.772 0.721 0.519 1.086 1.297 1.086 2.311-0.001 0.567-0.18 1.1-0.534 1.585z"}]},play:{viewBox:"0 0 24 24",paths:[{d:"M8 5v14l11-7z"}]},pause:{viewBox:"0 0 24 24",paths:[{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}]},zoom:{viewBox:"0 0 24 24",paths:[{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}]},loop:{viewBox:"0 0 24 24",paths:[{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}]},loopone:{viewBox:"0 0 24 24",paths:[{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z"}]},spans:{viewBox:"0 0 24 24",paths:[{d:"M21.4 7.1h-2.6v3.6a1.8 1.8 0 010 2.7v3.7h2.6c.3 0 .6-.3.6-.6V7.7c0-.3-.3-.6-.6-.6zM13.3 13.4a1.8 1.8 0 010-2.7V7.1H2.6c-.3 0-.6.3-.6.6v8.8c0 .3.3.6.6.6h10.7v-3.7zM16.4 18.1v-5.4c.4 0 .7-.3.7-.6s-.3-.6-.6-.6V6.1l1-1.1c.3-.2.3-.6 0-.8a.6.6 0 00-.8 0l-.9.8-.8-.8a.6.6 0 00-.8 0c-.3.2-.3.6 0 .8l1 1v5.5c-.3 0-.6.3-.6.6s.3.6.6.6V18l-1 1.1c-.3.2-.3.6 0 .8.2.3.6.3.8 0l.8-.8.9.8c.2.3.6.3.8 0 .3-.2.3-.6 0-.8l-1-1z"}]},rels:{viewBox:"0 0 24 24",paths:[{d:"M19 9.9l-2.7-1.6a.5.5 0 01.5-.9L19 8.7l1.3-2.4a.5.5 0 01.9.5l-1.5 2.8c-.1.3-.5.4-.7.3z M3.2 9.4a.5.5 0 01-.3-.5A8.5 8.5 0 0115.3 3c2.3 1.2 3.9 3.4 4.4 6a.5.5 0 01-1.1.2A7.5 7.5 0 004 9.2a.5.5 0 01-.8.2z M14 12h8c.6 0 1 .5 1 1v2c0 .6-.4 1-1 1h-.4c-.9 0-2-2-3.1-2-2 0-1.1 2-1.5 2h-3a1 1 0 01-1-1v-2c0-.5.4-1 1-1z M14 11h8c.6 0 1 .4 1 1v4c0 .6-.4 1-1 1h-.4c-.9 0-2-2-3.1-2-2 0-1.1 2-1.5 2h-3a1 1 0 01-1-1v-4c0-.6.4-1 1-1z M18.3 22a.4.4 0 00.4-.1l1.6-1.9h2.3c.2 0 .3-.1.4-.3 0-.1 0-.3-.2-.4L18.7 16a.4.4 0 00-.5 0c-.1 0-.2.1-.2.3v5.2c0 .2.1.3.3.4z M2 11h8c.6 0 1 .4 1 1v4c0 .6-.4 1-1 1H2a1 1 0 01-1-1v-4c0-.6.4-1 1-1z"}]}},en=["1","2","3","4","5","6","7","8","9","0"],ea={ACTIONS:{accept:["a"],reject:["x"],ignore:["space"],undo:["backspace","del"],save:["command+s","ctrl+s"],flag:["f"],help:["h"]},CARD:{choice:[...en,...en.map(e=>`shift+${e}`),...en.map(e=>`shift+alt+${e}`)]},SPANS:{chars:["c"]},IMAGE:{rect:["r"],polygon:["t","p"],freehand:["f"],labels:["l"],select:["shift"],ratio:["shift"],delete:["d"],reset:["q"],exit:["escape"],left:["left"],right:["right"],up:["up"],down:["down"]},RELATIONS:{delete:["d"],reset:["q"],rels:["r"],spans:["s"],exit:["escape"],select:["shift"]},AUDIO:{playpause:["enter"],loop:["l"],reset:["q"],zoom:["z"]},MODAL:{close:["escape"]}};let Icon=class Icon extends W.Component{render(){let{name:e,size:t,className:n}=this.props,{viewBox:l,paths:c}=er[e];return(0,O.jsx)("svg",{"aria-hidden":"true",fill:"currentColor",width:t,height:t,viewBox:l,className:n,style:{minWidth:t},children:c.map((e,t)=>(0,O.jsx)("path",{...e},t))})}};function _extends$1(){return(_extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,l,c={},y=Object.keys(e);for(l=0;l<y.length;l++)n=y[l],t.indexOf(n)>=0||(c[n]=e[n]);return c}__publicField(Icon,"defaultProps",{size:24});var eo="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var es={exports:{}},el={};es.exports=function(){if(tK)return el;tK=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,l=e?Symbol.for("react.fragment"):60107,c=e?Symbol.for("react.strict_mode"):60108,y=e?Symbol.for("react.profiler"):60114,_=e?Symbol.for("react.provider"):60109,x=e?Symbol.for("react.context"):60110,S=e?Symbol.for("react.async_mode"):60111,w=e?Symbol.for("react.concurrent_mode"):60111,T=e?Symbol.for("react.forward_ref"):60112,E=e?Symbol.for("react.suspense"):60113,F=e?Symbol.for("react.suspense_list"):60120,D=e?Symbol.for("react.memo"):60115,L=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,O=e?Symbol.for("react.fundamental"):60117,W=e?Symbol.for("react.responder"):60118,$=e?Symbol.for("react.scope"):60119;function z(e){if("object"==typeof e&&null!==e){var F=e.$$typeof;switch(F){case t:switch(e=e.type){case S:case w:case l:case y:case c:case E:return e;default:switch(e=e&&e.$$typeof){case x:case T:case L:case D:case _:return e;default:return F}}case n:return F}}}function A(e){return z(e)===w}return el.AsyncMode=S,el.ConcurrentMode=w,el.ContextConsumer=x,el.ContextProvider=_,el.Element=t,el.ForwardRef=T,el.Fragment=l,el.Lazy=L,el.Memo=D,el.Portal=n,el.Profiler=y,el.StrictMode=c,el.Suspense=E,el.isAsyncMode=function(e){return A(e)||z(e)===S},el.isConcurrentMode=A,el.isContextConsumer=function(e){return z(e)===x},el.isContextProvider=function(e){return z(e)===_},el.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},el.isForwardRef=function(e){return z(e)===T},el.isFragment=function(e){return z(e)===l},el.isLazy=function(e){return z(e)===L},el.isMemo=function(e){return z(e)===D},el.isPortal=function(e){return z(e)===n},el.isProfiler=function(e){return z(e)===y},el.isStrictMode=function(e){return z(e)===c},el.isSuspense=function(e){return z(e)===E},el.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===l||e===w||e===y||e===c||e===E||e===F||"object"==typeof e&&null!==e&&(e.$$typeof===L||e.$$typeof===D||e.$$typeof===_||e.$$typeof===x||e.$$typeof===T||e.$$typeof===O||e.$$typeof===W||e.$$typeof===$||e.$$typeof===j)},el.typeOf=z,el}();var eh=es.exports,eu={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ed={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ep={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},em={};function getStatics(e){return eh.isMemo(e)?ep:em[e.$$typeof]||eu}em[eh.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},em[eh.Memo]=ep;var ev=Object.defineProperty,eb=Object.getOwnPropertyNames,ey=Object.getOwnPropertySymbols,e_=Object.getOwnPropertyDescriptor,ex=Object.getPrototypeOf,eS=Object.prototype;let ew=getDefaultExportFromCjs(function hoistNonReactStatics(e,t,n){if("string"!=typeof t){if(eS){var l=ex(t);l&&l!==eS&&hoistNonReactStatics(e,l,n)}var c=eb(t);ey&&(c=c.concat(ey(t)));for(var y=getStatics(e),_=getStatics(t),x=0;x<c.length;++x){var S=c[x];if(!ed[S]&&!(n&&n[S])&&!(_&&_[S])&&!(y&&y[S])){var w=e_(t,S);try{ev(e,S,w)}catch{}}}}return e});function warning(e,t){}var ek={exports:{}};ek.exports=(function(){if(tZ)return tQ;tZ=1;var e=tY?tX:(tY=1,tX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function emptyFunction(){}function emptyFunctionWithReset(){}return emptyFunctionWithReset.resetWarningCache=emptyFunction,tQ=function(){function shim(t,n,l,c,y,_){if(_!==e){var x=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}function getShim(){return shim}shim.isRequired=shim;var t={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return t.PropTypes=t,t}})()();var eC=ek.exports;let eP=getDefaultExportFromCjs(eC);var eM={};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(this,arguments)}function _assertThisInitialized$1(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function createTheming(e){return{context:e,withTheme:function(t){var n=W.forwardRef(function(n,l){return W.createElement(e.Consumer,null,function(e){return W.createElement(t,_extends({theme:e,ref:l},n))})});return ew(n,t),n},useTheme:function(){return W.useContext(e)},ThemeProvider:function(t){function ThemeProvider3(){for(var n,l=arguments.length,c=Array(l),y=0;y<l;y++)c[y]=arguments[y];return _defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(n=t.call.apply(t,[this].concat(c))||this)),"cachedTheme",void 0),_defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(n)),"lastOuterTheme",void 0),_defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(n)),"lastTheme",void 0),_defineProperty(_assertThisInitialized$1(_assertThisInitialized$1(n)),"renderProvider",function(t){var l=n.props.children;return W.createElement(e.Provider,{value:n.getTheme(t)},l)}),n}ThemeProvider3.prototype=Object.create(t.prototype),ThemeProvider3.prototype.constructor=ThemeProvider3,ThemeProvider3.__proto__=t;var n=ThemeProvider3.prototype;return n.getTheme=function(e){if(this.props.theme!==this.lastTheme||e!==this.lastOuterTheme||!this.cachedTheme){if(this.lastOuterTheme=e,this.lastTheme=this.props.theme,"function"==typeof this.lastTheme){var t=this.props.theme;this.cachedTheme=t(e)}else{var n=this.props.theme;this.cachedTheme=e?_extends({},e,n):n}}return this.cachedTheme},n.render=function(){return this.props.children?W.createElement(e.Consumer,null,this.renderProvider):null},ThemeProvider3}(W.Component)}}Object.defineProperty(eM,"__esModule",{value:!0}),eM.default=function(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")};var eT=(0,W.createContext)(),eE=createTheming(eT);eE.withTheme,eE.ThemeProvider,eE.useTheme;var eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eF=(typeof window>"u"?"undefined":eR(window))==="object"&&(typeof document>"u"?"undefined":eR(document))==="object"&&9===document.nodeType;function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==_typeof$2(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,t||"default");if("object"!==_typeof$2(l))return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_typeof$2(t)?t:String(t)}(l.key),l)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var eN={}.constructor;function createRule(e,t,n){void 0===e&&(e="unnamed");var l=n.jss,c=function cloneStyle(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(cloneStyle);if(e.constructor!==eN)return e;var t={};for(var n in e)t[n]=cloneStyle(e[n]);return t}(t);return l.plugins.onCreateRule(e,c,n)||(e[0],null)}var join=function(e,t){for(var n="",l=0;l<e.length&&"!important"!==e[l];l++)n&&(n+=t),n+=e[l];return n},toCssValue=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=join(e[n]," ");else t=join(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function getWhitespaceSymbols(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function indentStr(e,t){for(var n="",l=0;l<t;l++)n+="  ";return n+e}function toCss(e,t,n){void 0===n&&(n={});var l="";if(!t)return l;var c=n.indent,y=void 0===c?0:c,_=t.fallbacks;!1===n.format&&(y=-1/0);var x=getWhitespaceSymbols(n),S=x.linebreak,w=x.space;if(e&&y++,_){if(Array.isArray(_))for(var T=0;T<_.length;T++){var E=_[T];for(var F in E){var D=E[F];null!=D&&(l&&(l+=S),l+=indentStr(F+":"+w+toCssValue(D)+";",y))}}else for(var L in _){var j=_[L];null!=j&&(l&&(l+=S),l+=indentStr(L+":"+w+toCssValue(j)+";",y))}}for(var O in t){var W=t[O];null!=W&&"fallbacks"!==O&&(l&&(l+=S),l+=indentStr(O+":"+w+toCssValue(W)+";",y))}return(l||n.allowEmpty)&&e?(y--,l&&(l=""+S+l+S),indentStr(""+e+w+"{"+l,y)+indentStr("}",y)):l}var eA=/([[\].#*$><+~=|^:(),"'`\s])/g,eD="u">typeof CSS&&CSS.escape,escape=function(e){return eD?eD(e):e.replace(eA,"\\$1")},eL=function(){function BaseStyleRule2(e,t,n){this.type="style",this.isProcessed=!1;var l=n.sheet,c=n.Renderer;this.key=e,this.options=n,this.style=t,l?this.renderer=l.renderer:c&&(this.renderer=new c)}return BaseStyleRule2.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var l=!!n&&n.force;if(!l&&this.style[e]===t)return this;var c=t;n&&!1===n.process||(c=this.options.jss.plugins.onChangeValue(t,e,this));var y=null==c||!1===c,_=e in this.style;if(y&&!_&&!l)return this;var x=y&&_;if(x?delete this.style[e]:this.style[e]=c,this.renderable&&this.renderer)return x?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,c),this;var S=this.options.sheet;return S&&S.attached,this},BaseStyleRule2}(),ej=function(e){function StyleRule2(t,n,l){c=e.call(this,t,n,l)||this;var c,y=l.selector,_=l.scoped,x=l.sheet,S=l.generateId;return y?c.selectorText=y:!1!==_&&(c.id=S(_assertThisInitialized(_assertThisInitialized(c)),x),c.selectorText="."+escape(c.id)),c}_inheritsLoose(StyleRule2,e);var t=StyleRule2.prototype;return t.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var l in n)t.setProperty(e,l,n[l])}return this},t.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!=typeof n?e[t]=n:Array.isArray(n)&&(e[t]=toCssValue(n))}return e},t.toString=function(e){var t=this.options.sheet,n=t&&t.options.link?_extends$1({},e,{allowEmpty:!0}):e;return toCss(this.selectorText,this.style,n)},_createClass(StyleRule2,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;!(!n||!t)&&(t.setSelector(n,e)||t.replaceRule(n,this))}},get:function(){return this.selectorText}}]),StyleRule2}(eL),eO={indent:1,children:!0},eI=/@([\w-]+)/,ez=function(){function ConditionalRule2(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var l=e.match(eI);for(var c in this.at=l?l[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new e1(_extends$1({},n,{parent:this})),t)this.rules.add(c,t[c]);this.rules.process()}var e=ConditionalRule2.prototype;return e.getRule=function(e){return this.rules.get(e)},e.indexOf=function(e){return this.rules.indexOf(e)},e.addRule=function(e,t,n){var l=this.rules.add(e,t,n);return l?(this.options.jss.plugins.onProcessRule(l),l):null},e.replaceRule=function(e,t,n){var l=this.rules.replace(e,t,n);return l&&this.options.jss.plugins.onProcessRule(l),l},e.toString=function(e){void 0===e&&(e=eO);var t=getWhitespaceSymbols(e).linebreak;if(null==e.indent&&(e.indent=eO.indent),null==e.children&&(e.children=eO.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},ConditionalRule2}(),eW=/@container|@media|@supports\s+/,e$={indent:1,children:!0},eG=/@keyframes\s+([\w-]+)/,eU=function(){function KeyframesRule2(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var l=e.match(eG);l&&l[1]?this.name=l[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var c=n.scoped,y=n.sheet,_=n.generateId;for(var x in this.id=!1===c?this.name:escape(_(this,y)),this.rules=new e1(_extends$1({},n,{parent:this})),t)this.rules.add(x,t[x],_extends$1({},n,{parent:this}));this.rules.process()}return KeyframesRule2.prototype.toString=function(e){void 0===e&&(e=e$);var t=getWhitespaceSymbols(e).linebreak;if(null==e.indent&&(e.indent=e$.indent),null==e.children&&(e.children=e$.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},KeyframesRule2}(),eB=/@keyframes\s+/,eH=/\$([\w-]+)/g,findReferencedKeyframe=function(e,t){return"string"==typeof e?e.replace(eH,function(e,n){return n in t?t[n]:e}):e},replaceRef=function(e,t,n){var l=e[t],c=findReferencedKeyframe(l,n);c!==l&&(e[t]=c)},eV=function(e){function KeyframeRule2(){return e.apply(this,arguments)||this}return _inheritsLoose(KeyframeRule2,e),KeyframeRule2.prototype.toString=function(e){var t=this.options.sheet,n=t&&t.options.link?_extends$1({},e,{allowEmpty:!0}):e;return toCss(this.key,this.style,n)},KeyframeRule2}(eL),eq=function(){function FontFaceRule2(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return FontFaceRule2.prototype.toString=function(e){var t=getWhitespaceSymbols(e).linebreak;if(Array.isArray(this.style)){for(var n="",l=0;l<this.style.length;l++)n+=toCss(this.at,this.style[l]),this.style[l+1]&&(n+=t);return n}return toCss(this.at,this.style,e)},FontFaceRule2}(),eK=/@font-face/,eX=function(){function ViewportRule2(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return ViewportRule2.prototype.toString=function(e){return toCss(this.key,this.style,e)},ViewportRule2}(),eY=function(){function SimpleRule2(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return SimpleRule2.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+=`
`);return t}return this.key+" "+this.value+";"},SimpleRule2}(),eQ={"@charset":!0,"@import":!0,"@namespace":!0},eZ=[{onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new ej(e,t,n)}},{onCreateRule:function(e,t,n){return eW.test(e)?new ez(e,t,n):null}},{onCreateRule:function(e,t,n){return"string"==typeof e&&eB.test(e)?new eU(e,t,n):null},onProcessStyle:function(e,t,n){return"style"!==t.type||!n||("animation-name"in e&&replaceRef(e,"animation-name",n.keyframes),"animation"in e&&replaceRef(e,"animation",n.keyframes)),e},onChangeValue:function(e,t,n){var l=n.options.sheet;if(!l)return e;switch(t){case"animation":case"animation-name":return findReferencedKeyframe(e,l.keyframes);default:return e}}},{onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new eV(e,t,n):null}},{onCreateRule:function(e,t,n){return eK.test(e)?new eq(e,t,n):null}},{onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new eX(e,t,n):null}},{onCreateRule:function(e,t,n){return e in eQ?new eY(e,t,n):null}}],eJ={process:!0},e0={force:!0,process:!0},e1=function(){function RuleList2(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var e=RuleList2.prototype;return e.add=function(e,t,n){var l=this.options,c=l.parent,y=l.sheet,_=l.jss,x=l.Renderer,S=l.generateId,w=l.scoped,T=_extends$1({classes:this.classes,parent:c,sheet:y,jss:_,Renderer:x,generateId:S,scoped:w,name:e,keyframes:this.keyframes,selector:void 0},n),E=e;e in this.raw&&(E=e+"-d"+this.counter++),this.raw[E]=t,E in this.classes&&(T.selector="."+escape(this.classes[E]));var F=createRule(E,t,T);if(!F)return null;this.register(F);var D=void 0===T.index?this.index.length:T.index;return this.index.splice(D,0,F),F},e.replace=function(e,t,n){var l=this.get(e),c=this.index.indexOf(l);l&&this.remove(l);var y=n;return -1!==c&&(y=_extends$1({},n,{index:c})),this.add(e,t,y)},e.get=function(e){return this.map[e]},e.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},e.indexOf=function(e){return this.index.indexOf(e)},e.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},e.register=function(e){this.map[e.key]=e,e instanceof ej?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof eU&&this.keyframes&&(this.keyframes[e.name]=e.id)},e.unregister=function(e){delete this.map[e.key],e instanceof ej?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof eU&&delete this.keyframes[e.name]},e.update=function(){var e,t,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var l=0;l<this.index.length;l++)this.updateOne(this.index[l],t,n)},e.updateOne=function(e,t,n){void 0===n&&(n=eJ);var l=this.options,c=l.jss.plugins,y=l.sheet;if(e.rules instanceof RuleList2){e.rules.update(t,n);return}var _=e.style;if(c.onUpdate(t,e,y,n),n.process&&_&&_!==e.style){for(var x in c.onProcessStyle(e.style,e,y),e.style){var S=e.style[x];S!==_[x]&&e.prop(x,S,e0)}for(var w in _){var T=e.style[w],E=_[w];null==T&&T!==E&&e.prop(w,null,e0)}}},e.toString=function(e){for(var t="",n=this.options.sheet,l=!!n&&n.options.link,c=getWhitespaceSymbols(e),y=c.linebreak,_=0;_<this.index.length;_++){var x=this.index[_].toString(e);(x||l)&&(t&&(t+=y),t+=x)}return t},RuleList2}(),e2=function(){function StyleSheet2(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=_extends$1({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new e1(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var e=StyleSheet2.prototype;return e.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},e.detach=function(){return this.attached&&(this.renderer&&this.renderer.detach(),this.attached=!1),this},e.addRule=function(e,t,n){var l=this.queue;this.attached&&!l&&(this.queue=[]);var c=this.rules.add(e,t,n);return c?(this.options.jss.plugins.onProcessRule(c),this.attached?this.deployed&&(l?l.push(c):(this.insertRule(c),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))):this.deployed=!1,c):null},e.replaceRule=function(e,t,n){var l=this.rules.get(e);if(!l)return this.addRule(e,t,n);var c=this.rules.replace(e,t,n);return c&&this.options.jss.plugins.onProcessRule(c),this.attached?this.deployed&&this.renderer&&(c?l.renderable&&this.renderer.replaceRule(l.renderable,c):this.renderer.deleteRule(l)):this.deployed=!1,c},e.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},e.addRules=function(e,t){var n=[];for(var l in e){var c=this.addRule(l,e[l],t);c&&n.push(c)}return n},e.getRule=function(e){return this.rules.get(e)},e.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!!t&&(!this.attached||!!t.renderable)&&(this.rules.remove(t),!this.attached||!t.renderable||!this.renderer||this.renderer.deleteRule(t.renderable))},e.indexOf=function(e){return this.rules.indexOf(e)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},e.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},e.toString=function(e){return this.rules.toString(e)},StyleSheet2}(),e3=function(){function PluginsRegistry2(){this.plugins={internal:[],external:[]},this.registry={}}var e=PluginsRegistry2.prototype;return e.onCreateRule=function(e,t,n){for(var l=0;l<this.registry.onCreateRule.length;l++){var c=this.registry.onCreateRule[l](e,t,n);if(c)return c}return null},e.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},e.onProcessStyle=function(e,t,n){for(var l=0;l<this.registry.onProcessStyle.length;l++)t.style=this.registry.onProcessStyle[l](t.style,t,n)},e.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},e.onUpdate=function(e,t,n,l){for(var c=0;c<this.registry.onUpdate.length;c++)this.registry.onUpdate[c](e,t,n,l)},e.onChangeValue=function(e,t,n){for(var l=e,c=0;c<this.registry.onChangeValue.length;c++)l=this.registry.onChangeValue[c](l,t,n);return l},e.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},PluginsRegistry2}(),e6=new(function(){function SheetsRegistry2(){this.registry=[]}var e=SheetsRegistry2.prototype;return e.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e)){if(0===t.length||n>=this.index){t.push(e);return}for(var l=0;l<t.length;l++)if(t[l].options.index>n){t.splice(l,0,e);return}}},e.reset=function(){this.registry=[]},e.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},e.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,l=_objectWithoutPropertiesLoose(t,["attached"]),c=getWhitespaceSymbols(l),y=c.linebreak,_="",x=0;x<this.registry.length;x++){var S=this.registry[x];null!=n&&S.attached!==n||(_&&(_+=y),_+=S.toString(l))}return _},_createClass(SheetsRegistry2,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),SheetsRegistry2}()),e8="u">typeof globalThis?globalThis:"u">typeof window&&window.Math===Math?window:"u">typeof self&&self.Math===Math?self:Function("return this")(),e9="2f1acc6c3a606b082e5eef5e54414ffb";null==e8[e9]&&(e8[e9]=0);var e7=e8[e9]++,createGenerateId=function(e){void 0===e&&(e={});var t=0;return function(n,l){t+=1;var c="",y="";return l&&(l.options.classNamePrefix&&(y=l.options.classNamePrefix),null!=l.options.jss.id&&(c=String(l.options.jss.id))),e.minify?""+(y||"c")+e7+c+t:y+n.key+"-"+e7+(c?"-"+c:"")+"-"+t}},memoize$1=function(e){var t;return function(){return t||(t=e()),t}},getPropertyValue=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch{return""}},setProperty=function(e,t,n){try{var l=n;if(Array.isArray(n)&&(l=toCssValue(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,l);else{var c=l?l.indexOf("!important"):-1,y=c>-1?l.substr(0,c-1):l;e.style.setProperty(t,y,c>-1?"important":"")}}catch{return!1}return!0},removeProperty=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(e){}},setSelector=function(e,t){return e.selectorText=t,e.selectorText===t},tt=memoize$1(function(){return document.querySelector("head")}),tr=memoize$1(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),_insertRule=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(e){return!1}return e.cssRules[n]},getValidRuleInsertionIndex=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},createStyle=function(){var e=document.createElement("style");return e.textContent=`
`,e},tn=function(){function DomRenderer2(e){this.getPropertyValue=getPropertyValue,this.setProperty=setProperty,this.removeProperty=removeProperty,this.setSelector=setSelector,this.hasInsertedRules=!1,this.cssRules=[],e&&e6.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,l=t.meta,c=t.element;this.element=c||createStyle(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),l&&this.element.setAttribute("data-meta",l);var y=tr();y&&this.element.setAttribute("nonce",y)}var e=DomRenderer2.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){(function(e,t){var n=t.insertionPoint,l=function(e){var t=e6.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var l=e[n];if(l.attached&&l.options.index>t.index&&l.options.insertionPoint===t.insertionPoint)return l}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var l=e[n];if(l.attached&&l.options.insertionPoint===t.insertionPoint)return l}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var l=e.insertionPoint;if(l&&"string"==typeof l){var c=function(e){for(var t=tt(),n=0;n<t.childNodes.length;n++){var l=t.childNodes[n];if(8===l.nodeType&&l.nodeValue.trim()===e)return l}return null}(l);if(c)return{parent:c.parentNode,node:c.nextSibling}}return!1}(t);if(!1!==l&&l.parent){l.parent.insertBefore(e,l.node);return}if(n&&"number"==typeof n.nodeType){var c=n.parentNode;c&&c.insertBefore(e,n.nextSibling);return}tt().appendChild(e)})(this.element,this.sheet.options);var e=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var e=this.sheet;if(e){if(e.options.link){this.insertRules(e.rules);return}this.element.textContent=`
`+e.toString()+`
`}},e.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},e.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var l=n;if("conditional"===e.type||"keyframes"===e.type){var c=getValidRuleInsertionIndex(n,t);if(!1===(l=_insertRule(n,e.toString({children:!1}),c)))return!1;this.refCssRule(e,c,l)}return this.insertRules(e.rules,l),l}var y=e.toString();if(!y)return!1;var _=getValidRuleInsertionIndex(n,t),x=_insertRule(n,y,_);return!1!==x&&(this.hasInsertedRules=!0,this.refCssRule(e,_,x),x)},e.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof e2&&this.cssRules.splice(t,0,n)},e.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return -1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},e.indexOf=function(e){return this.cssRules.indexOf(e)},e.replaceRule=function(e,t){var n=this.indexOf(e);return -1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},e.getRules=function(){return this.element.sheet.cssRules},DomRenderer2}(),ti=0,to=function(){function Jss2(e){this.id=ti++,this.version="10.10.0",this.plugins=new e3,this.options={id:{minify:!1},createGenerateId,Renderer:eF?tn:null,plugins:[]},this.generateId=createGenerateId({minify:!1});for(var t=0;t<eZ.length;t++)this.plugins.use(eZ[t],{queue:"internal"});this.setup(e)}var e=Jss2.prototype;return e.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=_extends$1({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},e.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!=typeof n&&(n=0===e6.index?0:e6.index+1);var l=new e2(e,_extends$1({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(l),l},e.removeStyleSheet=function(e){return e.detach(),e6.remove(e),this},e.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"==typeof e)return this.createRule(void 0,e,t);var l=_extends$1({},n,{name:e,jss:this,Renderer:this.options.Renderer});l.generateId||(l.generateId=this.generateId),l.classes||(l.classes={}),l.keyframes||(l.keyframes={});var c=createRule(e,t,l);return c&&this.plugins.onProcessRule(c),c},e.use=function(){for(var e=this,t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];return n.forEach(function(t){e.plugins.use(t)}),this},Jss2}(),createJss=function(e){return new to(e)},ts=function(){function SheetsManager2(){this.length=0,this.sheets=new WeakMap}var e=SheetsManager2.prototype;return e.get=function(e){var t=this.sheets.get(e);return t&&t.sheet},e.add=function(e,t){this.sheets.has(e)||(this.length++,this.sheets.set(e,{sheet:t,refs:0}))},e.manage=function(e){var t=this.sheets.get(e);if(t)return 0===t.refs&&t.sheet.attach(),t.refs++,t.sheet},e.unmanage=function(e){var t=this.sheets.get(e);t&&t.refs>0&&(t.refs--,0===t.refs&&t.sheet.detach())},_createClass(SheetsManager2,[{key:"size",get:function(){return this.length}}]),SheetsManager2}(),tl="object"==typeof CSS&&null!=CSS&&"number"in CSS;/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */createJss();var th=Date.now(),tu="fnValues"+th,tc="fnStyle"+ ++th,tp=("function"==typeof(tq=("u">typeof self?self:"u">typeof window?window:"u">typeof global?global:"u">typeof module?module:Function("return this")()).Symbol)?tq.observable?tV=tq.observable:(tV=tq("observable"),tq.observable=tV):tV="@@observable",tV),isObservable=function(e){return e&&e[tp]&&e===e[tp]()},tg=/;\n/,parse=function(e){for(var t={},n=e.split(tg),l=0;l<n.length;l++){var c=(n[l]||"").trim();if(c){var y=c.indexOf(":");if(-1===y)continue;var _=c.substr(0,y).trim(),x=c.substr(y+1).trim();t[_]=x}}return t},tm="@global",tv="@global ",tb=function(){function GlobalContainerRule2(e,t,n){for(var l in this.type="global",this.at=tm,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new e1(_extends$1({},n,{parent:this})),t)this.rules.add(l,t[l]);this.rules.process()}var e=GlobalContainerRule2.prototype;return e.getRule=function(e){return this.rules.get(e)},e.addRule=function(e,t,n){var l=this.rules.add(e,t,n);return l&&this.options.jss.plugins.onProcessRule(l),l},e.replaceRule=function(e,t,n){var l=this.rules.replace(e,t,n);return l&&this.options.jss.plugins.onProcessRule(l),l},e.indexOf=function(e){return this.rules.indexOf(e)},e.toString=function(e){return this.rules.toString(e)},GlobalContainerRule2}(),ty=function(){function GlobalPrefixedRule2(e,t,n){this.type="global",this.at=tm,this.isProcessed=!1,this.key=e,this.options=n;var l=e.substr(tv.length);this.rule=n.jss.createRule(l,t,_extends$1({},n,{parent:this}))}return GlobalPrefixedRule2.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},GlobalPrefixedRule2}(),t_=/\s*,\s*/g;function addScope(e,t){for(var n=e.split(t_),l="",c=0;c<n.length;c++)l+=t+" "+n[c].trim(),n[c+1]&&(l+=", ");return l}var isObject$2=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},tx="extendCurrValue"+Date.now(),tS=/\s*,\s*/g,tw=/&/g,tk=/\$([\w-]+)/g,tC=/[A-Z]/g,tP=/^ms-/,tM={};function toHyphenLower(e){return"-"+e.toLowerCase()}function hyphenateStyleName(e){if(tM.hasOwnProperty(e))return tM[e];var t=e.replace(tC,toHyphenLower);return tM[e]=tP.test(t)?"-"+t:t}function convertCase(e){var t={};for(var n in e)t[0===n.indexOf("--")?n:hyphenateStyleName(n)]=e[n];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(convertCase):t.fallbacks=convertCase(e.fallbacks)),t}var tT=tl&&CSS?CSS.px:"px",tE=tl&&CSS?CSS.ms:"ms",tR=tl&&CSS?CSS.percent:"%";function addCamelCasedVersion(e){var t=/(-[a-z])/g,replace=function(e){return e[1].toUpperCase()},n={};for(var l in e)n[l]=e[l],n[l.replace(t,replace)]=e[l];return n}var tF=addCamelCasedVersion({"animation-delay":tE,"animation-duration":tE,"background-position":tT,"background-position-x":tT,"background-position-y":tT,"background-size":tT,border:tT,"border-bottom":tT,"border-bottom-left-radius":tT,"border-bottom-right-radius":tT,"border-bottom-width":tT,"border-left":tT,"border-left-width":tT,"border-radius":tT,"border-right":tT,"border-right-width":tT,"border-top":tT,"border-top-left-radius":tT,"border-top-right-radius":tT,"border-top-width":tT,"border-width":tT,"border-block":tT,"border-block-end":tT,"border-block-end-width":tT,"border-block-start":tT,"border-block-start-width":tT,"border-block-width":tT,"border-inline":tT,"border-inline-end":tT,"border-inline-end-width":tT,"border-inline-start":tT,"border-inline-start-width":tT,"border-inline-width":tT,"border-start-start-radius":tT,"border-start-end-radius":tT,"border-end-start-radius":tT,"border-end-end-radius":tT,margin:tT,"margin-bottom":tT,"margin-left":tT,"margin-right":tT,"margin-top":tT,"margin-block":tT,"margin-block-end":tT,"margin-block-start":tT,"margin-inline":tT,"margin-inline-end":tT,"margin-inline-start":tT,padding:tT,"padding-bottom":tT,"padding-left":tT,"padding-right":tT,"padding-top":tT,"padding-block":tT,"padding-block-end":tT,"padding-block-start":tT,"padding-inline":tT,"padding-inline-end":tT,"padding-inline-start":tT,"mask-position-x":tT,"mask-position-y":tT,"mask-size":tT,height:tT,width:tT,"min-height":tT,"max-height":tT,"min-width":tT,"max-width":tT,bottom:tT,left:tT,top:tT,right:tT,inset:tT,"inset-block":tT,"inset-block-end":tT,"inset-block-start":tT,"inset-inline":tT,"inset-inline-end":tT,"inset-inline-start":tT,"box-shadow":tT,"text-shadow":tT,"column-gap":tT,"column-rule":tT,"column-rule-width":tT,"column-width":tT,"font-size":tT,"font-size-delta":tT,"letter-spacing":tT,"text-decoration-thickness":tT,"text-indent":tT,"text-stroke":tT,"text-stroke-width":tT,"word-spacing":tT,motion:tT,"motion-offset":tT,outline:tT,"outline-offset":tT,"outline-width":tT,perspective:tT,"perspective-origin-x":tR,"perspective-origin-y":tR,"transform-origin":tR,"transform-origin-x":tR,"transform-origin-y":tR,"transform-origin-z":tR,"transition-delay":tE,"transition-duration":tE,"vertical-align":tT,"flex-basis":tT,"shape-margin":tT,size:tT,gap:tT,grid:tT,"grid-gap":tT,"row-gap":tT,"grid-row-gap":tT,"grid-column-gap":tT,"grid-template-rows":tT,"grid-template-columns":tT,"grid-auto-rows":tT,"grid-auto-columns":tT,"box-shadow-x":tT,"box-shadow-y":tT,"box-shadow-blur":tT,"box-shadow-spread":tT,"font-line-height":tT,"text-shadow-x":tT,"text-shadow-y":tT,"text-shadow-blur":tT});function iterate(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var l=0;l<t.length;l++)t[l]=iterate(e,t[l],n);else if("object"==typeof t){if("fallbacks"===e)for(var c in t)t[c]=iterate(c,t[c],n);else for(var y in t)t[y]=iterate(e+"-"+y,t[y],n)}else if("number"==typeof t&&!1===isNaN(t)){var _=n[e]||tF[e];return _&&!(0===t&&_===tT)?"function"==typeof _?_(t).toString():""+t+_:t.toString()}return t}var tN={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},tA={position:!0,size:!0},tD={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},tL={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function objectToArray(e,t,n,l,c){if(!(tD[t]||tL[t]))return[];var y=[];if(tL[t]&&(e=function(e,t,n,l){for(var c in n){var y=n[c];if("u">typeof e[c]&&(l||!t.prop(y))){var _,x=styleDetector(((_={})[y]=e[c],_),t)[y];l?t.style.fallbacks[y]=x:t.style[y]=x}delete e[c]}return e}(e,n,tL[t],l)),Object.keys(e).length)for(var _ in tD[t]){if(e[_]){Array.isArray(e[_])?y.push(null===tA[_]?e[_]:e[_].join(" ")):y.push(e[_]);continue}null!=tD[t][_]&&y.push(tD[t][_])}return!y.length||c?y:[y]}function styleDetector(e,t,n){for(var l in e){var c=e[l];if(Array.isArray(c)){if(!Array.isArray(c[0])){if("fallbacks"===l){for(var y=0;y<e.fallbacks.length;y++)e.fallbacks[y]=styleDetector(e.fallbacks[y],t,!0);continue}e[l]=function processArray(e,t,n,l){return null==n[t]?e:0===e.length?[]:Array.isArray(e[0])?processArray(e[0],t,n,l):"object"==typeof e[0]?e.map(function(e){return objectToArray(e,t,l,!1,!0)}):[e]}(c,l,tN,t),e[l].length||delete e[l]}}else if("object"==typeof c){if("fallbacks"===l){e.fallbacks=styleDetector(e.fallbacks,t,!0);continue}e[l]=objectToArray(c,l,t,n),e[l].length||delete e[l]}else""===e[l]&&delete e[l]}return e}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=Array(t);n<t;n++)l[n]=e[n];return l}var tj="",tO="",tI="",tz="",tW=eF&&"ontouchstart"in document.documentElement;if(eF){var t$={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},tG=document.createElement("p").style;for(var tU in t$)if(tU+"Transform" in tG){tj=tU,tO=t$[tU];break}"Webkit"===tj&&"msHyphens"in tG&&(tj="ms",tO=t$.ms,tz="edge"),"Webkit"===tj&&"-apple-trailing-word"in tG&&(tI="apple")}var tB={js:tj,css:tO,vendor:tI,browser:tz,isTouch:tW},tH=/[-\s]+(.)?/g;function toUpper(e,t){return t?t.toUpperCase():""}function camelize(e){return e.replace(tH,toUpper)}function pascalize(e){return camelize("-"+e)}var tV,tq,tK,tX,tY,tQ,tZ,tJ,t0={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},t1={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},t2=Object.keys(t1),prefixCss=function(e){return tB.css+e},t3=[{noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===tB.js?"-webkit-"+e:tB.css+e)}},{noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===tB.js?tB.css+"print-"+e:e)}},{noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===tB.js){var n="mask-image";if(camelize(n) in t)return e;if(tB.js+pascalize(n) in t)return tB.css+e}return e}},{noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==tB.vendor||tB.isTouch?e:tB.css+e)}},{noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:tB.css+e)}},{noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:tB.css+e)}},{noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===tB.js||"ms"===tB.js&&"edge"!==tB.browser?tB.css+e:e)}},{noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===tB.js||"ms"===tB.js||"apple"===tB.vendor?tB.css+e:e)}},{supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===tB.js?"WebkitColumn"+pascalize(e) in t&&tB.css+"column-"+e:"Moz"===tB.js&&"page"+pascalize(e) in t&&"page-"+e)}},{supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===tB.js)return e;var n=e.replace("-inline","");return tB.js+pascalize(n) in t&&tB.css+n}},{supportedProperty:function(e,t){return camelize(e) in t&&e}},{supportedProperty:function(e,t){var n=pascalize(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:tB.js+n in t?tB.css+e:"Webkit"!==tB.js&&"Webkit"+n in t&&"-webkit-"+e}},{supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===tB.js?""+tB.css+e:e)}},{supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===tB.js?tB.css+"scroll-chaining":e)}},{supportedProperty:function(e,t){var n=t0[e];return!!(n&&tB.js+pascalize(n) in t)&&tB.css+n}},{supportedProperty:function(e,t,n){var l=n.multiple;if(t2.indexOf(e)>-1){var c=t1[e];if(!Array.isArray(c))return tB.js+pascalize(c) in t&&tB.css+c;if(!l)return!1;for(var y=0;y<c.length;y++)if(!(tB.js+pascalize(c[0]) in t))return!1;return c.map(prefixCss)}return!1}}],t6=t3.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),t8=t3.filter(function(e){return e.noPrefill}).reduce(function(e,t){var n;return e.push.apply(e,function(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(n=t.noPrefill)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}(n)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),e},[]),t9={};if(eF){tJ=document.createElement("p");var t7=window.getComputedStyle(document.documentElement,"");for(var rt in t7)isNaN(rt)||(t9[t7[rt]]=t7[rt]);t8.forEach(function(e){return delete t9[e]})}function supportedProperty17(e,t){if(void 0===t&&(t={}),!tJ)return e;if(null!=t9[e])return t9[e];("transition"===e||"transform"===e)&&(t[e]=e in tJ.style);for(var n=0;n<t6.length&&(t9[e]=t6[n](e,tJ.style,t),!t9[e]);n++);try{tJ.style[e]=""}catch{return!1}return t9[e]}var rr,rn={},ri={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},ra=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function prefixTransitionCallback(e,t,n){return"var"===t?"var":"all"===t?"all":"all"===n?", all":(t?supportedProperty17(t):", "+supportedProperty17(n))||t||n}function supportedValue(e,t){var n=t;if(!rr||"content"===e)return t;if("string"!=typeof n||!isNaN(parseInt(n,10)))return n;var l=e+n;if(null!=rn[l])return rn[l];try{rr.style[e]=n}catch{return rn[l]=!1,!1}if(ri[e])n=n.replace(ra,prefixTransitionCallback);else if(""===rr.style[e]&&("-ms-flex"===(n=tB.css+n)&&(rr.style[e]="-ms-flexbox"),rr.style[e]=n,""===rr.style[e]))return rn[l]=!1,!1;return rr.style[e]="",rn[l]=n,rn[l]}eF&&(rr=document.createElement("p"));var memoize2=function(e){var t,n;return function(){for(var l=arguments.length,c=Array(l),y=0;y<l;y++)c[y]=arguments[y];if(Array.isArray(t)&&c.length===t.length){for(var _=!0,x=0;x<c.length;x++)c[x]!==t[x]&&(_=!1);if(_)return n}return t=c,n=e.apply(void 0,c)}},mergeClasses=function(e,t){var n=_extends$1({},e);for(var l in t)n[l]=l in n?n[l]+" "+t[l]:t[l];return n},ro=Number.MIN_SAFE_INTEGER||-1e9,getSheetIndex=function(){return ro++},rs=(0,W.createContext)({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!eF}),rl=new Map,getManager=function(e,t){var n=e.managers;if(n)return n[t]||(n[t]=new ts),n[t];var l=rl.get(t);return l||(l=new ts,rl.set(t,l)),l},manageSheet=function(e){var t=e.sheet,n=e.context,l=e.index,c=e.theme;t&&(getManager(n,l).manage(c),n.registry&&n.registry.add(t))},unmanageSheet=function(e){e.sheet&&getManager(e.context,e.index).unmanage(e.theme)},ru=createJss((void 0===rC&&(rC={}),{plugins:[{onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var l=createRule(e,{},n);return l[tc]=t,l},onProcessStyle:function(e,t){if(tu in t||tc in t)return e;var n={};for(var l in e){var c=e[l];"function"==typeof c&&(delete e[l],n[l]=c)}return t[tu]=n,e},onUpdate:function(e,t,n,l){var c=t[tc];c&&(t.style=c(e)||{});var y=t[tu];if(y)for(var _ in y)t.prop(_,y[_](e),l)}},(rP=rC.observable,{onCreateRule:function(e,t,n){if(!isObservable(t))return null;var l=createRule(e,{},n);return t.subscribe(function(e){for(var t in e)l.prop(t,e[t],rP)}),l},onProcessRule:function(e){if(!(e&&"style"!==e.type)){var t=e.style,_loop=function(n){var l=t[n];if(!isObservable(l))return"continue";delete t[n],l.subscribe({next:function(t){e.prop(n,t,rP)}})};for(var n in t)_loop(n)}}}),{onProcessRule:function(e){"string"==typeof e.style&&(e.style=parse(e.style))}},{onCreateRule:function(e,t,n){if(!e)return null;if(e===tm)return new tb(e,t,n);if("@"===e[0]&&e.substr(0,tv.length)===tv)return new ty(e,t,n);var l=n.parent;return l&&("global"===l.type||l.options.parent&&"global"===l.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,l=e.style,c=l?l[tm]:null;if(c){for(var y in c)t.addRule(y,c[y],_extends$1({},n,{selector:addScope(y,e.selector)}));delete l[tm]}}(e,t),function(e,t){var n=e.options,l=e.style;for(var c in l)if(!("@"!==c[0]||c.substr(0,tm.length)!==tm)){var y=addScope(c.substr(tm.length),e.selector);t.addRule(y,l[c],_extends$1({},n,{selector:y})),delete l[c]}}(e,t))}},{onProcessStyle:function(e,t,n){return"extend"in e?function extend(e,t,n,l){return void 0===l&&(l={}),function(e,t,n,l){if("string"==typeof e.extend){if(!n)return;var c=n.getRule(e.extend);if(!c||c===t)return;var y=c.options.parent;y&&extend(y.rules.raw[e.extend],t,n,l);return}if(Array.isArray(e.extend)){for(var _=0;_<e.extend.length;_++){var x=e.extend[_];extend("string"==typeof x?_extends$1({},e,{extend:x}):e.extend[_],t,n,l)}return}for(var S in e.extend){if("extend"===S){extend(e.extend.extend,t,n,l);continue}if(isObject$2(e.extend[S])){S in l||(l[S]={}),extend(e.extend[S],t,n,l[S]);continue}l[S]=e.extend[S]}}(e,t,n,l),function(e,t,n,l){for(var c in e)if("extend"!==c){if(isObject$2(l[c])&&isObject$2(e[c])){extend(e[c],t,n,l[c]);continue}if(isObject$2(e[c])){l[c]=extend(e[c],t,n);continue}l[c]=e[c]}}(e,t,n,l),l}(e,t,n):e},onChangeValue:function(e,t,n){if("extend"!==t)return e;if(null==e||!1===e){for(var l in n[tx])n.prop(l,null);return n[tx]=null,null}if("object"==typeof e){for(var c in e)n.prop(c,e[c]);n[tx]=e}return null}},{onProcessStyle:function(e,t,n){if("style"!==t.type)return e;var l,c,y=t.options.parent;for(var _ in e){var x=-1!==_.indexOf("&"),S="@"===_[0];if(!(!x&&!S)){if(l=function(e,t,n){if(n)return _extends$1({},n,{index:n.index+1});var l=e.options.nestingLevel;l=void 0===l?1:l+1;var c=_extends$1({},e.options,{nestingLevel:l,index:t.indexOf(e)+1});return delete c.name,c}(t,y,l),x){var w=function(e,t){for(var n=t.split(tS),l=e.split(tS),c="",y=0;y<n.length;y++)for(var _=n[y],x=0;x<l.length;x++){var S=l[x];c&&(c+=", "),c+=-1!==S.indexOf("&")?S.replace(tw,_):_+" "+S}return c}(_,t.selector);c||(c=function(e,t){return function(n,l){var c=e.getRule(l)||t&&t.getRule(l);return c?c.selector:l}}(y,n)),w=w.replace(tk,c);var T=t.key+"-"+_;"replaceRule"in y?y.replaceRule(T,e[_],_extends$1({},l,{selector:w})):y.addRule(T,e[_],_extends$1({},l,{selector:w}))}else S&&y.addRule(_,{},l).addRule(t.key,e[_],{selector:t.selector});delete e[_]}}return e}},{onProcessStyle:function(e,t){return"composes"in e&&(function registerClass(e,t){if(!t)return!0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(!registerClass(e,t[n]))return!1;return!0}if(t.indexOf(" ")>-1)return registerClass(e,t.split(" "));var l=e.options.parent;if("$"===t[0]){var c=l.getRule(t.substr(1));return!!c&&c!==e&&(l.classes[e.key]+=" "+l.classes[c.key],!0)}return l.classes[e.key]+=" "+t,!0}(t,e.composes),delete e.composes),e}},{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=convertCase(e[t]);return e}return convertCase(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var l=hyphenateStyleName(t);return t===l?e:(n.prop(l,e),null)}},(void 0===(rM=rC.defaultUnit)&&(rM={}),rT=addCamelCasedVersion(rM),{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var n in e)e[n]=iterate(n,e[n],rT);return e},onChangeValue:function(e,t){return iterate(t,e,rT)}}),{onProcessStyle:function(e,t){if(!e||"style"!==t.type)return e;if(Array.isArray(e)){for(var n=0;n<e.length;n++)e[n]=styleDetector(e[n],t);return e}return styleDetector(e,t)}},{onProcessRule:function(e){if("keyframes"===e.type){var t;e.at="-"===(t=e.at)[1]||"ms"===tB.js?t:"@"+tB.css+"keyframes"+t.substr(10)}},onProcessStyle:function(e,t){return"style"!==t.type?e:function prefixStyle(e){for(var t in e){var n=e[t];if("fallbacks"===t&&Array.isArray(n)){e[t]=n.map(prefixStyle);continue}var l=!1,c=supportedProperty17(t);c&&c!==t&&(l=!0);var y=!1,_=supportedValue(c,toCssValue(n));_&&_!==n&&(y=!0),(l||y)&&(l&&delete e[t],e[c||t]=_||n)}return e}(e)},onChangeValue:function(e,t){return supportedValue(t,toCssValue(e))||e}},(rE=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length},{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var n={},l=Object.keys(e).sort(rE),c=0;c<l.length;c++)n[l[c]]=e[l[c]];return n}})]})),rd=new WeakMap,getMeta=function(e){return rd.get(e)},addMeta=function(e,t){rd.set(e,t)},getStyles=function(e){var t=e.styles;return"function"!=typeof t?t:t(e.theme)},createStyleSheet=function(e){if(!e.context.disableStylesGeneration){var t,n,l,c,y=getManager(e.context,e.index),_=y.get(e.theme);if(_)return _;var x=e.context.jss||ru,S=getStyles(e),w=function getDynamicStyles(e){var t=null;for(var n in e){var l=e[n],c=typeof l;if("function"===c)t||(t={}),t[n]=l;else if("object"===c&&null!==l&&!Array.isArray(l)){var y=getDynamicStyles(l);y&&(t||(t={}),t[n]=y)}}return t}(S),T=x.createStyleSheet(S,(t=null!==w,e.context.id&&null!=e.context.id.minify&&(n=e.context.id.minify),l=e.context.classNamePrefix||"",e.name&&!n&&(l+=e.name.replace(/\s/g,"-")+"-"),c="",e.name&&(c=e.name+", "),c+="function"==typeof e.styles?"Themed":"Unthemed",_extends$1({},e.sheetOptions,{index:e.index,meta:c,classNamePrefix:l,link:t,generateId:e.sheetOptions&&e.sheetOptions.generateId?e.sheetOptions.generateId:e.context.generateId})));return addMeta(T,{dynamicStyles:w,styles:S}),y.add(e.theme,T),T}},removeDynamicRules=function(e,t){for(var n in t)e.deleteRule(t[n])},updateDynamicRules=function(e,t,n){for(var l in n)t.updateOne(n[l],e)},addDynamicRules=function(e,t){var n=getMeta(e);if(n){var l={};for(var c in n.dynamicStyles)for(var y=e.rules.index.length,_=e.addRule(c,n.dynamicStyles[c]),x=y;x<e.rules.index.length;x++){var S=e.rules.index[x];e.updateOne(S,t),l[_===S?c:S.key]=S}return l}},getSheetClasses=function(e,t){if(!t)return e.classes;var n=getMeta(e);if(!n)return e.classes;var l={};for(var c in n.styles)l[c]=e.classes[c],c in t&&(l[c]+=" "+e.classes[t[c].key]);return l};function getUseInsertionEffect(e){return e?W.useEffect:W.useInsertionEffect||W.useLayoutEffect}var rp={},createUseStyles=function(e,t){void 0===t&&(t={});var n=t,l=n.index,c=void 0===l?getSheetIndex():l,y=n.theming,_=n.name,x=_objectWithoutPropertiesLoose(n,["index","theming","name"]),S=y&&y.context||eT,w={};return function(t){var n,l=(0,W.useRef)(!0),y=(0,W.useContext)(rs),T=(n=t&&t.theme,"function"==typeof e&&(n||(0,W.useContext)(S))||rp),E=(0,W.useMemo)(function(){var n=createStyleSheet({context:y,styles:e,name:_,theme:T,index:c,sheetOptions:x});return n&&y.isSSR&&manageSheet({index:c,context:y,sheet:n,theme:T}),[n,n?addDynamicRules(n,t):null]},[y,T]),F=E[0],D=E[1];getUseInsertionEffect(y.isSSR)(function(){F&&D&&!l.current&&updateDynamicRules(t,F,D)},[t]),getUseInsertionEffect(y.isSSR)(function(){return F&&manageSheet({index:c,context:y,sheet:F,theme:T}),function(){F&&(unmanageSheet({index:c,context:y,sheet:F,theme:T}),D&&removeDynamicRules(F,D))}},[F]);var L=(0,W.useMemo)(function(){return F&&D?getSheetClasses(F,D):w},[F,D]);return(0,W.useDebugValue)(L),(0,W.useDebugValue)(T===rp?"No theme":T),(0,W.useEffect)(function(){l.current=!1}),L}},NoRenderer=function(e){return e.children||null};let injectSheet=function(e,t){void 0===t&&(t={});var n=t,l=n.index,c=void 0===l?getSheetIndex():l,y=n.theming,_=n.injectTheme,x=_objectWithoutPropertiesLoose(n,["index","theming","injectTheme"]),S=y?y.context:eT;return function(t){void 0===t&&(t=NoRenderer);var n,l=(n=t).displayName||n.name||"Component",w=memoize2(function(e,t){return t?mergeClasses(e,t):e}),T=createUseStyles(e,Object.assign(x,{theming:y,index:c,name:l})),E=(0,W.forwardRef)(function(e,n){var l=(0,W.useContext)(S),c=_extends$1({},e);_&&null==c.theme&&(c.theme=l);var y=w(T(c),e.classes);return(0,W.createElement)(t,_extends$1({},c,{classes:y,ref:n}))});return E.displayName="WithStyles("+l+")",E.defaultProps=_extends$1({},t.defaultProps),E.InnerComponent=t,ew(E,t)}};var rm={exports:{}};function reduce(e,t){var n=[function(n,c,y,_){return l||(n=e[_[0]],l=!0),t(n,c,e[c],y,_)}],l=2 in arguments;return l&&n.push(arguments[2]),Array.prototype.reduce.apply(Object.keys(e),n)}var browser=function(e,t,n,l,c,y,_,x){if(!e){var S;if(void 0===t)S=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var w=[n,l,c,y,_,x],T=0;(S=Error(t.replace(/%s/g,function(){return w[T++]}))).name="Invariant Violation"}throw S.framesToPop=1,S}};function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction$1(e){return"function"==typeof e}function isObject$1(e){return"object"==typeof e&&null!==e}EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject$1(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var t,n,l,c,y,_,x,S=Error('Uncaught, unspecified "error" event. ('+t+")");throw S.context=t,S}if(void 0===(n=this._events[e]))return!1;if(isFunction$1(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),n.apply(this,c)}else if(isObject$1(n))for(c=Array.prototype.slice.call(arguments,1),l=(_=n.slice()).length,y=0;y<l;y++)_[y].apply(this,c);return!0},EventEmitter.prototype.addListener=function(e,t){var n,l;if(!isFunction$1(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction$1(t.listener)?t.listener:t),this._events[e]?isObject$1(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject$1(this._events[e])&&!this._events[e].warned&&(n=void 0===this._maxListeners?EventEmitter.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){if(!isFunction$1(t))throw TypeError("listener must be a function");var n=!1;function g(){this.removeListener(e,g),n||(n=!0,t.apply(this,arguments))}return g.listener=t,this.on(e,g),this},EventEmitter.prototype.removeListener=function(e,t){var n,l,c,y;if(!isFunction$1(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(c=(n=this._events[e]).length,l=-1,n===t||isFunction$1(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject$1(n)){for(y=c;y-- >0;)if(n[y]===t||n[y].listener&&n[y].listener===t){l=y;break}if(l<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(l,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0==arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0==arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(isFunction$1(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction$1(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction$1(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};var rv={exports:{}},rb={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */rb.exports,function(e,t){(function(){var n={function:!0,object:!0}[typeof window]&&window||this,l=e&&!e.nodeType&&e,c=t&&l&&"object"==typeof eo&&eo;c&&(c.global===c||c.window===c||c.self===c)&&(n=c);var y=/\bOpera/,_=Object.prototype,x=_.hasOwnProperty,S=_.toString;function capitalize(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function format(e){return e=trim(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:capitalize(e)}function forOwn(e,t){for(var n in e)x.call(e,n)&&t(e[n],n,e)}function getClassOf(e){return null==e?capitalize(e):S.call(e).slice(8,-1)}function qualify(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function reduce2(e,t){var n=null;return function(e,t){var n=-1,l=e?e.length:0;if("number"==typeof l&&l>-1&&l<=9007199254740991)for(;++n<l;)t(e[n],n,e);else forOwn(e,t)}(e,function(l,c){n=t(n,l,c,e)}),n}function trim(e){return String(e).replace(/^ +| +$/g,"")}var w=function parse5(e){var t,l,c,_=n,x=e&&"object"==typeof e&&"String"!=getClassOf(e);x&&(_=e,e=null);var w=_.navigator||{},T=w.userAgent||"";e||(e=T);var E,F,D=x?!!w.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(S.toString()),L="Object",j=x?L:"ScriptBridgingProxyObject",O=x?L:"Environment",W=x&&_.java?"JavaPackage":getClassOf(_.java),$=x?L:"RuntimeObject",V=/\bJava/.test(W)&&_.java,X=V&&getClassOf(_.environment)==O,Y=_.document||{},Z=_.operamini||_.opera,et=y.test(et=x&&Z?Z["[[Class]]"]:getClassOf(Z))?et:Z=null,er=e,en=[],ea=null,eo=e==T,es=eo&&Z&&"function"==typeof Z.version&&Z.version(),el=reduce2([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(t,n){return t||RegExp("\\b"+(n.pattern||qualify(n))+"\\b","i").exec(e)&&(n.label||n)}),eh=reduce2(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(t,n){return t||RegExp("\\b"+(n.pattern||qualify(n))+"\\b","i").exec(e)&&(n.label||n)}),eu=getProduct([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),ed=reduce2({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},function(t,n,l){return t||(n[eu]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(eu)]||RegExp("\\b"+qualify(l)+"(?:\\b|\\w*\\d)","i").exec(e))&&l}),ep=reduce2(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(t,n){var l,c,y,_=n.pattern||qualify(n);return!t&&(t=RegExp("\\b"+_+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(l=t,c=n.label||n,y={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},_&&c&&/^Win/i.test(l)&&!/^Windows Phone /i.test(l)&&(y=y[/[\d.]+$/.exec(l)])&&(l="Windows "+y),l=String(l),_&&c&&(l=l.replace(RegExp(_,"i"),c)),t=l=format(l.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),t});function getProduct(t){return reduce2(t,function(t,n){var l=n.pattern||qualify(n);return!t&&(t=RegExp("\\b"+l+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+l+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+l+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(l,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=format(t[0].replace(RegExp(l,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function getVersion(t){return reduce2(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}if(el&&(el=[el]),/\bAndroid\b/.test(ep)&&!eu&&(E=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(eu=trim(E[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),ed&&!eu?eu=getProduct([ed]):ed&&eu&&(eu=eu.replace(RegExp("^("+qualify(ed)+")[-_.\\s]","i"),ed+" ").replace(RegExp("^("+qualify(ed)+")[-_.]?(\\w)","i"),ed+" $2")),(E=/\bGoogle TV\b/.exec(eu))&&(eu=E[0]),/\bSimulator\b/i.test(e)&&(eu=(eu?eu+" ":"")+"Simulator"),"Opera Mini"==eh&&/\bOPiOS\b/.test(e)&&en.push("running in Turbo/Uncompressed mode"),"IE"==eh&&/\blike iPhone OS\b/.test(e)?(ed=(E=parse5(e.replace(/like iPhone OS/,""))).manufacturer,eu=E.product):/^iP/.test(eu)?(eh||(eh="Safari"),ep="iOS"+((E=/ OS ([\d_]+)/i.exec(e))?" "+E[1].replace(/_/g,"."):"")):"Konqueror"==eh&&/^Linux\b/i.test(ep)?ep="Kubuntu":ed&&"Google"!=ed&&(/Chrome/.test(eh)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(eu))||/\bAndroid\b/.test(ep)&&/^Chrome/.test(eh)&&/\bVersion\//i.test(e)?(eh="Android Browser",ep=/\bAndroid\b/.test(ep)?ep:"Android"):"Silk"==eh?(/\bMobi/i.test(e)||(ep="Android",en.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&en.unshift("accelerated")):"UC Browser"==eh&&/\bUCWEB\b/.test(e)?en.push("speed mode"):"PaleMoon"==eh&&(E=/\bFirefox\/([\d.]+)\b/.exec(e))?en.push("identifying as Firefox "+E[1]):"Firefox"==eh&&(E=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(ep||(ep="Firefox OS"),eu||(eu=E[1])):!eh||(E=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(eh))?(eh&&!eu&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(E+"/")+8))&&(eh=null),(E=eu||ed||ep)&&(eu||ed||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(ep))&&(eh=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(ep)?ep:E)+" Browser")):"Electron"==eh&&(E=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&en.push("Chromium "+E),es||(es=getVersion(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",qualify(eh),"(?:Firefox|Minefield|NetFront)"])),(E="iCab"==el&&parseFloat(es)>3&&"WebKit"||/\bOpera\b/.test(eh)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(el)&&"WebKit"||!el&&/\bMSIE\b/i.test(e)&&("Mac OS"==ep?"Tasman":"Trident")||"WebKit"==el&&/\bPlayStation\b(?! Vita\b)/i.test(eh)&&"NetFront")&&(el=[E]),"IE"==eh&&(E=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(eh+=" Mobile",ep="Windows Phone "+(/\+$/.test(E)?E:E+".x"),en.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(eh="IE Mobile",ep="Windows Phone 8.x",en.unshift("desktop mode"),es||(es=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=eh&&"Trident"==el&&(E=/\brv:([\d.]+)/.exec(e))&&(eh&&en.push("identifying as "+eh+(es?" "+es:"")),eh="IE",es=E[1]),eo){if(l="global",c=null!=(t=_)?typeof t[l]:"number",/^(?:boolean|number|string|undefined)$/.test(c)||"object"==c&&!t[l])getClassOf(E=_.runtime)==j?(eh="Adobe AIR",ep=E.flash.system.Capabilities.os):getClassOf(E=_.phantom)==$?(eh="PhantomJS",es=(E=E.version||null)&&E.major+"."+E.minor+"."+E.patch):"number"==typeof Y.documentMode&&(E=/\bTrident\/(\d+)/i.exec(e))?(es=[es,Y.documentMode],(E=+E[1]+4)!=es[1]&&(en.push("IE "+es[1]+" mode"),el&&(el[1]=""),es[1]=E),es="IE"==eh?String(es[1].toFixed(1)):es[0]):"number"==typeof Y.documentMode&&/^(?:Chrome|Firefox)\b/.test(eh)&&(en.push("masking as "+eh+" "+es),eh="IE",es="11.0",el=["Trident"],ep="Windows");else if(V&&(er=(E=V.lang.System).getProperty("os.arch"),ep=ep||E.getProperty("os.name")+" "+E.getProperty("os.version")),X){try{es=_.require("ringo/engine").version.join("."),eh="RingoJS"}catch{(E=_.system)&&E.global.system==_.system&&(eh="Narwhal",ep||(ep=E[0].os||null))}eh||(eh="Rhino")}else"object"==typeof _.process&&!_.process.browser&&(E=_.process)&&("object"==typeof E.versions&&("string"==typeof E.versions.electron?(en.push("Node "+E.versions.node),eh="Electron",es=E.versions.electron):"string"==typeof E.versions.nw&&(en.push("Chromium "+es,"Node "+E.versions.node),eh="NW.js",es=E.versions.nw)),eh||(eh="Node.js",er=E.arch,ep=E.platform,es=(es=/[\d.]+/.exec(E.version))?es[0]:null));ep=ep&&format(ep)}if(es&&(E=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(es)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(eo&&w.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(ea=/b/i.test(E)?"beta":"alpha",es=es.replace(RegExp(E+"\\+?$"),"")+("beta"==ea?V?"b":"":V?"a":"")+(/\d+\+?/.exec(E)||"")),"Fennec"==eh||"Firefox"==eh&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(ep))eh="Firefox Mobile";else if("Maxthon"==eh&&es)es=es.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(eu))"Xbox 360"==eu&&(ep=null),"Xbox 360"==eu&&/\bIEMobile\b/.test(e)&&en.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(eh)||eh&&!eu&&!/Browser|Mobi/.test(eh))&&("Windows CE"==ep||/Mobi/i.test(e)))eh+=" Mobile";else if("IE"==eh&&eo)try{null===_.external&&en.unshift("platform preview")}catch{en.unshift("embedded")}else(/\bBlackBerry\b/.test(eu)||/\bBB10\b/.test(e))&&(E=(RegExp(eu.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||es)?(ep=((E=[E,/BB10/.test(e)])[1]?(eu=null,ed="BlackBerry"):"Device Software")+" "+E[0],es=null):this!=forOwn&&"Wii"!=eu&&(eo&&Z||/Opera/.test(eh)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==eh&&/\bOS X (?:\d+\.){2,}/.test(ep)||"IE"==eh&&(ep&&!/^Win/.test(ep)&&es>5.5||/\bWindows XP\b/.test(ep)&&es>8||8==es&&!/\bTrident\b/.test(e)))&&!y.test(E=parse5.call(forOwn,e.replace(y,"")+";"))&&E.name&&(E="ing as "+E.name+((E=E.version)?" "+E:""),y.test(eh)?(/\bIE\b/.test(E)&&"Mac OS"==ep&&(ep=null),E="identify"+E):(E="mask"+E,eh=et?format(et.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(E)&&(ep=null),eo||(es=null)),el=["Presto"],en.push(E));(E=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(E=[parseFloat(E.replace(/\.(\d)$/,".0$1")),E],"Safari"==eh&&"+"==E[1].slice(-1)?(eh="WebKit Nightly",ea="alpha",es=E[1].slice(0,-1)):(es==E[1]||es==(E[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1]))&&(es=null),E[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==E[0]&&537.36==E[2]&&parseFloat(E[1])>=28&&"WebKit"==el&&(el=["Blink"]),eo&&(D||E[1])?(el&&(el[1]="like Chrome"),E=E[1]||((E=E[0])<530?1:E<532?2:E<532.05?3:E<533?4:E<534.03?5:E<534.07?6:E<534.1?7:E<534.13?8:E<534.16?9:E<534.24?10:E<534.3?11:E<535.01?12:E<535.02?"13+":E<535.07?15:E<535.11?16:E<535.19?17:E<536.05?18:E<536.1?19:E<537.01?20:E<537.11?"21+":E<537.13?23:E<537.18?24:E<537.24?25:E<537.36?26:"Blink"!=el?"27":"28")):(el&&(el[1]="like Safari"),E=(E=E[0])<400?1:E<500?2:E<526?3:E<533?4:E<534?"4+":E<535?5:E<537?6:E<538?7:E<601?8:E<602?9:E<604?10:E<606?11:E<608?12:"12"),el&&(el[1]+=" "+(E+="number"==typeof E?".x":/[.+]/.test(E)?"":"+")),"Safari"==eh&&(!es||parseInt(es)>45)?es=E:"Chrome"==eh&&/\bHeadlessChrome/i.test(e)&&en.unshift("headless")),"Opera"==eh&&(E=/\bzbov|zvav$/.exec(ep))?(eh+=" ",en.unshift("desktop mode"),"zvav"==E?(eh+="Mini",es=null):eh+="Mobile",ep=ep.replace(RegExp(" *"+E+"$"),"")):"Safari"==eh&&/\bChrome\b/.exec(el&&el[1])?(en.unshift("desktop mode"),eh="Chrome Mobile",es=null,/\bOS X\b/.test(ep)?(ed="Apple",ep="iOS 4.3+"):ep=null):/\bSRWare Iron\b/.test(eh)&&!es&&(es=getVersion("Chrome")),es&&0==es.indexOf(E=/[\d.]+$/.exec(ep))&&e.indexOf("/"+E+"-")>-1&&(ep=trim(ep.replace(E,""))),ep&&-1!=ep.indexOf(eh)&&!RegExp(eh+" OS").test(ep)&&(ep=ep.replace(RegExp(" *"+qualify(eh)+" *"),"")),el&&!/\b(?:Avant|Nook)\b/.test(eh)&&(/Browser|Lunascape|Maxthon/.test(eh)||"Safari"!=eh&&/^iOS/.test(ep)&&/\bSafari\b/.test(el[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(eh)&&el[1])&&(E=el[el.length-1])&&en.push(E),en.length&&(en=["("+en.join("; ")+")"]),ed&&eu&&0>eu.indexOf(ed)&&en.push("on "+ed),eu&&en.push((/^on /.test(en[en.length-1])?"":"on ")+eu),ep&&(F=(E=/ ([\d.+]+)$/.exec(ep))&&"/"==ep.charAt(ep.length-E[0].length-1),ep={architecture:32,family:E&&!F?ep.replace(E[0],""):ep,version:E?E[1]:null,toString:function(){var e=this.version;return this.family+(e&&!F?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(E=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(er))&&!/\bi686\b/i.test(er)?(ep&&(ep.architecture=64,ep.family=ep.family.replace(RegExp(" *"+E),"")),eh&&(/\bWOW64\b/i.test(e)||eo&&/\w(?:86|32)$/.test(w.cpuClass||w.platform)&&!/\bWin64; x64\b/i.test(e))&&en.unshift("32-bit")):ep&&/^OS X/.test(ep.family)&&"Chrome"==eh&&parseFloat(es)>=39&&(ep.architecture=64),e||(e=null);var em={};return em.description=e,em.layout=el&&el[0],em.manufacturer=ed,em.name=eh,em.prerelease=ea,em.product=eu,em.ua=e,em.version=eh&&es,em.os=ep||{architecture:null,family:null,version:null,toString:function(){return"null"}},em.parse=parse5,em.toString=function(){return this.description||""},em.version&&en.unshift(es),em.name&&en.unshift(eh),ep&&eh&&!(ep==String(ep).split(" ")[0]&&(ep==eh.split(" ")[0]||eu))&&en.push(eu?"("+ep+")":"on "+ep),en.length&&(em.description=en.join(" ")),em}();t&&l?forOwn(w,function(e,n){t[n]=e}):n.platform=w}).call(eo)}(rb,rb.exports);var ry=rb.exports;Object.defineProperty(rR=rv.exports,"__esModule",{value:!0}),rF=ry&&ry.__esModule?ry:{default:ry},rR.default={getPlatformName:function(){var e=rF.default.os.family||"";return e=e.toLowerCase().replace(/ /g,""),e=/\bwin/.test(e)?"windows":/darwin|osx/.test(e)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(e)?"linux":"other"},getCharacter:function(e){return null==e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):null}},rv.exports=rR.default;var r_=rv.exports,rx={};Object.defineProperty(rx,"__esModule",{value:!0});var rS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rw=rx.isArray=function(e){return Array.isArray(e)},rk=rx.isPlainObject=function(e){if(!((typeof e>"u"?"undefined":rS(e))==="object"&&null!==e&&!rw(e))||e.toString&&"[object Object]"!==e.toString())return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)};rx.findKey=function(e,t){if(!(!rk(e)&&!rw(e)))return Object.keys(e).find(function(n){return t(e[n])})},rx.compact=function(e){return e.filter(Boolean)};var flattenOnce=function flattenOnce2(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.reduce(function(e,n){return rw(n)&&t?e.concat(flattenOnce2(n,!1)):(e.push(n),e)},[])};rx.flatten=function(e){if(!rw(e))throw Error("flatten expects an array");return flattenOnce(e)},rx.map=function(e,t){if(rw(e))return e.map(t);for(var n=[],l=Object.keys(e),c=l.length,y=0;y<c;y+=1){var _=l[y];n.push(t(e[_],_))}return n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),l=_interopRequireDefault(reduce),c=_interopRequireDefault(browser),y=_interopRequireDefault(r_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var warning2=function(e){},_=function(e){function ShortcutManager2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,ShortcutManager2);var t=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(ShortcutManager2.__proto__||Object.getPrototypeOf(ShortcutManager2)).call(this));return t._platformName=y.default.getPlatformName(),t._parseShortcutDescriptor=function(e){return(0,rx.isPlainObject)(e)?e[t._platformName]:e},t._keymap=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ShortcutManager2,e),n(ShortcutManager2,[{key:"addUpdateListener",value:function(e){(0,c.default)(e,"addUpdateListener: callback argument is not defined or falsy"),this.on(ShortcutManager2.CHANGE_EVENT,e)}},{key:"removeUpdateListener",value:function(e){this.removeListener(ShortcutManager2.CHANGE_EVENT,e)}},{key:"setKeymap",value:function(e){(0,c.default)(e,"setKeymap: keymap argument is not defined or falsy."),this._keymap=e,this.emit(ShortcutManager2.CHANGE_EVENT)}},{key:"extendKeymap",value:function(e){(0,c.default)(e,"extendKeymap: keymap argument is not defined or falsy."),this._keymap=Object.assign({},this._keymap,e),this.emit(ShortcutManager2.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function(e){return function _transformShortcuts2(t){return(0,l.default)(t,function(t,n,l){if((0,rx.isPlainObject)(l)){if(!l[e])return t[n]=_transformShortcuts2(l),t;l=l[e]}return t[n]=l,t},{})}(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function(e){(0,c.default)(e,"getShortcuts: name argument is not defined or falsy.");var t=this._keymap[e];if(!t){warning2("getShortcuts: There are no shortcuts with name "+e+".");return}return(0,rx.compact)((0,rx.flatten)((0,rx.map)(t,this._parseShortcutDescriptor)))}},{key:"_parseShortcutKeyName",value:function(e,t){var n=this;return(0,rx.findKey)(e,function(e){if((0,rx.isPlainObject)(e)&&(e=e[n._platformName]),(0,rx.isArray)(e)){var l=e.indexOf(t);l>=0&&(e=e[l])}return e===t})}},{key:"findShortcutName",value:function(e,t){(0,c.default)(e,"findShortcutName: keyName argument is not defined or falsy."),(0,c.default)(t,"findShortcutName: componentName argument is not defined or falsy.");var n=this._keymap[t];return this._parseShortcutKeyName(n,e)}}]),ShortcutManager2}(EventEmitter.EventEmitter);_.CHANGE_EVENT="shortcuts:update",t.default=_,e.exports=t.default}(rm,rm.exports);var rC,rP,rM,rT,rE,rR,rF,rN,rA,rD=rm.exports,rL={exports:{}},rj={exports:{}};function requireIsModifier(){return rA||(rA=1,rN=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}),rN}var rO={exports:{}};function on(e,t,n,l){return e.addEventListener||(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,n,l),n}rO.exports=on,rO.exports.on=on,rO.exports.off=function(e,t,n,l){return e.removeEventListener||(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,n,l),n};var rI,rz=rO.exports,rW={exports:{}};function requireSpecialKeysMap(){return rI||(rI=1,function(e){e.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var t=1;t<20;++t)e.exports[111+t]="f"+t;for(t=0;t<=9;++t)e.exports[t+96]=t}(rW)),rW.exports}function requireCharacterFromEvent(){return rB||(rB=1,rU=function(e){var t,n;if(t=requireSpecialKeysMap(),rG||(rG=1,r$={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}),n=r$,"keypress"===e.type){var l=String.fromCharCode(e.which);return e.shiftKey||(l=l.toLowerCase()),l}return void 0!==t[e.which]?t[e.which]:void 0!==n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase()}),rU}var r$,rG,rU,rB,rH,rV,rq,rK,rX,rY,rQ,rZ,rJ,r0,r1,r5,r3,r4,r6=rz.off;rj.exports,rj.exports=function(e,t){var n=this.constructor;return this.options=Object.assign({storeInstancesGlobally:!0},t||{}),this.callbacks={},this.directMap={},this.sequenceLevels={},this.resetTimer=null,this.ignoreNextKeyup=!1,this.ignoreNextKeypress=!1,this.nextExpectedAction=!1,this.element=e,this.addEvents(),this.options.storeInstancesGlobally&&n.instances.push(this),this},rj.exports.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,n),this},rj.exports.prototype.bindMultiple=function(e,t,n){for(var l=0;l<e.length;++l)this.bindSingle(e[l],t,n)},rj.exports.prototype.unbind=function(e,t){return this.bind(e,function(){},t)},rj.exports.prototype.trigger=function(e,t){return this.directMap[e+":"+t]&&this.directMap[e+":"+t]({},e),this},rj.exports.prototype.reset=function(){return this.callbacks={},this.directMap={},this},rj.exports.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" combokeys ")>-1)return!1;var n=t.tagName.toLowerCase();return"input"===n||"select"===n||"textarea"===n||t.isContentEditable},rj.exports.prototype.handleKey=function(e,t,n){var l,c,y,_,x={},S=0,w=!1;for(l=this.getMatches(e,t,n),c=0;c<l.length;++c)l[c].seq&&(S=Math.max(S,l[c].level));for(c=0;c<l.length;++c){if(l[c].seq){if(l[c].level!==S)continue;w=!0,x[l[c].seq]=1,this.fireCallback(l[c].callback,n,l[c].combo,l[c].seq);continue}w||this.fireCallback(l[c].callback,n,l[c].combo)}_="keypress"===n.type&&this.ignoreNextKeypress,y=requireIsModifier(),n.type!==this.nextExpectedAction||y(e)||_||this.resetSequences(x),this.ignoreNextKeypress=w&&"keydown"===n.type},rj.exports.prototype.addEvents=function(){var e=this.element;this.eventHandler=(rK||(rK=1,rq=function(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,n=requireCharacterFromEvent()(e);if(void 0!==n){if("keyup"===e.type&&this.ignoreNextKeyup===n){this.ignoreNextKeyup=!1;return}rV||(rV=1,rH=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}),t=rH,this.handleKey(n,t(e),e)}}),rq).bind(this),rz(e,"keypress",this.eventHandler),rz(e,"keydown",this.eventHandler),rz(e,"keyup",this.eventHandler)},rj.exports.prototype.bindSingle=function(e,t,n,l,c){this.directMap[e+":"+n]=t;var y,_=(e=e.replace(/\s+/g," ")).split(" ");if(_.length>1){this.bindSequence(e,_,t,n);return}y=this.getKeyInfo(e,n),this.callbacks[y.key]=this.callbacks[y.key]||[],this.getMatches(y.key,y.modifiers,{type:y.action},l,e,c),this.callbacks[y.key][l?"unshift":"push"]({callback:t,modifiers:y.modifiers,action:y.action,seq:l,level:c,combo:e})},rj.exports.prototype.getKeyInfo=function(e,t){var n,l,c,y,_,x,S=[];for(rY||(rY=1,rX=function(e){return"+"===e?["+"]:e.split("+")}),n=rX(e),rZ||(rZ=1,rQ={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}),y=rQ,r0||(r0=1,rJ={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}),_=rJ,x=requireIsModifier(),c=0;c<n.length;++c)y[l=n[c]]&&(l=y[l]),t&&"keypress"!==t&&_[l]&&(l=_[l],S.push("shift")),x(l)&&S.push(l);return{key:l,modifiers:S,action:t=this.pickBestAction(l,S,t)}},rj.exports.prototype.pickBestAction=function(e,t,n){return n||(n=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===n&&t.length&&(n="keydown"),n},rj.exports.prototype.getReverseMap=function(){var e,t=this.constructor;if(!t.REVERSE_MAP)for(var n in t.REVERSE_MAP={},e=requireSpecialKeysMap())n>95&&n<112||e.hasOwnProperty(n)&&(t.REVERSE_MAP[e[n]]=n);return t.REVERSE_MAP},rj.exports.prototype.getMatches=function(e,t,n,l,c,y){var _,x,S,w,T=[],E=n.type;if("keypress"!==E||n.code&&"Arrow"===n.code.slice(0,5)||(this.callbacks["any-character"]||[]).forEach(function(e){T.push(e)}),!this.callbacks[e])return T;for(S=requireIsModifier(),"keyup"===E&&S(e)&&(t=[e]),_=0;_<this.callbacks[e].length;++_)if(x=this.callbacks[e][_],!(!l&&x.seq&&this.sequenceLevels[x.seq]!==x.level)&&E===x.action&&(r5||(r5=1,r1=function(e,t){return e.sort().join(",")===t.sort().join(",")}),w=r1,"keypress"===E&&!n.metaKey&&!n.ctrlKey||w(t,x.modifiers))){var F=!l&&x.combo===c,D=l&&x.seq===l&&x.level===y;(F||D)&&this.callbacks[e].splice(_,1),T.push(x)}return T},rj.exports.prototype.resetSequences=function(e){e=e||{};var t,n=!1;for(t in this.sequenceLevels){if(e[t]){n=!0;continue}this.sequenceLevels[t]=0}n||(this.nextExpectedAction=!1)},rj.exports.prototype.fireCallback=function(e,t,n,l){this.stopCallback(t,t.target||t.srcElement,n,l)||!1===e(t,n)&&(r4||(r4=1,r3=function(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=!1}),r3(t),_||(_=1,y=function(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=!0}),y(t))},rj.exports.prototype.bindSequence=function(e,t,n,l){var c=this;function callbackAndReset(t){var y;c.fireCallback(n,t,e),"keyup"!==l&&(y=requireCharacterFromEvent(),c.ignoreNextKeyup=y(t)),setTimeout(function(){c.resetSequences()},10)}c.sequenceLevels[e]=0;for(var y=0;y<t.length;++y){var _=y+1===t.length?callbackAndReset:function(t){return function(){c.nextExpectedAction=t,++c.sequenceLevels[e],c.resetSequenceTimer()}}(l||c.getKeyInfo(t[y+1]).action);c.bindSingle(t[y],_,l,e,y)}},rj.exports.prototype.resetSequenceTimer=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout(function(){e.resetSequences()},1e3)},rj.exports.prototype.detach=function(){var e=this.element;r6(e,"keypress",this.eventHandler),r6(e,"keydown",this.eventHandler),r6(e,"keyup",this.eventHandler)},rj.exports.instances=[],rj.exports.reset=function(){this.instances.forEach(function(e){e.reset()})},rj.exports.REVERSE_MAP=null;var r8=rj.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),l=_interopRequireDefault(W),c=_interopRequireDefault(browser),y=_interopRequireDefault(r8),_=_interopRequireDefault(eC),x=_interopRequireDefault(r_);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}var S=function(e){function _class2(){var e,t,n;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,_class2);for(var l=arguments.length,_=Array(l),S=0;S<l;S++)_[S]=arguments[S];return t=n=_possibleConstructorReturn(this,(e=_class2.__proto__||Object.getPrototypeOf(_class2)).call.apply(e,[this].concat(_))),n._combokeys=null,n._lastEvent=null,n._bindShortcuts=function(e){var t=n._getElementToBind();t.setAttribute("tabindex",n.props.tabIndex),n._combokeys=new y.default(t,{storeInstancesGlobally:!1}),n._decorateCombokeys(),n._combokeys.bind(e,n._handleShortcuts,n.props.eventType),n.props.global&&t.addEventListener("shortcuts:global",n._customGlobalHandler)},n._customGlobalHandler=function(e){var t=e.detail,l=t.character,c=t.modifiers,y=t.event,_=null;n.props.targetNodeSelector&&(_=document.querySelector(n.props.targetNodeSelector)),e.target!==n._domNode&&e.target!==_&&n._combokeys.handleKey(l,c,y,!0)},n._decorateCombokeys=function(){var e=n._getElementToBind(),t=n._combokeys.handleKey.bind(n._combokeys);n._combokeys.stopCallback=function(e,t,l){var c="INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.contentEditable&&"true"===t.contentEditable,y=void 0;return y=e.key?1===e.key.length:!!x.default.getCharacter(e),!!(c&&y&&!n.props.alwaysFireHandler)},n._combokeys.handleKey=function(l,c,y,_){if(!(n._lastEvent&&y.timeStamp===n._lastEvent.timeStamp&&y.type===n._lastEvent.type)){n._lastEvent=y;var x=!1;if(n.props.isolate&&!y.__isolateShortcuts&&(y.__isolateShortcuts=!0,x=!0),_||e.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:l,modifiers:c,event:y},bubbles:!0,cancelable:!0})),!y.__isolateShortcuts){n.props.preventDefault&&y.preventDefault(),n.props.stopPropagation&&!_&&y.stopPropagation(),t(l,c,y);return}(n.props.global||x)&&t(l,c,y)}}},n._getElementToBind=function(){var e=null;return n.props.targetNodeSelector?(e=document.querySelector(n.props.targetNodeSelector),(0,c.default)(e,"Node selector '"+n.props.targetNodeSelector+"'  was not found.")):e=n._domNode,e},n._unbindShortcuts=function(){n._combokeys&&(n._combokeys.detach(),n._combokeys.reset())},n._onUpdate=function(){var e=n.props.name&&n.context.shortcuts.getShortcuts(n.props.name);n._unbindShortcuts(),n._bindShortcuts(e||[])},n._handleShortcuts=function(e,t){if(n.props.name){var l=n.context.shortcuts.findShortcutName(t,n.props.name);n.props.handler&&n.props.handler(l,e)}},_possibleConstructorReturn(n,t)}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_class2,e),n(_class2,[{key:"componentDidMount",value:function(){this._onUpdate(),this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function(){this._unbindShortcuts(),this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate),this.props.global&&this._getElementToBind().removeEventListener("shortcuts:global",this._customGlobalHandler)}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{ref:function(t){e._domNode=t},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]),_class2}(l.default.Component);S.displayName="Shortcuts",S.contextTypes={shortcuts:_.default.object.isRequired},S.propTypes={children:_.default.node,handler:_.default.func,name:_.default.string,tabIndex:_.default.number,className:_.default.string,eventType:_.default.string,stopPropagation:_.default.bool,preventDefault:_.default.bool,targetNodeSelector:_.default.string,global:_.default.bool,isolate:_.default.bool,alwaysFireHandler:_.default.bool},S.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:!0,preventDefault:!1,targetNodeSelector:null,global:!1,isolate:!1,alwaysFireHandler:!1},t.default=S,e.exports=t.default}(rL,rL.exports);var r9={ShortcutManager:rD,Shortcuts:rL.exports};let r7=createTheming((0,W.createContext)({})),{ThemeProvider:nt}=r7,withStyles=(e,t)=>injectSheet(e,{...t,theming:r7});new r9.ShortcutManager(ea);var nr={exports:{}};!function(){var e={}.hasOwnProperty;function classNames2(){for(var t=[],n=0;n<arguments.length;n++){var l=arguments[n];if(l){var c=typeof l;if("string"===c||"number"===c)t.push(l);else if(Array.isArray(l)){if(l.length){var y=classNames2.apply(null,l);y&&t.push(y)}}else if("object"===c){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){t.push(l.toString());continue}for(var _ in l)e.call(l,_)&&l[_]&&t.push(_)}}}return t.join(" ")}nr.exports?(classNames2.default=classNames2,nr.exports=classNames2):window.classNames=classNames2}();var nn=nr.exports;let na=getDefaultExportFromCjs(nn),no={accept:"accept",reject:"reject",ignore:"ignore",undo:"undo",project:"Project",loading:"Loading",notasks:"No tasks available.",error:["Oops, something went wrong \uD83D\uDE41.","Check the console for possible errors."],errorFrontEnd:"You might have come across a bug in Prodigy's web app  sorry about that. We'd love to fix this, so feel free to open an issue on the Prodigy Support Forum and include the steps that led to this message.",unload:"Are you sure you want to leave? It looks like you still have unsaved changes.",help:"Help & Instructions",flag:"Flag task",save:"Save",close:"Close",showSidebar:"Show sidebar",projectInfo:"Project Info",progress:"Progress",progressSource:"Source Progress",progressTarget:"Target Progress",thisSession:"This session",total:"Total",target:"Target",history:"History",saved:"Saved annotations.",invalidSession:"The session provided is not authorized to annotate this project.",noSessionOverlap:["feed_overlap set to true or a task router is provided, but no session. Provide a session name in the URL to annotate. ","","Something like:","http://hosturl/?session=NAME"],maxSessionsExceeded:'Maximum number of sessions exceeded. Increase the "max_sessions" setting or use an existing session_id.',invalidProject:"Can't fetch project. Make sure the server is running correctly.",invalidTasks:"Can't fetch tasks. Make sure the server is running correctly.",invalidSend:"Couldn't save annotations. Make sure the server is running correctly.",invalidAnswer:`Cannot submit answer: annotation did not pass validation. 
To skip this example, you can click the ignore button.`,dataset:"Dataset",lang:"Language",view_id:"View ID",recipe_name:"Recipe",session:"Session",label:"Label",author:"Author",description:"Description",show_all:"Show all",show_all_rels:"All relations",show_all_labels:"All labels",reset:"Reset",delete:"Delete",delete_span:"Delete span",audio_loop:"Loop audio",audio_loop_region:"Loop region",audio_pause:"Pause",audio_play:"Play",wrap_lines:"Wrap",relations_spans:"Select spans",relations_rels:"Assign relations",image_rect:"Rect",image_polygon:"Polygon",image_freehand:"Freehand",loading_audio:"Loading audio...",delete_region:"Delete region",live_demo_example:"Example",live_demo_theme:"Theme",llm_io_prompt_label:"Show the prompt sent to the LLM",llm_io_response_label:"Show the response from the LLM",llm_io_none_label:"No LLM Prompt or Response provided for Task",highlight_chars:"Highlight characters"},ns={accept:"annehmen",reject:"ablehnen",ignore:"ignorieren",undo:"r\xfcckg\xe4ngig",project:"Projekt",loading:"Laden",notasks:"Keine Aufgaben vorhanden.",error:["Oops, ein Fehler ist aufgetreten \uD83D\uDE41.","\xdcberpr\xfcfen Sie die Konsole auf m\xf6gliche Fehler."],errorFrontEnd:"Dies ist eventuell ein Bug in der Prodigy Web-App  sorry! Wir w\xfcrden den Fehler gern beheben und freuen uns \xfcber eine Nachricht im Prodigy Support Forum mit den Schritten, die zu dieser Meldung gef\xfchrt haben.",unload:"M\xf6chtest du die Anwendung wirklich verlassen? Dein nicht gespeicherter Fortschritt geht dann verloren.",help:"Hilfe & Anleitung",flag:"Aufgabe markieren",save:"Speichern",close:"Schlie\xdfen",showSidebar:"Sidebar anzeigen",projectInfo:"Projektinfo",progress:"Fortschritt",progressSource:"Quellenfortschritt",progressTarget:"Zielfortschritt",thisSession:"Diese Sitzung",total:"Gesamt",target:"Ziel",history:"Verlauf",saved:"Annotationen gespeichert.",invalidSession:"Die aktuelle Sitzung ist nicht berechtigt, dieses Projekt zu annotieren.",noSessionOverlap:["feed_overlap ist auf true gesetzt oder es wird ein task router bereitgestellt, aber keine Sitzungs-ID ist angegeben. Gebe eine Sitzungs-ID als URL-Parameter an, um zu annotieren.","","So etwas wie:","http://hosturl/?session=NAME"],maxSessionsExceeded:'Maximale Anzahl an Sitzungen \xfcberschritten. Erh\xf6he die Einstellung "max_sessions" oder verwende eine vorhandene Sitzungs-ID.',invalidProject:"Laden des Projekts fehlgeschlagen. \xdcberpr\xfcfe, ob der Server korrekt l\xe4uft.",invalidTasks:"Laden der n\xe4chsten Aufgaben fehlgeschlagen. \xdcberpr\xfcfe, ob der Server korrekt l\xe4uft.",invalidSend:"Speichern fehlgeschlagen. \xdcberpr\xfcfe, ob der Server korrekt l\xe4uft.",invalidAnswer:`Absenden fehlgeschlagen: Annotation hat die Validierung nicht bestanden.
Um das Beispiel zu \xfcberspringen, dr\xfccke den Ignorieren-Button.`,dataset:"Dataset",lang:"Sprache",view_id:"Ansichts-ID",recipe_name:"Rezept",session:"Sitzung",label:"Label",author:"Autor",description:"Beschreibung",reset:"Zur\xfccksetzen",delete:"L\xf6schen",delete_span:"Span l\xf6schen",show_all:"Alle anzeigen",show_all_rels:"Alle Beziehungen",show_all_labels:"Alle Labels",audio_loop:"Audio-Loop",audio_loop_region:"Region-Loop",audio_play:"Abspielen",audio_pause:"Pause",wrap_lines:"Zeilenumbruch",relations_spans:"Spans ausw\xe4hlen",relations_rels:"Beziehungen zuweisen",image_rect:"Rechteck",image_polygon:"Polygon",image_freehand:"Freihand",loading_audio:"Audio l\xe4dt...",delete_region:"Region l\xf6schen",live_demo_example:"Beispiel",live_demo_theme:"Design",llm_io_prompt_label:"Zeigen Sie die an das LLM gesendete Eingabeaufforderung an",llm_io_response_label:"Zeigen Sie die Antwort des LLM an",llm_io_none_label:"F\xfcr die Aufgabe ist keine LLM-Eingabeaufforderung oder -Antwort bereitgestellt",highlight_chars:"Buchstaben annotieren"},nl={accept:"aanvaarden",reject:"verwerpen",ignore:"negeren",undo:"ongedaan maken",project:"Project",loading:"Aan het laden",notasks:"Geen taken beschikbaar.",error:["Oeps, er is iets misgegaan \uD83D\uDE41.","Bekijk de console voor verdere foutmeldingen."],errorFrontEnd:"Je bent waarschijnlijk een fout in de Prodigy webapplicatie tegengekomen  sorry daarvoor. We zouden dit graag herstellen, dus maak gerust een nieuw ticket aan op het Prodigy Forum, en vermeld daarbij welke stappen je hebt uitgevoerd voordat je deze boodschap kreeg.",unload:"Ben je zeker dat je de applicatie wil verlaten? Wijzigingen die niet werden opgeslaan, gaan dan verloren.",help:"Help & Instructies",flag:"Taak markeren",save:"Bewaren",close:"Sluiten",showSidebar:"Toon zijbalk",projectInfo:"Project info",progress:"Vooruitgang",progressSource:"Bron Vooruitgang",progressTarget:"Doel Vooruitgang",thisSession:"Deze sessie",total:"Totaal",target:"Doel",history:"Geschiedenis",saved:"Opgeslagen annotaties.",invalidSession:"Deze sessie heeft niet de juiste toegangsrechten om tot dit project te annoteren.",noSessionOverlap:["feed_overlap is ingesteld op true of er is een task router geactiveerd, maar er is geen sessie gegeven. Geef een sessieparameter op in de URL om te annoteren.","","Bijvoorbeeld zoals:","http://hosturl/?session=NAME"],maxSessionsExceeded:'Maximum aantal sessies overschreden. Verhoog de instelling "max_sessions" of gebruik een bestaande session_id.',invalidProject:"Het project kan niet worden geladen. Zorg ervoor dat de server correct functioneert.",invalidTasks:"De taken kunnen niet worden geladen. Zorg ervoor dat de server correct functioneert.",invalidSend:"De annotaties konden niet worden bewaard. Zorg ervoor dat de server correct functioneert.",invalidAnswer:`Het antwoord kan niet worden bewaard omdat de annotatie ongeldig is.
Gebruik de knop 'negeren' om dit voorbeeld over te slaan.`,dataset:"Dataset",lang:"Taal",view_id:"Interface ID",recipe_name:"Recept",session:"Sessie",label:"Label",author:"Auteur",description:"Beschrijving",show_all:"Toon alles",show_all_rels:"Alle relaties",show_all_labels:"Alle labels",reset:"Herinitialiseren",delete:"Verwijderen",delete_span:"Span verwijderen",audio_loop:"Audio herhalen",audio_loop_region:"Fragment herhalen",audio_pause:"Pauzeren",audio_play:"Spelen",wrap_lines:"Regeleinde samenvoegen",relations_spans:"Spans selecteren",relations_rels:"Relaties toewijzen",image_rect:"Rechthoek",image_polygon:"Polygon",image_freehand:"Vrije hand",loading_audio:"Audio aan het laden...",delete_region:"Fragment verwijderen",live_demo_example:"Voorbeeld",live_demo_theme:"Thema",llm_io_prompt_label:"Toon de prompt die naar de LLM is verzonden",llm_io_response_label:"Toon het antwoord van de LLM",llm_io_none_label:"Er is geen LLM-prompt of -antwoord gegeven voor de taak",highlight_chars:"Karakters markeren"},nh={accept:"",reject:"",ignore:"",undo:"",project:"",loading:"",notasks:"",error:["\uD83D\uDE41",""],errorFrontEnd:"ProdigybugProdigyissue",unload:"",help:"",flag:"",save:"",close:"",showSidebar:"sidebar",projectInfo:"",progress:"",progressSource:"",progressTarget:"",thisSession:"",total:"",target:"",history:"",saved:"",invalidSession:"",noSessionOverlap:["feed_overlap  true   URL ","","","http://hosturl/?session=NAME"],maxSessionsExceeded:"max_sessions session_id",invalidProject:"",invalidTasks:"",invalidSend:"",invalidAnswer:`
`,dataset:"",lang:"",view_id:"ID",recipe_name:"",session:"",label:"",author:"",description:"",show_all:"",show_all_rels:"",show_all_labels:"",reset:"",delete:"",delete_span:"span",audio_loop:"",audio_loop_region:"",audio_pause:"",audio_play:"",wrap_lines:"",relations_spans:"span",relations_rels:"",image_rect:"",image_polygon:"",image_freehand:"",loading_audio:"...",delete_region:"",live_demo_example:"",live_demo_theme:"",llm_io_prompt_label:" LLM ",llm_io_response_label:" LLM ",llm_io_none_label:" LLM ",highlight_chars:""},nu={accept:"aceitar",reject:"rejeitar",ignore:"ignorar",undo:"desfazer",project:"Projeto",loading:"Carregando",notasks:"Nenhuma tarefa dispon\xedvel.",error:["Oops, algo deu errado \uD83D\uDE41.","Verifique o console quanto a poss\xedveis erros."],errorFrontEnd:"Desculpe, parece que voc\xea encontrou um erro no aplicativo web do Prodigy... Queremos consertar nossos erros, ent\xe3o fique \xe0 vontade para reportar um problema no Forum de Suporte do Prodigy e inclua os passos para reproduzirmos este erro.",unload:"Tem certeza que deseja sair? H\xe1 altera\xe7\xf5es que n\xe3o foram salvas.",help:"Ajuda & Instru\xe7\xf5es",flag:"Sinalizar tarefa",save:"Salvar",close:"Fechar",showSidebar:"Mostrar menu lateral",projectInfo:"Informa\xe7\xf5es do projeto",progress:"Progresso",progressSource:"Progresso da fonte",progressTarget:"Progresso alvo",thisSession:"Esta sess\xe3o",total:"Total",target:"Objetivo",history:"Hist\xf3rico",saved:"Anota\xe7\xf5es salvas.",invalidSession:"Esta sess\xe3o n\xe3o tem autoriza\xe7\xe3o para fazer anota\xe7\xf5es neste projeto.",noSessionOverlap:["feed_overlap definido como verdadeiro ou um task router \xe9 fornecido, mas nenhuma sess\xe3o. Forne\xe7a um nome de sess\xe3o no URL para anotar.","","Algo como:","http://hosturl/?session=NAME"],maxSessionsExceeded:'N\xfamero m\xe1ximo de sess\xf5es excedido. Aumente a configura\xe7\xe3o "max_sessions" ou use um session_id existente.',invalidProject:"N\xe3o foi poss\xedvel buscar o projeto. Certifique-se que o servidor est\xe1 funcionando corretamente.",invalidTasks:"N\xe3o foi poss\xedvel buscar tarefas. Certifique-se que o servidor est\xe1 funcionando corretamente.",invalidSend:"N\xe3o foi poss\xedvel salvar as anota\xe7\xf5es. Certifique-se que o servidor est\xe1 funcionando corretamente.",invalidAnswer:`N\xe3o \xe9 poss\xedvel salvar essa anota\xe7\xe3o, pois ela n\xe3o p\xf4de ser validada.
Para ignorar este exemplo, selecione a op\xe7\xe3o ignorar.`,dataset:"Conjunto de dados",lang:"Idioma",view_id:"ID da Vis\xe3o",recipe_name:"Receita",session:"Sess\xe3o",label:"Marcador",author:"Autor",description:"Descri\xe7\xe3o",show_all:"Mostrar tudo",show_all_rels:"Todas rela\xe7\xf5es",show_all_labels:"Todos marcadores",reset:"Reiniciar",delete:"Apagar",delete_span:"Remover parti\xe7\xe3o",audio_loop:"Repetir \xe1udio",audio_loop_region:"Repetir regi\xe3o",audio_pause:"Pausar",audio_play:"Reproduzir",wrap_lines:"Quebrar texto",relations_spans:"Selecionar parti\xe7\xf5es",relations_rels:"Definir rela\xe7\xf5es",image_rect:"Ret\xe2ngulo",image_polygon:"Pol\xedgono",image_freehand:"\xc0 M\xe3o Livre",loading_audio:"Carregando o \xe1udio...",delete_region:"Apagar regi\xe3o",live_demo_example:"Exemplo",live_demo_theme:"Tema",llm_io_prompt_label:"Mostrar o prompt enviado ao LLM",llm_io_response_label:"Mostre a resposta do LLM",llm_io_none_label:"Nenhum prompt ou resposta do LLM fornecido para a tarefa",highlight_chars:"Selecionar caracteres"},np={en:no,de:ns,nl,zh:nh,es:{accept:"aceptar",reject:"rechazar",ignore:"ignorar",undo:"deshacer",project:"Proyecto",loading:"Cargando",notasks:"No hay tareas disponibles.",error:["Ups, algo sali\xf3 mal \uD83D\uDE41.","Revisa la consola por posibles errores."],errorFrontEnd:"Puede que hayas encontrado un error en la web app de Prodigy - lo sentimos por eso. Nos encantar\xeda arreglarlo, as\xed que si quieres, puedes abrir un issue en el Foro de Soporte de Prodigy incluyendo los pasos que te llevaron a este mensaje.",unload:"\xbfEst\xe1s seguro de que quieres salir?? Parece que a\xfan tienes cambios sin guardar.",help:"Ayuda & Instrucciones",flag:"Etiquetar tarea",save:"Guardar",close:"Cerrar",showSidebar:"Mostrar barra lateral",projectInfo:"Informaci\xf3n del Proyecto",progress:"Progreso",progressSource:"Progreso por fuente",progressTarget:"Progreso por objetivo",thisSession:"Esta sesi\xf3n",total:"Total",target:"Objetivo",history:"Historia",saved:"Anotaciones guardadas.",invalidSession:"La sesi\xf3n provista no est\xe1 autorizada para anotar este proyecto.",noSessionOverlap:["feed_overlap establecido en verdadero o se proporciona un task router, pero no hay sesi\xf3n. Proporcione un nombre de sesi\xf3n en la URL para anotar.","","Algo como:","http://hosturl/?session=NAME"],maxSessionsExceeded:'N\xfamero m\xe1ximo de sesiones excedido. Aumente la configuraci\xf3n de "max_sessions" o use un session_id existente.',invalidProject:"No se pudo consultar el proyecto. Aseg\xfarate de que el servidor est\xe1 ejecut\xe1ndose correctamente.",invalidTasks:"No se pudo consultar la tarea. Aseg\xfarate de que el servidor est\xe1 ejecut\xe1ndose correctamente.",invalidSend:"No se pudieron guardar las anotaciones. Aseg\xfarate de que el servidor est\xe1 ejecut\xe1ndose correctamente.",invalidAnswer:"No se puede enviar la respuesta: la anotaci\xf3n no pas\xf3 la validaci\xf3n.Para saltar este ejemplo, puedes hacer click en el bot\xf3n de ignorar.",dataset:"Dataset",lang:"Lenguaje",view_id:"ID de Vista",recipe_name:"Receta",session:"Sesi\xf3n",label:"Etiqueta",author:"Autor",description:"Descripci\xf3n",show_all:"Mostrar todo",show_all_rels:"Todas las relaciones",show_all_labels:"Todas las etiquetas",reset:"Reestablecer",delete:"Eliminar",delete_span:"Eliminar span",audio_loop:"Bucle de audio",audio_loop_region:"Bucle de regi\xf3n",audio_pause:"Pausa",audio_play:"Reproducir",wrap_lines:"Envolver",relations_spans:"Seleccionar spans",relations_rels:"Asignar relaciones",image_rect:"Rect\xe1ngulo",image_polygon:"Pol\xedgono",image_freehand:"A mano alzada",loading_audio:"Cargando audio...",delete_region:"Eliminar regi\xf3n",live_demo_example:"Ejemplo",live_demo_theme:"Tema",llm_io_prompt_label:"Mostrar el mensaje enviado al LLM",llm_io_response_label:"Mostrar la respuesta del LLM",llm_io_none_label:"No se proporciona ning\xfan mensaje o respuesta de LLM para la tarea",highlight_chars:"Caracteres resaltados"},fr:{accept:"accepter",reject:"rejeter",ignore:"ignorer",undo:"annuler",project:"Projet",loading:"Chargement",notasks:"Aucune t\xe2che disponible.",error:["Oups, quelque chose s'est mal pass\xe9 \uD83D\uDE41. ","V\xe9rifiez la console pour d'\xe9ventuelles erreurs."],errorFrontEnd:"Vous avez peut-\xeatre rencontr\xe9 un mauvais fonctionnement dans l'application Web de Prodigy - d\xe9sol\xe9. Nous serions ravi de r\xe9soudre ce probl\xe8me, alors n'h\xe9sitez pas \xe0 ouvrir un ticket sur le forum de support Prodigy et \xe0 inclure les \xe9tapes qui ont conduit \xe0 ce message.",unload:"\xcates-vous s\xfbr de vouloir quitter? Il semble que vous ayez encore des modifications non enregistr\xe9es.",help:"Aide & Instructions",flag:"Marquer la t\xe2che",save:"Enregistrer",close:"Fermer",showSidebar:"Afficher la barre lat\xe9rale",projectInfo:"Info sur le projet",progress:"Progression",progressSource:"Progression de la source",progressTarget:"Progression cibl\xe9",thisSession:"Cette session",total:"Totale",target:"But",history:"Historique",saved:"Annotations enregistr\xe9es.",invalidSession:"La session fournie n'est pas autoris\xe9e \xe0 annoter ce projet.",noSessionOverlap:["feed_overlap d\xe9fini sur true ou un task router est fourni, mais aucune session. Indiquez un nom de session dans l'URL \xe0 annoter.","","Quelque chose comme:","http://hosturl/?session=NAME"],maxSessionsExceeded:'Nombre maximum de sessions d\xe9pass\xe9. Augmentez le param\xe8tre "max_sessions" ou utilisez un session_id existant.',invalidProject:"Impossible de r\xe9cup\xe9rer le projet. Assurez-vous que le serveur fonctionne correctement.",invalidTasks:"Impossible de r\xe9cup\xe9rer les t\xe2ches. Assurez-vous que le serveur fonctionne correctement.",invalidSend:"Impossible d'enregistrer les annotations. Assurez-vous que le serveur fonctionne correctement.",invalidAnswer:"Impossible de soumettre la r\xe9ponse: la validation de l'annotation a echou\xe9e. Pour ignorer cet exemple, vous pouvez cliquer sur le bouton ignorer.",dataset:"jeu de donn\xe9es",lang:"Langue",view_id:"ID de la vue",recipe_name:"Recette",session:"Session",label:"\xc9tiquette",author:"Auteur",description:"Description",show_all:"Afficher tout",show_all_rels:"Toutes les relations",show_all_labels:"Toutes les \xe9tiquettes",reset:"R\xe9initialiser",delete:"Supprimer",delete_span:"supprimer la plage de texte",audio_loop:"Boucle audio",audio_loop_region:"R\xe9gion de la boucle",audio_pause:"Pause",audio_play:"Jouer",wrap_lines:"envelopper",relations_spans:"S\xe9lectionner la plage de text",relations_rels:"Attribuer une relation",image_rect:"Rect",image_polygon:"Polygone",image_freehand:"Main lev\xe9e",loading_audio:"chargement de l'audio...",delete_region:"Supprimer la r\xe9gion",live_demo_example:"Exemple",live_demo_theme:"Th\xe8me",llm_io_prompt_label:"Afficher l'invite envoy\xe9e au LLM",llm_io_response_label:"Afficher la r\xe9ponse du LLM",llm_io_none_label:"Aucune invite ou r\xe9ponse LLM fournie pour la t\xe2che",highlight_chars:"Surligner les caract\xe8res"},pt:nu},getTranslate=e=>{let t=np[e??"en"];return(e,n)=>{let l=t[e]??n;return"string"==typeof l?l:(0,O.jsx)(W.Fragment,{children:l.map(e=>(0,O.jsxs)(W.Fragment,{children:[e,(0,O.jsx)("br",{})]},e))})}};let _ActionButton=class _ActionButton extends W.Component{render(){let{type:e,title:t,disabled:n,onClick:l,ButtonBase:c,classes:y}=this.props,_={className:na(`prodigy-button-${e}`,y.root,y[e]),onClick:l,"aria-label":t,title:t,disabled:n},x=(0,O.jsx)(Icon,{name:e,size:40,className:y.icon});return c?(0,O.jsx)(c,{..._,children:x}):(0,O.jsx)("button",{..._,children:x})}};let nm=withStyles(e=>({root:{pointerEvents:["auto","!important"],display:"inline-block",color:[e.colorButton,"!important"],height:e.buttonSize,width:e.buttonSize,borderRadius:0,border:"none",cursor:"pointer",appearance:"none","&:first-child":{borderLeftWidth:[4,"!important"]},"&:last-child":{borderRightWidth:[4,"!important"]},"&:focus":{outline:[[1,"dotted","currentColor"]]},"&:focus, &:active":{transform:"translate3D(1px, 1px 0)"},"&[disabled]":{background:[e.bgButton,"!important"],cursor:"not-allowed"}},accept:{background:[e.accept,"!important"]},reject:{background:[e.reject,"!important"]},ignore:{background:[e.ignore,"!important"]},undo:{background:[e.undo,"!important"]},icon:{position:"relative",zIndex:10}}))(_ActionButton);let _ActionButtonRowWithoutTheme=class _ActionButtonRowWithoutTheme extends W.Component{constructor(){super(...arguments),__publicField(this,"getTitle",e=>{let t=getTranslate(this.props.uiLang)(e);if(!this.props.keymap)return t;let n=this.props.keymap[e].join(", ");return`${t} (${n})`})}render(){let{buttons:e,handlers:t,disabled:n,ButtonBase:l,classes:c}=this.props,y=na("prodigy-buttons",c.root,c._root,{[c.disabled]:n});return(0,O.jsx)("div",{className:y,children:e.map(e=>(0,O.jsx)(nm,{type:e,onClick:t&&t[e],disabled:n,title:this.getTitle(e),ButtonBase:l},e))})}};__publicField(_ActionButtonRowWithoutTheme,"defaultProps",{buttons:Z});let nv=withStyles(e=>({_root:{},root:{pointerEvents:"none",alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center",minHeight:e.buttonSize,width:"100%","& > *":{borderWidth:[[4,2,0,2],"!important"],borderStyle:["solid","!important"],borderColor:[e.colorButton,"!important"]}},disabled:{cursor:"not-allowed"}}))(_ActionButtonRowWithoutTheme);function ActionButtonRow({theme:e,...t}){let n=(0,O.jsx)(nv,{...t});return e?(0,O.jsx)(nt,{theme:e,children:n}):n}let nb=new Uint8Array(16),ny=[];for(let e=0;e<256;++e)ny.push((e+256).toString(16).slice(1));let n_="u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nx={randomUUID:n_};function v4(e,t,n){if(nx.randomUUID&&!t&&!e)return nx.randomUUID();e=e||{};let c=e.random||(e.rng||function(){if(!l&&!(l="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(nb)})();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=c[e];return t}return function(e,t=0){return ny[e[t+0]]+ny[e[t+1]]+ny[e[t+2]]+ny[e[t+3]]+"-"+ny[e[t+4]]+ny[e[t+5]]+"-"+ny[e[t+6]]+ny[e[t+7]]+"-"+ny[e[t+8]]+ny[e[t+9]]+"-"+ny[e[t+10]]+ny[e[t+11]]+ny[e[t+12]]+ny[e[t+13]]+ny[e[t+14]]+ny[e[t+15]]}(c)}let nS=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){let s3=()=>{this.removeEventListener(e,s3),this.removeEventListener(e,t)};return this.addEventListener(e,s3),s3}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}},nw=class extends nS{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},nk={lineWidth:1,labelSize:11},nC=class i extends nw{constructor(e){super(e||{}),this.unsubscribe=()=>{},this.onPointerMove=e=>{if(!this.wavesurfer)return;let t=this.wavesurfer.getWrapper().getBoundingClientRect(),{width:n}=t,l=e.clientX-t.left,c=Math.min(1,Math.max(0,l/n)),y=Math.min(n-this.options.lineWidth-1,l);this.wrapper.style.transform=`translateX(${y}px)`,this.wrapper.style.opacity="1";let _=this.wavesurfer.getDuration()||0;this.label.textContent=this.formatTime(_*c);let x=this.label.offsetWidth;this.label.style.transform=y+x>n?`translateX(-${x+this.options.lineWidth}px)`:"",this.emit("hover",c)},this.onPointerLeave=()=>{this.wrapper.style.opacity="0"},this.options=Object.assign({},nk,e),this.wrapper=document.createElement("div"),this.label=document.createElement("span"),this.wrapper.appendChild(this.label)}static create(e){return new i(e)}addUnits(e){return`${e}${"number"==typeof e?"px":""}`}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");let e=this.wavesurfer.options,t=this.options.lineColor||e.cursorColor||e.progressColor;this.wrapper.setAttribute("part","hover"),Object.assign(this.wrapper.style,{position:"absolute",zIndex:10,left:0,top:0,height:"100%",pointerEvents:"none",borderLeft:`${this.addUnits(this.options.lineWidth)} solid ${t}`,opacity:"0",transition:"opacity .1s ease-in"}),this.label.setAttribute("part","hover-label"),Object.assign(this.label.style,{display:"block",backgroundColor:this.options.labelBackground,color:this.options.labelColor,fontSize:`${this.addUnits(this.options.labelSize)}`,transition:"transform .1s ease-in",padding:"2px 3px"});let n=this.wavesurfer.getWrapper();n.appendChild(this.wrapper),n.addEventListener("pointermove",this.onPointerMove),n.addEventListener("pointerleave",this.onPointerLeave),this.unsubscribe=()=>{n.removeEventListener("pointermove",this.onPointerMove),n.removeEventListener("pointerleave",this.onPointerLeave)}}formatTime(e){return`${Math.floor(e/60)}:${`0${Math.floor(e)%60}`.slice(-2)}`}destroy(){super.destroy(),this.unsubscribe(),this.wrapper.remove()}},nP=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){let i4=()=>{this.removeEventListener(e,i4),this.removeEventListener(e,t)};return this.addEventListener(e,i4),i4}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}},nM=class extends nP{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}};function i$2(e,t,n,l){return new(n||(n=Promise))(function(c,y){function o2(e){try{h2(l.next(e))}catch(e){y(e)}}function a2(e){try{h2(l.throw(e))}catch(e){y(e)}}function h2(e){var t;e.done?c(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o2,a2)}h2((l=l.apply(e,t||[])).next())})}let nT={decode:function(e,t){return i$2(this,void 0,void 0,function*(){let n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return"number"==typeof e[0]&&(e=[e]),function(e){let t=e[0];if(t.some(e=>e>1||e<-1)){let n=t.length,l=0;for(let e=0;e<n;e++){let n=Math.abs(t[e]);n>l&&(l=n)}for(let t of e)for(let e=0;e<n;e++)t[e]/=l}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:t=>null==e?void 0:e[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}},nE={fetchBlob:function(e,t,n){return i$2(this,void 0,void 0,function*(){let l=yield fetch(e,n);return function(e,t){i$2(this,void 0,void 0,function*(){if(!e.body||!e.headers)return;let n=e.body.getReader(),l=Number(e.headers.get("Content-Length"))||0,c=0,o2=e=>i$2(this,void 0,void 0,function*(){c+=(null==e?void 0:e.length)||0;let n=Math.round(c/l*100);t(n)}),a2=()=>i$2(this,void 0,void 0,function*(){let e;try{e=yield n.read()}catch{return}e.done||(o2(e.value),yield a2())});a2()})}(l.clone(),t),l.blob()})}};let r=class r extends nP{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),null!=e.playbackRate&&this.onceMediaEvent("canplay",()=>{null!=e.playbackRate&&(this.media.playbackRate=e.playbackRate)})}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t)}onceMediaEvent(e,t){return this.onMediaEvent(e,t,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){let e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}setSrc(e,t){if(this.getSrc()===e)return;this.revokeSrc();let n=t instanceof Blob?URL.createObjectURL(t):e;this.media.src=n,this.media.load()}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(e){this.media=e}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=e}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(e,t){null!=t&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}};let o=class o extends nP{constructor(e,t){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=e;let n=this.parentFromOptionsContainer(e.container);this.parent=n;let[l,c]=this.initHtml();n.appendChild(l),this.container=l,this.scrollContainer=c.querySelector(".scroll"),this.wrapper=c.querySelector(".wrapper"),this.canvasWrapper=c.querySelector(".canvases"),this.progressWrapper=c.querySelector(".progress"),this.cursor=c.querySelector(".cursor"),t&&c.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if("string"==typeof e?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw Error("Container not found");return t}initEvents(){let t5=e=>{let t=this.wrapper.getBoundingClientRect(),n=e.clientX-t.left,l=e.clientX-t.left;return[n/t.width,l/t.height]};this.wrapper.addEventListener("click",e=>{let[t,n]=t5(e);this.emit("click",t,n)}),this.wrapper.addEventListener("dblclick",e=>{let[t,n]=t5(e);this.emit("dblclick",t,n)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{let{scrollLeft:e,scrollWidth:t,clientWidth:n}=this.scrollContainer;this.emit("scroll",e/t,(e+n)/t)});let e=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{e(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){!function(e,t,n,l,c=5){let r2=()=>{};e&&e.addEventListener("pointerdown",y=>{if(2===y.button)return;y.preventDefault(),y.stopPropagation(),e.style.touchAction="none";let _=y.clientX,x=y.clientY,S=!1,d2=l=>{l.preventDefault(),l.stopPropagation();let y=l.clientX,w=l.clientY;if(S||Math.abs(y-_)>=c||Math.abs(w-x)>=c){let{left:l,top:c}=e.getBoundingClientRect();S||(S=!0,null==n||n(_-l,x-c)),t(y-_,w-x,y-l,w-c),_=y,x=w}},c2=e=>{S&&(e.preventDefault(),e.stopPropagation())},u2=()=>{e.style.touchAction="",S&&(null==l||l()),r2()};document.addEventListener("pointermove",d2),document.addEventListener("pointerup",u2),document.addEventListener("pointerleave",u2),document.addEventListener("click",c2,!0),r2=()=>{document.removeEventListener("pointermove",d2),document.removeEventListener("pointerup",u2),document.removeEventListener("pointerleave",u2),setTimeout(()=>{document.removeEventListener("click",c2,!0)},10)}})}(this.wrapper,(e,t,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return null==this.options.height?128:isNaN(Number(this.options.height))?"auto"===this.options.height&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){let e=document.createElement("div"),t=e.attachShadow({mode:"open"});return t.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){let t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var e;this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect()}createDelay(e=10){let t={};return this.timeouts.push(t),n=>{t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(n,e)}}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";let t=document.createElement("canvas"),n=t.getContext("2d").createLinearGradient(0,0,0,t.height),l=1/(e.length-1);return e.forEach((e,t)=>{n.addColorStop(t*l,e)}),n}renderBarWaveform(e,t,n,l){let c=e[0],y=e[1]||e[0],_=c.length,{width:x,height:S}=n.canvas,w=S/2,T=window.devicePixelRatio||1,E=t.barWidth?t.barWidth*T:1,F=t.barGap?t.barGap*T:t.barWidth?E/2:0,D=t.barRadius||0,L=x/(E+F)/_,j=D&&"roundRect"in n?"roundRect":"rect";n.beginPath();let O=0,W=0,$=0;for(let e=0;e<=_;e++){let _=Math.round(e*L);if(_>O){let e=Math.round(W*w*l),c=e+Math.round($*w*l)||1,y=w-e;"top"===t.barAlign?y=0:"bottom"===t.barAlign&&(y=S-c),n[j](O*(E+F),y,E,c,D),O=_,W=0,$=0}let x=Math.abs(c[e]||0),T=Math.abs(y[e]||0);x>W&&(W=x),T>$&&($=T)}n.fill(),n.closePath()}renderLineWaveform(e,t,n,l){let n3=t=>{let c=e[t]||e[0],y=c.length,{height:_}=n.canvas,x=_/2,S=n.canvas.width/y;n.moveTo(0,x);let w=0,T=0;for(let e=0;e<=y;e++){let y=Math.round(e*S);if(y>w){let e=x+(Math.round(T*x*l)||1)*(0===t?-1:1);n.lineTo(w,e),w=y,T=0}let _=Math.abs(c[e]||0);_>T&&(T=_)}n.lineTo(w,x)};n.beginPath(),n3(0),n3(1),n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(e,n);let l=t.barHeight||1;if(t.normalize){let t=Array.from(e[0]).reduce((e,t)=>Math.max(e,Math.abs(t)),0);l=t?1/t:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,n,l):this.renderLineWaveform(e,t,n,l)}renderSingleCanvas(e,t,n,l,c,y,_,x){let S=window.devicePixelRatio||1,w=document.createElement("canvas"),T=e[0].length;w.width=Math.round(n*(y-c)/T),w.height=l*S,w.style.width=`${Math.floor(w.width/S)}px`,w.style.height=`${l}px`,w.style.left=`${Math.floor(c*n/S/T)}px`,_.appendChild(w);let E=w.getContext("2d");if(this.renderWaveform(e.map(e=>e.slice(c,y)),t,E),w.width>0&&w.height>0){let e=w.cloneNode(),n=e.getContext("2d");n.drawImage(w,0,0),n.globalCompositeOperation="source-in",n.fillStyle=this.convertColorValues(t.progressColor),n.fillRect(0,0,w.width,w.height),x.appendChild(e)}}renderChannel(e,t,n){let l=document.createElement("div"),c=this.getHeight();l.style.height=`${c}px`,this.canvasWrapper.style.minHeight=`${c}px`,this.canvasWrapper.appendChild(l);let y=l.cloneNode();this.progressWrapper.appendChild(y);let{scrollLeft:_,scrollWidth:x,clientWidth:S}=this.scrollContainer,w=e[0].length,T=w/x,E=Math.min(o.MAX_CANVAS_WIDTH,S);if(t.barWidth||t.barGap){let e=t.barWidth||.5,n=e+(t.barGap||e/2);E%n!=0&&(E=Math.floor(E/n)*n)}let F=Math.floor(Math.abs(_)*T),D=Math.floor(F+E*T),L=D-F,g=(_,x)=>{this.renderSingleCanvas(e,t,n,c,Math.max(0,_),Math.min(x,w),l,y)},j=this.createDelay(),O=this.createDelay(),b=(e,t)=>{g(e,t),e>0&&j(()=>{b(e-L,t-L)})},C=(e,t)=>{g(e,t),t<w&&O(()=>{C(e+L,t+L)})};b(F,D),D<w&&C(D,D+L)}render(e){this.timeouts.forEach(e=>e.timeout&&clearTimeout(e.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?`${this.options.width}px`:this.options.width);let t=window.devicePixelRatio||1,n=this.scrollContainer.clientWidth,l=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrolling=l>n;let c=this.options.fillParent&&!this.isScrolling,y=(c?n:l)*t;if(this.wrapper.style.width=c?"100%":`${l}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let t=0;t<e.numberOfChannels;t++){let n=Object.assign(Object.assign({},this.options),this.options.splitChannels[t]);this.renderChannel([e.getChannelData(t)],n,y)}else{let t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),this.renderChannel(t,this.options,y)}this.audioData=e,this.emit("render")}reRender(){if(!this.audioData)return;let e=this.progressWrapper.clientWidth;this.render(this.audioData);let t=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=t-e}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){let{clientWidth:n,scrollLeft:l,scrollWidth:c}=this.scrollContainer,y=c*e,_=n/2;if(y>l+(t&&this.options.autoCenter&&!this.isDragging?_:n)||y<l){if(this.options.autoCenter&&!this.isDragging){let e=_/20;y-(l+_)>=e&&y<l+n?this.scrollContainer.scrollLeft+=e:this.scrollContainer.scrollLeft=y-_}else this.isDragging?this.scrollContainer.scrollLeft=y<l?y-10:y-n+10:this.scrollContainer.scrollLeft=y}{let{scrollLeft:e}=this.scrollContainer;this.emit("scroll",e/c,(e+n)/c)}}renderProgress(e,t){if(isNaN(e))return;let n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.marginLeft=100===Math.round(n)?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(e,t)}};o.MAX_CANVAS_WIDTH=4e3;let a=class a extends nP{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};let h=class h extends nP{constructor(e=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return i$2(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){this.currentSrc=e,fetch(e).then(e=>e.arrayBuffer()).then(e=>this.audioContext.decodeAudioData(e)).then(e=>{this.buffer=e,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var e;this.paused&&(this.paused=!1,null===(e=this.bufferNode)||void 0===e||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var e;this.paused||(this.paused=!0,null===(e=this.bufferNode)||void 0===e||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return i$2(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(e){return i$2(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){var e,t;return null!==(t=null===(e=this.bufferNode)||void 0===e?void 0:e.playbackRate.value)&&void 0!==t?t:1}set playbackRate(e){this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(e){this.emit("seeking"),this.paused?this.playedDuration=e:(this._pause(),this.playedDuration=e,this._play()),this.emit("timeupdate")}get duration(){var e;return(null===(e=this.buffer)||void 0===e?void 0:e.duration)||0}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}};let nR={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let d=class d extends r{static create(e){return new d(e)}constructor(e){let t=e.media||("WebAudio"===e.backend?new h:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},nR,e),this.timer=new a;let n=t?void 0:this.getMediaElement();this.renderer=new o(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();let l=this.options.url||this.getSrc();l?this.load(l,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{let e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),!0),this.emit("timeupdate",e),this.emit("audioprocess",e)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{let e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t)=>{let n=this.getDuration();this.emit("scroll",e*n,t*n)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let e;this.subscriptions.push(this.renderer.on("drag",t=>{this.options.interact&&(this.renderer.renderProgress(t),clearTimeout(e),e=setTimeout(()=>{this.seekTo(t)},this.isPlaying()?0:200),this.emit("interaction",t*this.getDuration()),this.emit("drag",t))}))}}initPlugins(){var e;!(null===(e=this.options.plugins)||void 0===e)&&e.length&&this.options.plugins.forEach(e=>{this.registerPlugin(e)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),null!=e.mediaControls&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e.init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e)})),e}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return i$2(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=nT.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return i$2(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(e,t,n,l){return i$2(this,void 0,void 0,function*(){if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,t||n||(t=yield nE.fetchBlob(e,e=>this.emit("loading",e),this.options.fetchParams)),this.setSrc(e,t),l=(yield Promise.resolve(l||this.getDuration()))||(yield new Promise(e=>{this.onceMediaEvent("loadedmetadata",()=>e(this.getDuration()))}))||(yield Promise.resolve(0)),n)this.decodedData=nT.createBuffer(n,l);else if(t){let e=yield t.arrayBuffer();this.decodedData=yield nT.decode(e,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(e,t,n){return i$2(this,void 0,void 0,function*(){yield this.loadAudio(e,void 0,t,n)})}loadBlob(e,t,n){return i$2(this,void 0,void 0,function*(){yield this.loadAudio("blob",e,t,n)})}zoom(e){if(!this.decodedData)throw Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw Error("The audio has not been decoded yet");let l=Math.min(e,this.decodedData.numberOfChannels),c=[];for(let e=0;e<l;e++){let l=this.decodedData.getChannelData(e),y=[],_=Math.round(l.length/t);for(let e=0;e<t;e++){let t=l.slice(e*_,(e+1)*_),c=Math.max(...t);y.push(Math.round(c*n)/n)}c.push(y)}return c}getDuration(){let e=super.getDuration()||0;return(0===e||e===1/0)&&this.decodedData&&(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}seekTo(e){let t=this.getDuration()*e;this.setTime(t)}playPause(){return i$2(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(e=>e.destroy()),this.subscriptions.forEach(e=>e()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};let nF={height:50,overlayColor:"rgba(100, 100, 100, 0.1)",insertPosition:"afterend"};let u=class u extends nM{constructor(e){super(e),this.miniWavesurfer=null,this.container=null,this.options=Object.assign({},nF,e),this.minimapWrapper=this.initMinimapWrapper(),this.overlay=this.initOverlay()}static create(e){return new u(e)}onInit(){var e,t;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.options.container?("string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.options.container instanceof HTMLElement&&(this.container=this.options.container),null===(e=this.container)||void 0===e||e.appendChild(this.minimapWrapper)):(this.container=this.wavesurfer.getWrapper().parentElement,null===(t=this.container)||void 0===t||t.insertAdjacentElement(this.options.insertPosition,this.minimapWrapper)),this.initWaveSurferEvents()}initMinimapWrapper(){let e=document.createElement("div");return e.style.position="relative",e.setAttribute("part","minimap"),e}initOverlay(){let e=document.createElement("div");return e.setAttribute("style","position: absolute; z-index: 2; left: 0; top: 0; bottom: 0; transition: left 100ms ease-out; pointer-events: none;"),e.style.backgroundColor=this.options.overlayColor,this.minimapWrapper.appendChild(e),e}initMinimap(){if(this.miniWavesurfer&&(this.miniWavesurfer.destroy(),this.miniWavesurfer=null),!this.wavesurfer)return;let e=this.wavesurfer.getDecodedData(),t=this.wavesurfer.getMediaElement();if(!e||!t)return;let n=[];for(let t=0;t<e.numberOfChannels;t++)n.push(e.getChannelData(t));this.miniWavesurfer=d.create(Object.assign(Object.assign({},this.options),{container:this.minimapWrapper,minPxPerSec:0,fillParent:!0,media:t,peaks:n,duration:e.duration})),this.subscriptions.push(this.miniWavesurfer.on("ready",()=>{this.emit("ready")}),this.miniWavesurfer.on("interaction",()=>{this.emit("interaction")}))}getOverlayWidth(){var e;let t=(null===(e=this.wavesurfer)||void 0===e?void 0:e.getWrapper().clientWidth)||1;return Math.round(this.minimapWrapper.clientWidth/t*100)}onRedraw(){let e=this.getOverlayWidth();this.overlay.style.width=`${e}%`}onScroll(e){if(!this.wavesurfer)return;let t=this.wavesurfer.getDuration();this.overlay.style.left=e/t*100+"%"}initWaveSurferEvents(){this.wavesurfer&&this.subscriptions.push(this.wavesurfer.on("decode",()=>{this.initMinimap()}),this.wavesurfer.on("scroll",e=>{this.onScroll(e)}),this.wavesurfer.on("redraw",()=>{this.onRedraw()}))}destroy(){var e;null===(e=this.miniWavesurfer)||void 0===e||e.destroy(),this.minimapWrapper.remove(),super.destroy()}};let nN=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){let i4=()=>{this.removeEventListener(e,i4),this.removeEventListener(e,t)};return this.addEventListener(e,i4),i4}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}},nA=class extends nN{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}};function i$1(e,t,n,l,c=5){let r2=()=>{};if(!e)return r2;let o2=y=>{if(2===y.button)return;y.preventDefault(),y.stopPropagation(),e.style.touchAction="none";let _=y.clientX,x=y.clientY,S=!1,d2=l=>{l.preventDefault(),l.stopPropagation();let y=l.clientX,w=l.clientY;if(S||Math.abs(y-_)>=c||Math.abs(w-x)>=c){let{left:l,top:c}=e.getBoundingClientRect();S||(S=!0,null==n||n(_-l,x-c)),t(y-_,w-x,y-l,w-c),_=y,x=w}},u2=e=>{S&&(e.preventDefault(),e.stopPropagation())},c2=()=>{e.style.touchAction="",S&&(null==l||l()),r2()};document.addEventListener("pointermove",d2),document.addEventListener("pointerup",c2),document.addEventListener("pointerleave",c2),document.addEventListener("click",u2,!0),r2=()=>{document.removeEventListener("pointermove",d2),document.removeEventListener("pointerup",c2),document.removeEventListener("pointerleave",c2),setTimeout(()=>{document.removeEventListener("click",u2,!0)},10)}};return e.addEventListener("pointerdown",o2),()=>{r2(),e.removeEventListener("pointerdown",o2)}}let nD=class extends nN{constructor(e,t,n=0){var l,c,y,_,x,S,w;super(),this.totalDuration=t,this.numberOfChannels=n,this.minLength=0,this.maxLength=1/0,this.id=e.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(e.start),this.end=this.clampPosition(null!==(l=e.end)&&void 0!==l?l:e.start),this.drag=null===(c=e.drag)||void 0===c||c,this.resize=null===(y=e.resize)||void 0===y||y,this.color=null!==(_=e.color)&&void 0!==_?_:"rgba(0, 0, 0, 0.1)",this.minLength=null!==(x=e.minLength)&&void 0!==x?x:this.minLength,this.maxLength=null!==(S=e.maxLength)&&void 0!==S?S:this.maxLength,this.channelIdx=null!==(w=e.channelIdx)&&void 0!==w?w:-1,this.element=this.initElement(),this.setContent(e.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(e){return Math.max(0,Math.min(this.totalDuration,e))}setPart(){let e=this.start===this.end;this.element.setAttribute("part",`${e?"marker":"region"} ${this.id}`)}addResizeHandles(e){let t=document.createElement("div");t.setAttribute("data-resize","left"),t.setAttribute("style",`
        position: absolute;
        z-index: 2;
        width: 6px;
        height: 100%;
        top: 0;
        left: 0;
        border-left: 2px solid rgba(0, 0, 0, 0.5);
        border-radius: 2px 0 0 2px;
        cursor: ew-resize;
        word-break: keep-all;
      `),t.setAttribute("part","region-handle region-handle-left");let n=t.cloneNode();n.setAttribute("data-resize","right"),n.style.left="",n.style.right="0",n.style.borderRight=n.style.borderLeft,n.style.borderLeft="",n.style.borderRadius="0 2px 2px 0",n.setAttribute("part","region-handle region-handle-right"),e.appendChild(t),e.appendChild(n),i$1(t,e=>this.onResize(e,"start"),()=>null,()=>this.onEndResizing(),1),i$1(n,e=>this.onResize(e,"end"),()=>null,()=>this.onEndResizing(),1)}removeResizeHandles(e){let t=e.querySelector('[data-resize="left"]'),n=e.querySelector('[data-resize="right"]');t&&e.removeChild(t),n&&e.removeChild(n)}initElement(){let e=document.createElement("div"),t=this.start===this.end,n=0,l=100;return this.channelIdx>=0&&this.channelIdx<this.numberOfChannels&&(n=(l=100/this.numberOfChannels)*this.channelIdx),e.setAttribute("style",`
      position: absolute;
      top: ${n}%;
      height: ${l}%;
      background-color: ${t?"none":this.color};
      border-left: ${t?"2px solid "+this.color:"none"};
      border-radius: 2px;
      box-sizing: border-box;
      transition: background-color 0.2s ease;
      cursor: ${this.drag?"grab":"default"};
      pointer-events: all;
    `),!t&&this.resize&&this.addResizeHandles(e),e}renderPosition(){let e=this.start/this.totalDuration,t=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*e+"%",this.element.style.right=100*t+"%"}initMouseEvents(){let{element:e}=this;e&&(e.addEventListener("click",e=>this.emit("click",e)),e.addEventListener("mouseenter",e=>this.emit("over",e)),e.addEventListener("mouseleave",e=>this.emit("leave",e)),e.addEventListener("dblclick",e=>this.emit("dblclick",e)),i$1(e,e=>this.onMove(e),()=>this.onStartMoving(),()=>this.onEndMoving()))}onStartMoving(){this.drag&&(this.element.style.cursor="grabbing")}onEndMoving(){this.drag&&(this.element.style.cursor="grab",this.emit("update-end"))}_onUpdate(e,t){if(!this.element.parentElement)return;let n=e/this.element.parentElement.clientWidth*this.totalDuration,l=t&&"start"!==t?this.start:this.start+n,c=t&&"end"!==t?this.end:this.end+n,y=c-l;l>=0&&c<=this.totalDuration&&l<=c&&y>=this.minLength&&y<=this.maxLength&&(this.start=l,this.end=c,this.renderPosition(),this.emit("update"))}onMove(e){this.drag&&this._onUpdate(e)}onResize(e,t){this.resize&&this._onUpdate(e,t)}onEndResizing(){this.resize&&this.emit("update-end")}_setTotalDuration(e){this.totalDuration=e,this.renderPosition()}play(){this.emit("play")}setContent(e){var t;if(null===(t=this.content)||void 0===t||t.remove(),e){if("string"==typeof e){this.content=document.createElement("div");let t=this.start===this.end;this.content.style.padding=`0.2em ${t?.2:.4}em`,this.content.textContent=e}else this.content=e;this.content.setAttribute("part","region-content"),this.element.appendChild(this.content)}else this.content=void 0}setOptions(e){var t,n;if(e.color&&(this.color=e.color,this.element.style.backgroundColor=this.color),void 0!==e.drag&&(this.drag=e.drag,this.element.style.cursor=this.drag?"grab":"default"),void 0!==e.start||void 0!==e.end){let l=this.start===this.end;this.start=this.clampPosition(null!==(t=e.start)&&void 0!==t?t:this.start),this.end=this.clampPosition(null!==(n=e.end)&&void 0!==n?n:l?this.start:this.end),this.renderPosition(),this.setPart()}if(e.content&&this.setContent(e.content),e.id&&(this.id=e.id,this.setPart()),void 0!==e.resize&&e.resize!==this.resize){let t=this.start===this.end;this.resize=e.resize,this.resize&&!t?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}}remove(){this.emit("remove"),this.element.remove(),this.element=null}};let s=class s extends nA{constructor(e){super(e),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(e){return new s(e)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.wavesurfer.getWrapper().appendChild(this.regionsContainer);let e=[];this.subscriptions.push(this.wavesurfer.on("timeupdate",t=>{let n=this.regions.filter(e=>e.start<=t&&e.end>=t);n.forEach(t=>{e.includes(t)||this.emit("region-in",t)}),e.forEach(e=>{n.includes(e)||this.emit("region-out",e)}),e=n}))}initRegionsContainer(){let e=document.createElement("div");return e.setAttribute("style",`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 3;
      pointer-events: none;
    `),e}getRegions(){return this.regions}avoidOverlapping(e){if(!e.content)return;let t=e.content,n=t.getBoundingClientRect().left,l=e.element.scrollWidth,c=this.regions.filter(t=>{if(t===e||!t.content)return!1;let c=t.content.getBoundingClientRect().left,y=t.element.scrollWidth;return n<c+y&&c<n+l}).map(e=>{var t;return(null===(t=e.content)||void 0===t?void 0:t.getBoundingClientRect().height)||0}).reduce((e,t)=>e+t,0);t.style.marginTop=`${c}px`}saveRegion(e){this.regionsContainer.appendChild(e.element),this.avoidOverlapping(e),this.regions.push(e);let t=[e.on("update-end",()=>{this.avoidOverlapping(e),this.emit("region-updated",e)}),e.on("play",()=>{var t,n;null===(t=this.wavesurfer)||void 0===t||t.play(),null===(n=this.wavesurfer)||void 0===n||n.setTime(e.start)}),e.on("click",t=>{this.emit("region-clicked",e,t)}),e.on("dblclick",t=>{this.emit("region-double-clicked",e,t)}),e.once("remove",()=>{t.forEach(e=>e()),this.regions=this.regions.filter(t=>t!==e)})];this.subscriptions.push(...t),this.emit("region-created",e)}addRegion(e){var t,n;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");let l=this.wavesurfer.getDuration(),c=null===(n=null===(t=this.wavesurfer)||void 0===t?void 0:t.getDecodedData())||void 0===n?void 0:n.numberOfChannels,y=new nD(e,l,c);return l?this.saveRegion(y):this.subscriptions.push(this.wavesurfer.once("ready",e=>{y._setTotalDuration(e),this.saveRegion(y)})),y}enableDragSelection(e){var t,n;let l=null===(n=null===(t=this.wavesurfer)||void 0===t?void 0:t.getWrapper())||void 0===n?void 0:n.querySelector("div");if(!l)return()=>{};let c=null,y=0;return i$1(l,(e,t,n)=>{c&&c._onUpdate(e,n>y?"end":"start")},t=>{var n,l;if(y=t,!this.wavesurfer)return;let _=this.wavesurfer.getDuration(),x=null===(l=null===(n=this.wavesurfer)||void 0===n?void 0:n.getDecodedData())||void 0===l?void 0:l.numberOfChannels,S=this.wavesurfer.getWrapper().clientWidth,w=t/S*_,T=(t+5)/S*_;c=new nD(Object.assign(Object.assign({},e),{start:w,end:T}),_,x),this.regionsContainer.appendChild(c.element)},()=>{c&&(this.saveRegion(c),c=null)})}clearRegions(){this.regions.forEach(e=>e.remove())}destroy(){this.clearRegions(),super.destroy(),this.regionsContainer.remove()}};let t4=class t4{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){let i4=()=>{this.removeEventListener(e,i4),this.removeEventListener(e,t)};return this.addEventListener(e,i4),i4}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}};let e4=class e4 extends t4{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}};let nL={height:20,formatTimeCallback:e=>e/60>1?`${Math.floor(e/60)}:${(e=Math.round(e%60))<10?"0":""}${e}`:`${Math.round(1e3*e)/1e3}`};let n2=class n2 extends e4{constructor(e){super(e||{}),this.options=Object.assign({},nL,e),this.timelineWrapper=this.initTimelineWrapper()}static create(e){return new n2(e)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");let e=this.wavesurfer.getWrapper();if(this.options.container instanceof HTMLElement)e=this.options.container;else if("string"==typeof this.options.container){let t=document.querySelector(this.options.container);if(!t)throw Error(`No Timeline container found matching ${this.options.container}`);e=t}this.options.insertPosition?(e.firstElementChild||e).insertAdjacentElement(this.options.insertPosition,this.timelineWrapper):e.appendChild(this.timelineWrapper),this.options.duration?this.initTimeline(this.options.duration):this.subscriptions.push(this.wavesurfer.on("redraw",()=>{var e;this.initTimeline((null===(e=this.wavesurfer)||void 0===e?void 0:e.getDuration())||0)}))}destroy(){this.timelineWrapper.remove(),super.destroy()}initTimelineWrapper(){let e=document.createElement("div");return e.setAttribute("part","timeline"),e}defaultTimeInterval(e){return e>=25?1:5*e>=25?5:15*e>=25?15:60*Math.ceil(.5/e)}defaultPrimaryLabelInterval(e){return e>=25?10:5*e>=25?6:4}defaultSecondaryLabelInterval(e){return e>=25?5:2}initTimeline(e){var t,n,l;let c=this.timelineWrapper.scrollWidth/e,y=null!==(t=this.options.timeInterval)&&void 0!==t?t:this.defaultTimeInterval(c),_=null!==(n=this.options.primaryLabelInterval)&&void 0!==n?n:this.defaultPrimaryLabelInterval(c),x=this.options.primaryLabelSpacing,S=null!==(l=this.options.secondaryLabelInterval)&&void 0!==l?l:this.defaultSecondaryLabelInterval(c),w=this.options.secondaryLabelSpacing,T="beforebegin"===this.options.insertPosition,E=document.createElement("div");if(E.setAttribute("style",`
      height: ${this.options.height}px;
      overflow: hidden;
      font-size: ${this.options.height/2}px;
      white-space: nowrap;
      position: relative;
    `),T){let e=`
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 2;
      `;E.setAttribute("style",E.getAttribute("style")+e)}"string"==typeof this.options.style?E.setAttribute("style",E.getAttribute("style")+this.options.style):"object"==typeof this.options.style&&Object.assign(E.style,this.options.style);let F=document.createElement("div");F.setAttribute("part","timeline-notch"),F.setAttribute("style",`
      width: 0;
      height: 50%;
      display: flex;
      flex-direction: column;
      justify-content: ${T?"flex-start":"flex-end"};
      ${T?"top: 0;":"bottom: 0;"}
      overflow: visible;
      border-left: 1px solid currentColor;
      opacity: 0.25;
      position: absolute;
      z-index: 1;
    `);for(let t=0,n=0;t<e;t+=y,n++){let e=F.cloneNode(),l=Math.round(100*t)/100%_==0||x&&n%x==0,y=Math.round(100*t)/100%S==0||w&&n%w==0;(l||y)&&(e.style.height="100%",e.style.textIndent="3px",e.textContent=this.options.formatTimeCallback(t),l&&(e.style.opacity="1")),e.style.left=t*c+"px",E.appendChild(e)}this.timelineWrapper.innerHTML="",this.timelineWrapper.appendChild(E),this.emit("ready")}};let _LabelDropdown=class _LabelDropdown extends W.Component{constructor(){super(...arguments),__publicField(this,"handleSelect",e=>this.props.handleSelect(e.target.value))}render(){let{labels:e,classes:t}=this.props,n=Array.isArray(e)?e:[Y];return(0,O.jsx)("select",{tabIndex:1,className:t.root,onChange:this.handleSelect,children:n.map(e=>(0,O.jsx)("option",{className:t.option,value:e,children:e},e))})}};__publicField(_LabelDropdown,"defaultProps",{labels:[Y]});let nj=withStyles(e=>({root:{width:"100%",fontSize:30,background:"transparent",font:"inherit",color:"inherit",cursor:"pointer",textAlign:"center",border:[[1,"solid"]],padding:[[0,10]]},option:{color:e.colorText,background:e.bgCard}}))(_LabelDropdown);var nO={exports:{}};nO.exports=function(){for(var limit$2=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},e={},t=0,n=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];t<n.length;t+=1){var l=n[t];e["[object "+l+"]"]=l.toLowerCase()}var type$p=function(t){return e[Object.prototype.toString.call(t)]||"object"},c=Math.PI,y={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=limit$2(e[t],0,255)):3===t&&(e[t]=limit$2(e[t],0,1));return e},limit:limit$2,type:type$p,unpack:function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==type$p(e[0])&&t?t.split("").filter(function(t){return void 0!==e[0][t]}).map(function(t){return e[0][t]}):e[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==type$p(e[t])?e[t].toLowerCase():null},TWOPI:2*c,PITHIRD:c/3,DEG2RAD:c/180,RAD2DEG:180/c},_={format:{},autodetect:[]},x=y.last,S=y.clip_rgb,w=y.type,Color$D=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("object"===w(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var n=x(e),l=!1;if(!n){l=!0,_.sorted||(_.autodetect=_.autodetect.sort(function(e,t){return t.p-e.p}),_.sorted=!0);for(var c=0,y=_.autodetect;c<y.length;c+=1){var T=y[c];if(n=T.test.apply(T,e))break}}if(_.format[n]){var E=_.format[n].apply(null,l?e:e.slice(0,-1));this._rgb=S(E)}else throw Error("unknown format: "+e);3===this._rgb.length&&this._rgb.push(1)};Color$D.prototype.toString=function(){return"function"==w(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var chroma$k=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(chroma$k.Color,[null].concat(e)))};chroma$k.Color=Color$D,chroma$k.version="2.4.2";var T=y.unpack,E=Math.max,F=y.unpack,D=y.unpack,L=y.type,rgb2cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=T(e,"rgb"),l=n[0],c=n[1],y=n[2],_=1-E(l/=255,E(c/=255,y/=255)),x=_<1?1/(1-_):0;return[(1-l-_)*x,(1-c-_)*x,(1-y-_)*x,_]};Color$D.prototype.cmyk=function(){return rgb2cmyk(this._rgb)},chroma$k.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["cmyk"])))},_.format.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=F(e,"cmyk"))[0],l=e[1],c=e[2],y=e[3],_=e.length>4?e[4]:1;return 1===y?[0,0,0,_]:[n>=1?0:255*(1-n)*(1-y),l>=1?0:255*(1-l)*(1-y),c>=1?0:255*(1-c)*(1-y),_]},_.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===L(e=D(e,"cmyk"))&&4===e.length)return"cmyk"}});var j=y.unpack,O=y.last,rnd=function(e){return Math.round(100*e)/100},W=y.unpack,rgb2hsl_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,l,c=(e=W(e,"rgba"))[0],y=e[1],_=e[2],x=Math.min(c/=255,y/=255,_/=255),S=Math.max(c,y,_),w=(S+x)/2;return S===x?(n=0,l=Number.NaN):n=w<.5?(S-x)/(S+x):(S-x)/(2-S-x),c==S?l=(y-_)/(S-x):y==S?l=2+(_-c)/(S-x):_==S&&(l=4+(c-y)/(S-x)),(l*=60)<0&&(l+=360),e.length>3&&void 0!==e[3]?[l,n,w,e[3]]:[l,n,w]},$=y.unpack,V=y.last,hsl2css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=j(e,"hsla"),l=O(e)||"lsa";return n[0]=rnd(n[0]||0),n[1]=rnd(100*n[1])+"%",n[2]=rnd(100*n[2])+"%","hsla"===l||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,l="hsla"):n.length=3,l+"("+n.join(",")+")"},X=Math.round,Y=y.unpack,Z=Math.round,hsl2rgb_1=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var l,c,y,_=(t=Y(t,"hsl"))[0],x=t[1],S=t[2];if(0===x)l=c=y=255*S;else{var w=[0,0,0],T=[0,0,0],E=S<.5?S*(1+x):S+x-S*x,F=2*S-E,D=_/360;w[0]=D+1/3,w[1]=D,w[2]=D-1/3;for(var L=0;L<3;L++)w[L]<0&&(w[L]+=1),w[L]>1&&(w[L]-=1),6*w[L]<1?T[L]=F+(E-F)*6*w[L]:2*w[L]<1?T[L]=E:3*w[L]<2?T[L]=F+(E-F)*(2/3-w[L])*6:T[L]=F;l=(e=[Z(255*T[0]),Z(255*T[1]),Z(255*T[2])])[0],c=e[1],y=e[2]}return t.length>3?[l,c,y,t[3]]:[l,c,y,1]},et=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,er=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,en=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ea=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,eo=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,es=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,el=Math.round,css2rgb$1=function(e){if(e=e.toLowerCase().trim(),_.format.named)try{return _.format.named(e)}catch{}if(t=e.match(et)){for(var t,n=t.slice(1,4),l=0;l<3;l++)n[l]=+n[l];return n[3]=1,n}if(t=e.match(er)){for(var c=t.slice(1,5),y=0;y<4;y++)c[y]=+c[y];return c}if(t=e.match(en)){for(var x=t.slice(1,4),S=0;S<3;S++)x[S]=el(2.55*x[S]);return x[3]=1,x}if(t=e.match(ea)){for(var w=t.slice(1,5),T=0;T<3;T++)w[T]=el(2.55*w[T]);return w[3]=+w[3],w}if(t=e.match(eo)){var E=t.slice(1,4);E[1]*=.01,E[2]*=.01;var F=hsl2rgb_1(E);return F[3]=1,F}if(t=e.match(es)){var D=t.slice(1,4);D[1]*=.01,D[2]*=.01;var L=hsl2rgb_1(D);return L[3]=+t[4],L}};css2rgb$1.test=function(e){return et.test(e)||er.test(e)||en.test(e)||ea.test(e)||eo.test(e)||es.test(e)};var eh=y.type,rgb2css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=$(e,"rgba"),l=V(e)||"rgb";return"hsl"==l.substr(0,3)?hsl2css(rgb2hsl_1(n),l):(n[0]=X(n[0]),n[1]=X(n[1]),n[2]=X(n[2]),("rgba"===l||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,l="rgba"),l+"("+n.slice(0,"rgb"===l?3:4).join(",")+")")};Color$D.prototype.css=function(e){return rgb2css(this._rgb,e)},chroma$k.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["css"])))},_.format.css=css2rgb$1,_.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===eh(e)&&css2rgb$1.test(e))return"css"}});var eu=y.unpack;_.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=eu(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},chroma$k.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["gl"])))},Color$D.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var ed=y.unpack,ep=y.unpack,em=Math.floor,ev=y.unpack,eb=y.type,rgb2hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,l=ed(e,"rgb"),c=l[0],y=l[1],_=l[2],x=Math.min(c,y,_),S=Math.max(c,y,_),w=S-x;return 0===w?n=Number.NaN:(c===S&&(n=(y-_)/w),y===S&&(n=2+(_-c)/w),_===S&&(n=4+(c-y)/w),(n*=60)<0&&(n+=360)),[n,100*w/255,x/(255-w)*100]};Color$D.prototype.hcg=function(){return rgb2hcg(this._rgb)},chroma$k.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["hcg"])))},_.format.hcg=function(){for(var e,t,n,l,c,y,_=[],x=arguments.length;x--;)_[x]=arguments[x];var S,w,T,E=(_=ep(_,"hcg"))[0],F=_[1],D=_[2];D*=255;var L=255*F;if(0===F)S=w=T=D;else{360===E&&(E=0),E>360&&(E-=360),E<0&&(E+=360);var j=em(E/=60),O=E-j,W=D*(1-F),$=W+L*(1-O),V=W+L*O,X=W+L;switch(j){case 0:S=(e=[X,V,W])[0],w=e[1],T=e[2];break;case 1:S=(t=[$,X,W])[0],w=t[1],T=t[2];break;case 2:S=(n=[W,X,V])[0],w=n[1],T=n[2];break;case 3:S=(l=[W,$,X])[0],w=l[1],T=l[2];break;case 4:S=(c=[V,W,X])[0],w=c[1],T=c[2];break;case 5:S=(y=[X,W,$])[0],w=y[1],T=y[2]}}return[S,w,T,_.length>3?_[3]:1]},_.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===eb(e=ev(e,"hcg"))&&3===e.length)return"hcg"}});var ey=y.unpack,e_=y.last,ex=Math.round,rgb2hex_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ey(e,"rgba"),l=n[0],c=n[1],y=n[2],_=n[3],x=e_(e)||"auto";void 0===_&&(_=1),"auto"===x&&(x=_<1?"rgba":"rgb");var S="000000"+((l=ex(l))<<16|(c=ex(c))<<8|(y=ex(y))).toString(16);S=S.substr(S.length-6);var w="0"+ex(255*_).toString(16);switch(w=w.substr(w.length-2),x.toLowerCase()){case"rgba":return"#"+S+w;case"argb":return"#"+w+S;default:return"#"+S}},eS=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ew=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,hex2rgb_1=function(e){if(e.match(eS)){(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(ew)){(5===e.length||9===e.length)&&(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw Error("unknown hex color: "+e)},ek=y.type;Color$D.prototype.hex=function(e){return rgb2hex_1(this._rgb,e)},chroma$k.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["hex"])))},_.format.hex=hex2rgb_1,_.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ek(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var eC=y.unpack,eP=y.TWOPI,eM=Math.min,eT=Math.sqrt,eE=Math.acos,eR=y.unpack,eF=y.limit,eN=y.TWOPI,eA=y.PITHIRD,eD=Math.cos,eL=y.unpack,ej=y.type,rgb2hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,l=eC(e,"rgb"),c=l[0],y=l[1],_=l[2],x=eM(c/=255,y/=255,_/=255),S=(c+y+_)/3,w=S>0?1-x/S:0;return 0===w?n=NaN:(n=eE(n=(c-y+(c-_))/2/eT((c-y)*(c-y)+(c-_)*(y-_))),_>y&&(n=eP-n),n/=eP),[360*n,w,S]};Color$D.prototype.hsi=function(){return rgb2hsi(this._rgb)},chroma$k.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["hsi"])))},_.format.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,l,c,y=(e=eR(e,"hsi"))[0],_=e[1],x=e[2];return isNaN(y)&&(y=0),isNaN(_)&&(_=0),y>360&&(y-=360),y<0&&(y+=360),(y/=360)<1/3?l=1-((c=(1-_)/3)+(n=(1+_*eD(eN*y)/eD(eA-eN*y))/3)):y<2/3?(y-=1/3,c=1-((n=(1-_)/3)+(l=(1+_*eD(eN*y)/eD(eA-eN*y))/3))):(y-=2/3,n=1-((l=(1-_)/3)+(c=(1+_*eD(eN*y)/eD(eA-eN*y))/3))),[255*(n=eF(x*n*3)),255*(l=eF(x*l*3)),255*(c=eF(x*c*3)),e.length>3?e[3]:1]},_.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===ej(e=eL(e,"hsi"))&&3===e.length)return"hsi"}});var eO=y.unpack,eI=y.type;Color$D.prototype.hsl=function(){return rgb2hsl_1(this._rgb)},chroma$k.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["hsl"])))},_.format.hsl=hsl2rgb_1,_.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===eI(e=eO(e,"hsl"))&&3===e.length)return"hsl"}});var ez=y.unpack,eW=Math.min,e$=Math.max,eG=y.unpack,eU=Math.floor,eB=y.unpack,eH=y.type,rgb2hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,l,c=(e=ez(e,"rgb"))[0],y=e[1],_=e[2],x=eW(c,y,_),S=e$(c,y,_),w=S-x;return 0===S?(n=Number.NaN,l=0):(l=w/S,c===S&&(n=(y-_)/w),y===S&&(n=2+(_-c)/w),_===S&&(n=4+(c-y)/w),(n*=60)<0&&(n+=360)),[n,l,S/255]};Color$D.prototype.hsv=function(){return rgb2hsv(this._rgb)},chroma$k.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["hsv"])))},_.format.hsv=function(){for(var e,t,n,l,c,y,_=[],x=arguments.length;x--;)_[x]=arguments[x];var S,w,T,E=(_=eG(_,"hsv"))[0],F=_[1],D=_[2];if(D*=255,0===F)S=w=T=D;else{360===E&&(E=0),E>360&&(E-=360),E<0&&(E+=360);var L=eU(E/=60),j=E-L,O=D*(1-F),W=D*(1-F*j),$=D*(1-F*(1-j));switch(L){case 0:S=(e=[D,$,O])[0],w=e[1],T=e[2];break;case 1:S=(t=[W,D,O])[0],w=t[1],T=t[2];break;case 2:S=(n=[O,D,$])[0],w=n[1],T=n[2];break;case 3:S=(l=[O,W,D])[0],w=l[1],T=l[2];break;case 4:S=(c=[$,O,D])[0],w=c[1],T=c[2];break;case 5:S=(y=[D,O,W])[0],w=y[1],T=y[2]}}return[S,w,T,_.length>3?_[3]:1]},_.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===eH(e=eB(e,"hsv"))&&3===e.length)return"hsv"}});var eV={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},eq=y.unpack,eK=Math.pow,rgb_xyz=function(e){return(e/=255)<=.04045?e/12.92:eK((e+.055)/1.055,2.4)},xyz_lab=function(e){return e>eV.t3?eK(e,1/3):e/eV.t2+eV.t0},rgb2lab_1=function(){for(var e,t,n,l=[],c=arguments.length;c--;)l[c]=arguments[c];var y=eq(l,"rgb"),_=(e=y[0],t=y[1],n=y[2],[xyz_lab((.4124564*(e=rgb_xyz(e))+.3575761*(t=rgb_xyz(t))+.1804375*(n=rgb_xyz(n)))/eV.Xn),xyz_lab((.2126729*e+.7151522*t+.072175*n)/eV.Yn),xyz_lab((.0193339*e+.119192*t+.9503041*n)/eV.Zn)]),x=_[0],S=_[1],w=_[2],T=116*S-16;return[T<0?0:T,500*(x-S),200*(S-w)]},eX=y.unpack,eY=Math.pow,xyz_rgb=function(e){return 255*(e<=.00304?12.92*e:1.055*eY(e,1/2.4)-.055)},lab_xyz=function(e){return e>eV.t1?e*e*e:eV.t2*(e-eV.t0)},lab2rgb_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,l,c,y=(e=eX(e,"lab"))[0],_=e[1],x=e[2];return l=(y+16)/116,n=isNaN(_)?l:l+_/500,c=isNaN(x)?l:l-x/200,l=eV.Yn*lab_xyz(l),[xyz_rgb(3.2404542*(n=eV.Xn*lab_xyz(n))-1.5371385*l-.4985314*(c=eV.Zn*lab_xyz(c))),xyz_rgb(-.969266*n+1.8760108*l+.041556*c),xyz_rgb(.0556434*n-.2040259*l+1.0572252*c),e.length>3?e[3]:1]},eQ=y.unpack,eZ=y.type;Color$D.prototype.lab=function(){return rgb2lab_1(this._rgb)},chroma$k.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["lab"])))},_.format.lab=lab2rgb_1,_.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===eZ(e=eQ(e,"lab"))&&3===e.length)return"lab"}});var eJ=y.unpack,e0=y.RAD2DEG,e1=Math.sqrt,e2=Math.atan2,e3=Math.round,lab2lch_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=eJ(e,"lab"),l=n[0],c=n[1],y=n[2],_=e1(c*c+y*y),x=(e2(y,c)*e0+360)%360;return 0===e3(1e4*_)&&(x=Number.NaN),[l,_,x]},e6=y.unpack,e8=y.unpack,e9=y.DEG2RAD,e7=Math.sin,tt=Math.cos,lch2lab_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=e8(e,"lch"),l=n[0],c=n[1],y=n[2];return isNaN(y)&&(y=0),[l,tt(y*=e9)*c,e7(y)*c]},tr=y.unpack,lch2rgb_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=lch2lab_1((e=tr(e,"lch"))[0],e[1],e[2]),l=lab2rgb_1(n[0],n[1],n[2]);return[l[0],l[1],l[2],e.length>3?e[3]:1]},tn=y.unpack,ti=y.unpack,to=y.type,rgb2lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=e6(e,"rgb"),l=rgb2lab_1(n[0],n[1],n[2]);return lab2lch_1(l[0],l[1],l[2])};Color$D.prototype.lch=function(){return rgb2lch(this._rgb)},Color$D.prototype.hcl=function(){return rgb2lch(this._rgb).reverse()},chroma$k.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["lch"])))},chroma$k.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["hcl"])))},_.format.lch=lch2rgb_1,_.format.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=tn(e,"hcl").reverse();return lch2rgb_1.apply(void 0,n)},["lch","hcl"].forEach(function(e){return _.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if("array"===to(t=ti(t,e))&&3===t.length)return e}})});var ts={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},tl=y.type;Color$D.prototype.name=function(){for(var e=rgb2hex_1(this._rgb,"rgb"),t=0,n=Object.keys(ts);t<n.length;t+=1){var l=n[t];if(ts[l]===e)return l.toLowerCase()}return e},_.format.named=function(e){if(ts[e=e.toLowerCase()])return hex2rgb_1(ts[e]);throw Error("unknown color name: "+e)},_.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===tl(e)&&ts[e.toLowerCase()])return"named"}});var th=y.unpack,tu=y.type,tc=y.type,rgb2num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=th(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]};Color$D.prototype.num=function(){return rgb2num(this._rgb)},chroma$k.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["num"])))},_.format.num=function(e){if("number"==tu(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw Error("unknown num color: "+e)},_.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===tc(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var tp=y.unpack,tg=y.type,tm=Math.round;Color$D.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(tm)},Color$D.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map(function(t,n){return n<3?!1===e?t:tm(t):t})},chroma$k.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["rgb"])))},_.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=tp(e,"rgba");return void 0===n[3]&&(n[3]=1),n},_.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===tg(e=tp(e,"rgba"))&&(3===e.length||4===e.length&&"number"==tg(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var tv=Math.log,temperature2rgb_1=function(e){var t,n,l,c=e/100;return c<66?(t=255,n=c<6?0:-155.25485562709179-.44596950469579133*(n=c-2)+104.49216199393888*tv(n),l=c<20?0:-254.76935184120902+.8274096064007395*(l=c-10)+115.67994401066147*tv(l)):(t=351.97690566805693+.114206453784165*(t=c-55)-40.25366309332127*tv(t),n=325.4494125711974+.07943456536662342*(n=c-50)-28.0852963507957*tv(n),l=255),[t,n,l,1]},tb=y.unpack,ty=Math.round,rgb2temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,l=tb(e,"rgb"),c=l[0],y=l[2],_=1e3,x=4e4;x-_>.4;){var S=temperature2rgb_1(n=(x+_)*.5);S[2]/S[0]>=y/c?x=n:_=n}return ty(n)};Color$D.prototype.temp=Color$D.prototype.kelvin=Color$D.prototype.temperature=function(){return rgb2temperature(this._rgb)},chroma$k.temp=chroma$k.kelvin=chroma$k.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["temp"])))},_.format.temp=_.format.kelvin=_.format.temperature=temperature2rgb_1;var t_=y.unpack,tx=Math.cbrt,tS=Math.pow,tw=Math.sign,rgb2oklab_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=t_(e,"rgb"),l=n[0],c=n[1],y=n[2],_=[rgb2lrgb(l/255),rgb2lrgb(c/255),rgb2lrgb(y/255)],x=_[0],S=_[1],w=_[2],T=tx(.4122214708*x+.5363325363*S+.0514459929*w),E=tx(.2119034982*x+.6806995451*S+.1073969566*w),F=tx(.0883024619*x+.2817188376*S+.6299787005*w);return[.2104542553*T+.793617785*E-.0040720468*F,1.9779984951*T-2.428592205*E+.4505937099*F,.0259040371*T+.7827717662*E-.808675766*F]};function rgb2lrgb(e){var t=Math.abs(e);return t<.04045?e/12.92:(tw(e)||1)*tS((t+.055)/1.055,2.4)}var tk=y.unpack,tC=Math.pow,tP=Math.sign,oklab2rgb_1=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=tk(e,"lab"))[0],l=e[1],c=e[2],y=tC(n+.3963377774*l+.2158037573*c,3),_=tC(n-.1055613458*l-.0638541728*c,3),x=tC(n-.0894841775*l-1.291485548*c,3);return[255*lrgb2rgb(4.0767416621*y-3.3077115913*_+.2309699292*x),255*lrgb2rgb(-1.2684380046*y+2.6097574011*_-.3413193965*x),255*lrgb2rgb(-.0041960863*y-.7034186147*_+1.707614701*x),e.length>3?e[3]:1]};function lrgb2rgb(e){var t=Math.abs(e);return t>.0031308?(tP(e)||1)*(1.055*tC(t,1/2.4)-.055):12.92*e}var tM=y.unpack,tT=y.type;Color$D.prototype.oklab=function(){return rgb2oklab_1(this._rgb)},chroma$k.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["oklab"])))},_.format.oklab=oklab2rgb_1,_.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===tT(e=tM(e,"oklab"))&&3===e.length)return"oklab"}});var tE=y.unpack,tR=y.unpack,tF=y.unpack,tN=y.type,rgb2oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=tE(e,"rgb"),l=rgb2oklab_1(n[0],n[1],n[2]);return lab2lch_1(l[0],l[1],l[2])};Color$D.prototype.oklch=function(){return rgb2oklch(this._rgb)},chroma$k.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(Color$D,[null].concat(e,["oklch"])))},_.format.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=lch2lab_1((e=tR(e,"lch"))[0],e[1],e[2]),l=oklab2rgb_1(n[0],n[1],n[2]);return[l[0],l[1],l[2],e.length>3?e[3]:1]},_.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===tN(e=tF(e,"oklch"))&&3===e.length)return"oklch"}});var tA=y.type;Color$D.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===tA(e)?t?(this._rgb[3]=e,this):new Color$D([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},Color$D.prototype.clipped=function(){return this._rgb._clipped||!1},Color$D.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=eV.Kn*e,new Color$D(t,"lab").alpha(this.alpha(),!0)},Color$D.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},Color$D.prototype.darker=Color$D.prototype.darken,Color$D.prototype.brighter=Color$D.prototype.brighten,Color$D.prototype.get=function(e){var t=e.split("."),n=t[0],l=t[1],c=this[n]();if(!l)return c;var y=n.indexOf(l)-("ok"===n.substr(0,2)?2:0);if(y>-1)return c[y];throw Error("unknown channel "+l+" in mode "+n)};var tD=y.type,tL=Math.pow;Color$D.prototype.luminance=function(e){if(void 0!==e&&"number"===tD(e)){if(0===e)return new Color$D([0,0,0,this._rgb[3]],"rgb");if(1===e)return new Color$D([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n=20,test=function(t,l){var c=t.interpolate(l,.5,"rgb"),y=c.luminance();return!(1e-7>Math.abs(e-y))&&n--?y>e?test(t,c):test(c,l):c},l=(t>e?test(new Color$D([0,0,0]),this):test(this,new Color$D([255,255,255]))).rgb();return new Color$D(l.concat([this._rgb[3]]))}return rgb2luminance.apply(void 0,this._rgb.slice(0,3))};var rgb2luminance=function(e,t,n){return .2126*(e=luminance_x(e))+.7152*(t=luminance_x(t))+.0722*(n=luminance_x(n))},luminance_x=function(e){return(e/=255)<=.03928?e/12.92:tL((e+.055)/1.055,2.4)},tj={},tO=y.type,mix$1=function(e,t,n){void 0===n&&(n=.5);for(var l=[],c=arguments.length-3;c-- >0;)l[c]=arguments[c+3];var y=l[0]||"lrgb";if(tj[y]||l.length||(y=Object.keys(tj)[0]),!tj[y])throw Error("interpolation mode "+y+" is not defined");return"object"!==tO(e)&&(e=new Color$D(e)),"object"!==tO(t)&&(t=new Color$D(t)),tj[y](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};Color$D.prototype.mix=Color$D.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],l=arguments.length-2;l-- >0;)n[l]=arguments[l+2];return mix$1.apply(void 0,[this,e,t].concat(n))},Color$D.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new Color$D([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},Color$D.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=eV.Kn*e,t[1]<0&&(t[1]=0),new Color$D(t,"lch").alpha(this.alpha(),!0)},Color$D.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var tI=y.type;Color$D.prototype.set=function(e,t,n){void 0===n&&(n=!1);var l=e.split("."),c=l[0],y=l[1],_=this[c]();if(!y)return _;var x=c.indexOf(y)-("ok"===c.substr(0,2)?2:0);if(x>-1){if("string"==tI(t))switch(t.charAt(0)){case"+":case"-":_[x]+=+t;break;case"*":_[x]*=+t.substr(1);break;case"/":_[x]/=+t.substr(1);break;default:_[x]=+t}else if("number"===tI(t))_[x]=t;else throw Error("unsupported value for Color.set");var S=new Color$D(_,c);return n?(this._rgb=S._rgb,this):S}throw Error("unknown channel "+y+" in mode "+c)},tj.rgb=function(e,t,n){var l=e._rgb,c=t._rgb;return new Color$D(l[0]+n*(c[0]-l[0]),l[1]+n*(c[1]-l[1]),l[2]+n*(c[2]-l[2]),"rgb")};var tz=Math.sqrt,tW=Math.pow;tj.lrgb=function(e,t,n){var l=e._rgb,c=l[0],y=l[1],_=l[2],x=t._rgb,S=x[0],w=x[1],T=x[2];return new Color$D(tz(tW(c,2)*(1-n)+tW(S,2)*n),tz(tW(y,2)*(1-n)+tW(w,2)*n),tz(tW(_,2)*(1-n)+tW(T,2)*n),"rgb")},tj.lab=function(e,t,n){var l=e.lab(),c=t.lab();return new Color$D(l[0]+n*(c[0]-l[0]),l[1]+n*(c[1]-l[1]),l[2]+n*(c[2]-l[2]),"lab")};var _hsx=function(e,t,n,l){var c,y,_,x,S,w,T,E,F,D,L,j,O,W;return"hsl"===l?(_=e.hsl(),x=t.hsl()):"hsv"===l?(_=e.hsv(),x=t.hsv()):"hcg"===l?(_=e.hcg(),x=t.hcg()):"hsi"===l?(_=e.hsi(),x=t.hsi()):"lch"===l||"hcl"===l?(l="hcl",_=e.hcl(),x=t.hcl()):"oklch"===l&&(_=e.oklch().reverse(),x=t.oklch().reverse()),("h"===l.substr(0,1)||"oklch"===l)&&(S=(c=_)[0],T=c[1],F=c[2],w=(y=x)[0],E=y[1],D=y[2]),isNaN(S)||isNaN(w)?isNaN(S)?isNaN(w)?j=Number.NaN:(j=w,(1==F||0==F)&&"hsv"!=l&&(L=E)):(j=S,(1==D||0==D)&&"hsv"!=l&&(L=T)):(W=w>S&&w-S>180?w-(S+360):w<S&&S-w>180?w+360-S:w-S,j=S+n*W),void 0===L&&(L=T+n*(E-T)),O=F+n*(D-F),"oklch"===l?new Color$D([O,L,j],l):new Color$D([j,L,O],l)},lch=function(e,t,n){return _hsx(e,t,n,"lch")};tj.lch=lch,tj.hcl=lch,tj.num=function(e,t,n){var l=e.num(),c=t.num();return new Color$D(l+n*(c-l),"num")},tj.hcg=function(e,t,n){return _hsx(e,t,n,"hcg")},tj.hsi=function(e,t,n){return _hsx(e,t,n,"hsi")},tj.hsl=function(e,t,n){return _hsx(e,t,n,"hsl")},tj.hsv=function(e,t,n){return _hsx(e,t,n,"hsv")},tj.oklab=function(e,t,n){var l=e.oklab(),c=t.oklab();return new Color$D(l[0]+n*(c[0]-l[0]),l[1]+n*(c[1]-l[1]),l[2]+n*(c[2]-l[2]),"oklab")},tj.oklch=function(e,t,n){return _hsx(e,t,n,"oklch")};var t$=y.clip_rgb,tG=Math.pow,tU=Math.sqrt,tB=Math.PI,tH=Math.cos,tV=Math.sin,tq=Math.atan2,_average_lrgb=function(e,t){for(var n=e.length,l=[0,0,0,0],c=0;c<e.length;c++){var y=e[c],_=t[c]/n,x=y._rgb;l[0]+=tG(x[0],2)*_,l[1]+=tG(x[1],2)*_,l[2]+=tG(x[2],2)*_,l[3]+=x[3]*_}return l[0]=tU(l[0]),l[1]=tU(l[1]),l[2]=tU(l[2]),l[3]>.9999999&&(l[3]=1),new Color$D(t$(l))},tK=y.type,tX=Math.pow,scale$2=function(e){var t="rgb",n=chroma$k("#ccc"),l=0,c=[0,1],y=[],_=[0,0],x=!1,S=[],w=!1,T=0,E=1,F=!1,D={},L=!0,j=1,setColors=function(e){if("string"===tK(e=e||["#fff","#000"])&&chroma$k.brewer&&chroma$k.brewer[e.toLowerCase()]&&(e=chroma$k.brewer[e.toLowerCase()]),"array"===tK(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=chroma$k(e[t]);y.length=0;for(var n=0;n<e.length;n++)y.push(n/(e.length-1))}return resetCache(),S=e},getClass=function(e){if(null!=x){for(var t=x.length-1,n=0;n<t&&e>=x[n];)n++;return n-1}return 0},tMapLightness=function(e){return e},tMapDomain=function(e){return e},getColor2=function(e,l){if(null==l&&(l=!1),isNaN(e)||null===e)return n;if(l)w=e;else if(x&&x.length>2){var c,w;w=getClass(e)/(x.length-2)}else w=E!==T?(e-T)/(E-T):1;w=tMapDomain(w),l||(w=tMapLightness(w)),1!==j&&(w=tX(w,j));var F=Math.floor(1e4*(w=Math.min(1,Math.max(0,w=_[0]+w*(1-_[0]-_[1])))));if(L&&D[F])c=D[F];else{if("array"===tK(S))for(var O=0;O<y.length;O++){var W=y[O];if(w<=W||w>=W&&O===y.length-1){c=S[O];break}if(w>W&&w<y[O+1]){w=(w-W)/(y[O+1]-W),c=chroma$k.interpolate(S[O],S[O+1],w,t);break}}else"function"===tK(S)&&(c=S(w));L&&(D[F]=c)}return c},resetCache=function(){return D={}};setColors(e);var f=function(e){var t=chroma$k(getColor2(e));return w&&t[w]?t[w]():t};return f.classes=function(e){if(null!=e){if("array"===tK(e))x=e,c=[e[0],e[e.length-1]];else{var t=chroma$k.analyze(c);x=0===e?[t.min,t.max]:chroma$k.limits(t,"e",e)}return f}return x},f.domain=function(e){if(!arguments.length)return c;T=e[0],E=e[e.length-1],y=[];var t=S.length;if(e.length===t&&T!==E)for(var n=0,l=Array.from(e);n<l.length;n+=1){var _=l[n];y.push((_-T)/(E-T))}else{for(var x=0;x<t;x++)y.push(x/(t-1));if(e.length>2){var w=e.map(function(t,n){return n/(e.length-1)}),F=e.map(function(e){return(e-T)/(E-T)});F.every(function(e,t){return w[t]===e})||(tMapDomain=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=F[t+1];)t++;var n=(e-F[t])/(F[t+1]-F[t]);return w[t]+n*(w[t+1]-w[t])})}}return c=[T,E],f},f.mode=function(e){return arguments.length?(t=e,resetCache(),f):t},f.range=function(e,t){return setColors(e),f},f.out=function(e){return w=e,f},f.spread=function(e){return arguments.length?(l=e,f):l},f.correctLightness=function(e){return null==e&&(e=!0),F=e,resetCache(),tMapLightness=F?function(e){for(var t=getColor2(0,!0).lab()[0],n=getColor2(1,!0).lab()[0],l=t>n,c=getColor2(e,!0).lab()[0],y=t+(n-t)*e,_=c-y,x=0,S=1,w=20;Math.abs(_)>.01&&w-- >0;)l&&(_*=-1),_<0?(x=e,e+=(S-e)*.5):(S=e,e+=(x-e)*.5),_=(c=getColor2(e,!0).lab()[0])-y;return e}:function(e){return e},f},f.padding=function(e){return null!=e?("number"===tK(e)&&(e=[e,e]),_=e,f):_},f.colors=function(t,n){arguments.length<2&&(n="hex");var l=[];if(0==arguments.length)l=S.slice(0);else if(1===t)l=[f(.5)];else if(t>1){var y=c[0],_=c[1]-y;l=(function(e,t,n){for(var l=[],c=e<t,y=n?c?t+1:t-1:t,_=e;c?_<y:_>y;c?_++:_--)l.push(_);return l})(0,t,!1).map(function(e){return f(y+e/(t-1)*_)})}else{e=[];var w=[];if(x&&x.length>2)for(var T=1,E=x.length,F=1<=E;F?T<E:T>E;F?T++:T--)w.push((x[T-1]+x[T])*.5);else w=c;l=w.map(function(e){return f(e)})}return chroma$k[n]&&(l=l.map(function(e){return e[n]()})),l},f.cache=function(e){return null!=e?(L=e,f):L},f.gamma=function(e){return null!=e?(j=e,f):j},f.nodata=function(e){return null!=e?(n=chroma$k(e),f):n},f},binom_row=function(e){for(var t=[1,1],n=1;n<e;n++){for(var l=[1],c=1;c<=t.length;c++)l[c]=(t[c]||0)+t[c-1];t=l}return t},bezier=function(e){var t,n,l,c,y,_,x,S,w,T,E;if(2===(e=e.map(function(e){return new Color$D(e)})).length)y=(t=e.map(function(e){return e.lab()}))[0],_=t[1],c=function(e){var t=[0,1,2].map(function(t){return y[t]+e*(_[t]-y[t])});return new Color$D(t,"lab")};else if(3===e.length)y=(n=e.map(function(e){return e.lab()}))[0],_=n[1],x=n[2],c=function(e){var t=[0,1,2].map(function(t){return(1-e)*(1-e)*y[t]+2*(1-e)*e*_[t]+e*e*x[t]});return new Color$D(t,"lab")};else if(4===e.length)y=(l=e.map(function(e){return e.lab()}))[0],_=l[1],x=l[2],S=l[3],c=function(e){var t=[0,1,2].map(function(t){return(1-e)*(1-e)*(1-e)*y[t]+3*(1-e)*(1-e)*e*_[t]+3*(1-e)*e*e*x[t]+e*e*e*S[t]});return new Color$D(t,"lab")};else if(e.length>=5)w=e.map(function(e){return e.lab()}),T=binom_row(E=e.length-1),c=function(e){var t=1-e,n=[0,1,2].map(function(n){return w.reduce(function(l,c,y){return l+T[y]*Math.pow(t,E-y)*Math.pow(e,y)*c[n]},0)});return new Color$D(n,"lab")};else throw RangeError("No point in running bezier with only one color.");return c},blend=function(e,t,n){if(!blend[n])throw Error("unknown blend mode "+n);return blend[n](e,t)},blend_f=function(e){return function(t,n){var l=chroma$k(n).rgb(),c=chroma$k(t).rgb();return chroma$k.rgb(e(l,c))}},each=function(e){return function(t,n){var l=[];return l[0]=e(t[0],n[0]),l[1]=e(t[1],n[1]),l[2]=e(t[2],n[2]),l}};blend.normal=blend_f(each(function(e){return e})),blend.multiply=blend_f(each(function(e,t){return e*t/255})),blend.screen=blend_f(each(function(e,t){return 255*(1-(1-e/255)*(1-t/255))})),blend.overlay=blend_f(each(function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))})),blend.darken=blend_f(each(function(e,t){return e>t?t:e})),blend.lighten=blend_f(each(function(e,t){return e>t?e:t})),blend.dodge=blend_f(each(function(e,t){return 255===e?255:(e=255*(t/255)/(1-e/255))>255?255:e})),blend.burn=blend_f(each(function(e,t){return 255*(1-(1-t/255)/(e/255))}));for(var tY=y.type,tQ=y.clip_rgb,tZ=y.TWOPI,tJ=Math.pow,t0=Math.sin,t1=Math.cos,t2=Math.floor,t3=Math.random,t6=Math.log,t8=Math.pow,t9=Math.floor,t7=Math.abs,analyze=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===type$p(e)&&(e=Object.values(e)),e.forEach(function(e){t&&"object"===type$p(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)}),n.domain=[n.min,n.max],n.limits=function(e,t){return limits(n,e,t)},n},limits=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==type$p(e)&&(e=analyze(e));var l=e.min,c=e.max,y=e.values.sort(function(e,t){return e-t});if(1===n)return[l,c];var _=[];if("c"===t.substr(0,1)&&(_.push(l),_.push(c)),"e"===t.substr(0,1)){_.push(l);for(var x=1;x<n;x++)_.push(l+x/n*(c-l));_.push(c)}else if("l"===t.substr(0,1)){if(l<=0)throw Error("Logarithmic scales are only possible for values > 0");var S=Math.LOG10E*t6(l),w=Math.LOG10E*t6(c);_.push(l);for(var T=1;T<n;T++)_.push(t8(10,S+T/n*(w-S)));_.push(c)}else if("q"===t.substr(0,1)){_.push(l);for(var E=1;E<n;E++){var F=(y.length-1)*E/n,D=t9(F);if(D===F)_.push(y[D]);else{var L=F-D;_.push(y[D]*(1-L)+y[D+1]*L)}}_.push(c)}else if("k"===t.substr(0,1)){var j,O=y.length,W=Array(O),$=Array(n),V=!0,X=0,Y=null;(Y=[]).push(l);for(var Z=1;Z<n;Z++)Y.push(l+Z/n*(c-l));for(Y.push(c);V;){for(var et=0;et<n;et++)$[et]=0;for(var er=0;er<O;er++)for(var en=y[er],ea=Number.MAX_VALUE,eo=void 0,es=0;es<n;es++){var el=t7(Y[es]-en);el<ea&&(ea=el,eo=es),$[eo]++,W[er]=eo}for(var eh=Array(n),eu=0;eu<n;eu++)eh[eu]=null;for(var ed=0;ed<O;ed++)null===eh[j=W[ed]]?eh[j]=y[ed]:eh[j]+=y[ed];for(var ep=0;ep<n;ep++)eh[ep]*=1/$[ep];V=!1;for(var em=0;em<n;em++)if(eh[em]!==Y[em]){V=!0;break}Y=eh,++X>200&&(V=!1)}for(var ev={},eb=0;eb<n;eb++)ev[eb]=[];for(var ey=0;ey<O;ey++)ev[j=W[ey]].push(y[ey]);for(var e_=[],ex=0;ex<n;ex++)e_.push(ev[ex][0]),e_.push(ev[ex][ev[ex].length-1]);e_=e_.sort(function(e,t){return e-t}),_.push(e_[0]);for(var eS=1;eS<e_.length;eS+=2){var ew=e_[eS];isNaN(ew)||-1!==_.indexOf(ew)||_.push(ew)}}return _},rt={analyze,limits},rr=Math.sqrt,rn=Math.pow,ri=Math.min,ra=Math.max,ro=Math.atan2,rs=Math.abs,rl=Math.cos,ru=Math.sin,rd=Math.exp,rp=Math.PI,rm={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},rv=0,rb=Object.keys(rm);rv<rb.length;rv+=1){var ry=rb[rv];rm[ry.toLowerCase()]=rm[ry]}return chroma$k.average=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var l=e.length;n||(n=Array.from(Array(l)).map(function(){return 1}));var c=l/n.reduce(function(e,t){return e+t});if(n.forEach(function(e,t){n[t]*=c}),e=e.map(function(e){return new Color$D(e)}),"lrgb"===t)return _average_lrgb(e,n);for(var y=e.shift(),_=y.get(t),x=[],S=0,w=0,T=0;T<_.length;T++)if(_[T]=(_[T]||0)*n[0],x.push(isNaN(_[T])?0:n[0]),"h"===t.charAt(T)&&!isNaN(_[T])){var E=_[T]/180*tB;S+=tH(E)*n[0],w+=tV(E)*n[0]}var F=y.alpha()*n[0];e.forEach(function(e,l){var c=e.get(t);F+=e.alpha()*n[l+1];for(var y=0;y<_.length;y++)if(!isNaN(c[y])){if(x[y]+=n[l+1],"h"===t.charAt(y)){var T=c[y]/180*tB;S+=tH(T)*n[l+1],w+=tV(T)*n[l+1]}else _[y]+=c[y]*n[l+1]}});for(var D=0;D<_.length;D++)if("h"===t.charAt(D)){for(var L=tq(w/x[D],S/x[D])/tB*180;L<0;)L+=360;for(;L>=360;)L-=360;_[D]=L}else _[D]=_[D]/x[D];return F/=l,new Color$D(_,t).alpha(F>.99999?1:F,!0)},chroma$k.bezier=function(e){var t=bezier(e);return t.scale=function(){return scale$2(t)},t},chroma$k.blend=blend,chroma$k.cubehelix=function(e,t,n,l,c){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===l&&(l=1),void 0===c&&(c=[0,1]);var y,_=0;"array"===tY(c)?y=c[1]-c[0]:(y=0,c=[c,c]);var f=function(x){var S=tZ*((e+120)/360+t*x),w=tJ(c[0]+y*x,l),T=(0!==_?n[0]+x*_:n)*w*(1-w)/2,E=t1(S),F=t0(S);return chroma$k(tQ([255*(w+T*(-.14861*E+1.78277*F)),255*(w+T*(-.29227*E-.90649*F)),255*(w+T*(1.97294*E)),1]))};return f.start=function(t){return null==t?e:(e=t,f)},f.rotations=function(e){return null==e?t:(t=e,f)},f.gamma=function(e){return null==e?l:(l=e,f)},f.hue=function(e){return null==e?n:("array"===tY(n=e)?0==(_=n[1]-n[0])&&(n=n[1]):_=0,f)},f.lightness=function(e){return null==e?c:("array"===tY(e)?(c=e,y=e[1]-e[0]):(c=[e,e],y=0),f)},f.scale=function(){return chroma$k.scale(f)},f.hue(n),f},chroma$k.mix=chroma$k.interpolate=mix$1,chroma$k.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(t2(16*t3()));return new Color$D(e,"hex")},chroma$k.scale=scale$2,chroma$k.analyze=rt.analyze,chroma$k.contrast=function(e,t){e=new Color$D(e),t=new Color$D(t);var n=e.luminance(),l=t.luminance();return n>l?(n+.05)/(l+.05):(l+.05)/(n+.05)},chroma$k.deltaE=function(e,t,n,l,c){void 0===n&&(n=1),void 0===l&&(l=1),void 0===c&&(c=1);var rad2deg=function(e){return 360*e/(2*rp)},deg2rad=function(e){return 2*rp*e/360};e=new Color$D(e),t=new Color$D(t);var y=Array.from(e.lab()),_=y[0],x=y[1],S=y[2],w=Array.from(t.lab()),T=w[0],E=w[1],F=w[2],D=(_+T)/2,L=(rr(rn(x,2)+rn(S,2))+rr(rn(E,2)+rn(F,2)))/2,j=.5*(1-rr(rn(L,7)/(rn(L,7)+rn(25,7)))),O=x*(1+j),W=E*(1+j),$=rr(rn(O,2)+rn(S,2)),V=rr(rn(W,2)+rn(F,2)),X=($+V)/2,Y=rad2deg(ro(S,O)),Z=rad2deg(ro(F,W)),et=Y>=0?Y:Y+360,er=Z>=0?Z:Z+360,en=rs(et-er)>180?(et+er+360)/2:(et+er)/2,ea=1-.17*rl(deg2rad(en-30))+.24*rl(deg2rad(2*en))+.32*rl(deg2rad(3*en+6))-.2*rl(deg2rad(4*en-63)),eo=er-et;eo=180>=rs(eo)?eo:er<=et?eo+360:eo-360,eo=2*rr($*V)*ru(deg2rad(eo)/2);var es=V-$,el=1+.015*rn(D-50,2)/rr(20+rn(D-50,2)),eh=1+.045*X,eu=1+.015*X*ea,ed=30*rd(-rn((en-275)/25,2)),ep=-(2*rr(rn(X,7)/(rn(X,7)+rn(25,7))))*ru(2*deg2rad(ed));return ra(0,ri(100,rr(rn((T-_)/(n*el),2)+rn(es/(l*eh),2)+rn(eo/(c*eu),2)+ep*(es/(l*eh))*(eo/(c*eu)))))},chroma$k.distance=function(e,t,n){void 0===n&&(n="lab"),e=new Color$D(e),t=new Color$D(t);var l=e.get(n),c=t.get(n),y=0;for(var _ in l){var x=(l[_]||0)-(c[_]||0);y+=x*x}return Math.sqrt(y)},chroma$k.limits=rt.limits,chroma$k.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(Color$D,[null].concat(e))),!0}catch{return!1}},chroma$k.scales={cool:function(){return scale$2([chroma$k.hsl(180,1,.9),chroma$k.hsl(250,.7,.4)])},hot:function(){return scale$2(["#000","#f00","#ff0","#fff"]).mode("rgb")}},chroma$k.colors=ts,chroma$k.brewer=rm,chroma$k}();var nI=nO.exports;let nz=getDefaultExportFromCjs(nI),ShortcutsWrapper=({children:e,ctx:t,...n})=>t?(0,O.jsx)(r9.Shortcuts,{...n,children:e}):(0,O.jsx)("div",{className:n.className,children:e}),getConfig=(e,t)=>{let n=t&&t.config||{},l={...e,...n},c=l.custom_theme||{};return{buttons:l.buttons||Z,labels:l.labels||[Y],labelColors:c.labels||{},labelHeatmap:c.heatmap||[],writingDir:l.writing_dir||"ltr",diffStyle:l.diff_style||"words",htmlTemplate:l.html_template,javascript:l.javascript,userConfig:l.user_config||{},hideTaskMeta:l.hide_meta||!1,showFlag:l.show_flag||!1,showWhitespace:l.show_whitespace||!1,honorTokenWhitespace:l.honor_token_whitespace??!0,hideNewlines:l.hide_newlines||l.hide_true_newline_tokens||!1,allowNewlineHighlight:l.allow_newline_highlight||!1,manualHighlight:l.ner_manual_require_click||!1,labelStyle:l.label_style||l.ner_manual_label_style||"list",highlightChars:l.ner_manual_highlight_chars??!1,showHeatmap:l.show_heatmap??!1,cardStyle:l.card_css||{},choiceStyle:l.choice_style||"single",choiceAutoAccept:l.choice_auto_accept||!1,darkenImage:l.darken_image||0,showCenter:l.show_bounding_box_center||!1,previewBoxes:l.preview_bounding_boxes||!1,shadeBoxes:l.shade_bounding_boxes||!1,clickBoxes:l.click_boxes||!1,blocks:l.blocks||[],labelKeymap:l.keymap_by_label||{},audioCursor:l.show_audio_cursor??!0,audioCursorTime:l.show_audio_cursor_time??!0,audioTimeline:l.show_audio_timeline??!1,audioMinimap:l.show_audio_minimap??!0,audioBarWidth:l.audio_bar_width??3,audioBarHeight:l.audio_bar_height??2,audioBarGap:l.audio_bar_gap??2,audioBarRadius:l.audio_bar_radius??2,audioMaxZoom:l.audio_max_zoom??5e3,audioAutoplay:l.audio_autoplay??!1,audioLoop:l.audio_loop??!1,audioRate:1,wrapRelations:l.wrap_relations??!1,showRelationsLabels:l.show_relations_labels??!0,hideRelationArrow:l.hide_relations_arrow??!1,relationsSpanLabels:l.relations_span_labels||[],imageManualLegacy:l.image_manual_legacy??!1,imageManualModes:l.image_manual_modes??et,imageManualStrokeWidth:l.image_manual_stroke_width??4,imageManualFontSize:l.image_manual_font_size??14,imageManualFromCenter:l.image_manual_from_center??!1,imageManualShowLabels:l.image_manual_show_labels??!0,imageManualSpansKey:l.image_manual_spans_key??"spans"}},findInterface=e=>"string"==typeof e?e:"reject"in e&&e.reject?"compare":"options"in e&&e.options?"choice":"image"in e&&"spans"in e&&e.image&&e.spans?"image":"label"in e&&e.label?"classification":"audio"in e&&e.audio?"audio":"arcs"in e&&e.arcs?"dep":"html"in e&&e.html?"html":"image"in e&&e.image?"image":"spans"in e&&"text"in e&&e.spans&&e.text?"ner":"text",getTextSize=(e="",t={sm:100,md:25})=>!e||e.length>t.sm?"small":e.length>t.md?"medium":"large",getColor=(e,t,n="#000")=>e.length?e[t-Math.floor(t/e.length)*e.length]:n,getHeatmapColor=(e,t,n=null)=>{if(typeof e>"u"||null===e||isNaN(e)||!t.length)return n;for(let n=0;n<t.length;n++){let l=t[n],c=1/t.length*(n+1);if(e<=c)return l}return t[t.length-1]},getEntityColor=(e,t,n,l)=>{let{labelColors:c,labelHeatmap:y,showHeatmap:_}=l;if(c[e])return c[e];if(!_)return null;let x=y.length?y:n.heatmap;return getHeatmapColor(t,x,n.bgLowlight)},getNumberKey=e=>{let{key:t,keyCode:n,shiftKey:l,altKey:c}=e,y=parseInt(String.fromCharCode(n));return l&&c&&t!==y.toString()?"0"===t?30:20+y:l&&t!==y.toString()?"0"===t?20:10+y:"0"===t?10:parseInt(t,10)},getKeys=(e,t,n)=>e&&e.shortcuts?((e.shortcuts._keymap||{})[t]||{})[n]||[]:null,getKey=(e,t,n)=>{let l=getKeys(e,t,n);return null!==l&&l.length?l[0]:""},getKeyName=(e,t,n)=>{let l=getKeys(e,t,n);return l&&l.length?l.join(", "):null},replaceWs=e=>e.replace(/\n/g," ").replace(/\t/g," "),replaceWsChar=(e,t,n=!1)=>n?e.split("").map((e,n)=>" "==e?(0,O.jsx)(t,{children:"\xb7"},n):e==`
`?(0,O.jsxs)(t,{children:[" ",(0,O.jsx)("br",{})]},n):"	"==e?(0,O.jsx)(t,{children:""},n):e):e,getRect=(e,t)=>[[e[0],e[1]],[e[0],t[1]],[t[0],t[1]],[t[0],e[1]]],roundPx=(e,t=10)=>Math.round(e*t)/t,invertObject=e=>{let t={};for(let[n,l]of Object.entries(e))t[l]=n;return t},isObject2=e=>"object"==typeof e&&null!==e,range=(e,t)=>Array.from("x".repeat(t-e),(t,n)=>e+n),insertInto=(e,t,n)=>e.length-1<=n||-1===n?[...e,t]:[...e.slice(0,n),t,...e.slice(n)],getPointerPosition=e=>e&&e.getStage().getPointerPosition(),getRelativePointerPosition=e=>{let t=e.getAbsoluteTransform().copy();t.invert();let n=getPointerPosition(e);return null===n?null:t.point(n)},checkIntersection=(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),getCenter$1=({width:e,height:t,x:n,y:l})=>[n+e/2,l+t/2],pointsToRect=([[e,t],[n,l]])=>{let c=e>n?e-n:n-e,y=t>l?t-l:l-t,_=Math.min(e,n),x=Math.min(t,l);return{width:c,height:y,x:_,y:x,center:getCenter$1({width:c,height:y,x:_,y:x})}},rectToPoints=({width:e,height:t,x:n,y:l})=>[[n,l],[n,l+t],[n+e,l+t],[n+e,l]],isRect=e=>[e.x,e.y,e.width,e.height].every(e=>"u">typeof e&&null!==e),isPointsRect=e=>{let{points:t}=e;if(!t||4!==t.length||t[0][0]!==t[1][0]||t[0][1]!==t[3][1]||t[1][1]!==t[2][1]||t[2][0]!==t[3][0])return!1;for(let t of[e.x,e.y,e.width,e.height])if(typeof t>"u"||null===t)return!0;return!1},getContrastColor=(e,t="#fff",n="#000")=>{let l=nz.contrast(e,t),c=nz.contrast(e,n);return l>c?t:n},getAlphaColor=(e,t)=>nz(e).alpha(t).css(),getSelectedElement=e=>e.nodeType==Node.TEXT_NODE?e.parentElement:e;let _LabelList=class _LabelList extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{labelList:[Y],labelIds:[v4()]}),__publicField(this,"updateLabels",e=>{let t=Array.isArray(e)?e:[Y],n=t.map(()=>v4());this.setState({labelList:t,labelIds:n})}),__publicField(this,"handleSelect",e=>this.props.handleSelect(e.target.value)),__publicField(this,"handleShortcuts",(e,t)=>{let{keymap:n}=this.props,l=invertObject(n);if("choice"===e){if(t.preventDefault(),l[t.key])this.props.handleSelect(l[t.key]);else{let e=getNumberKey(t),l=this.props.labels[e-1];l&&typeof n[l]>"u"&&this.props.handleSelect(l)}}})}componentDidMount(){this.updateLabels(this.props.labels)}componentDidUpdate(e){e.labels!==this.props.labels&&this.updateLabels(this.props.labels)}render(){let{keymap:e,selected:t,classes:n}=this.props,{labelList:l,labelIds:c}=this.state,y={name:"CARD",handler:this.handleShortcuts,targetNodeSelector:"body",global:!0};return(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,...y,children:(0,O.jsx)("div",{className:na("prodigy-labels",n.root),children:l.map((l,y)=>{let _="u">typeof e[l]?e[l]:y+1,x=na("prodigy-label",n.label,{[n.labelSelected]:t==l});return(0,O.jsxs)("span",{"data-test":l,children:[(0,O.jsx)("input",{hidden:!0,checked:t==l,type:"radio",name:"label",id:c[y],value:l,onChange:this.handleSelect}),(0,O.jsxs)("label",{className:x,htmlFor:c[y],"data-prodigy-label":l,children:[l,(0,O.jsx)("span",{className:n.key,children:_})]})]},l)})})})}};__publicField(_LabelList,"defaultProps",{labels:[Y],keymap:{}}),__publicField(_LabelList,"contextTypes",{shortcuts:eP.object});let nW=withStyles(e=>({root:{display:"flex",flexWrap:"wrap","&:focus":{outline:0}},label:{display:"block",borderRadius:4,margin:[[5,10,5,0]],padding:[[1,10]],border:[[1,"solid"]],cursor:"pointer",position:"relative"},labelSelected:{background:e.colorCardTitle,color:e.bgCardTitle},key:{fontSize:12.5,marginLeft:7}}))(_LabelList),styles$p=e=>({root:{width:"100%",background:e.bgMeta,padding:[[10,20]],display:"flex",justifyContent:"space-between",textAlign:"start","&:first-child":{borderTopLeftRadius:e.cardBorderRadius,borderTopRightRadius:e.cardBorderRadius},direction:"ltr"},button:{padding:[[3,4,1,4]],borderRadius:5,border:[[1,"solid",e.colorMeta]],marginBottom:2,background:e.bgCard,cursor:"pointer","&[disabled]":{opacity:.5,cursor:"not-allowed",color:[e.colorMeta,"!important"],background:e.bgMeta},"&:focus":{outline:0,borderStyle:"dashed"},"&:not(:last-child)":{marginRight:15}},buttonDanger:{"&:hover":{color:e.reject}},buttonActive:{background:e.bgHighlight},checkbox:{display:"inline-block",position:"relative",top:0,marginRight:14,fontSize:14,cursor:"pointer",fontWeight:"bold",whiteSpace:"nowrap"},checkboxDisabled:{opacity:.65},checkboxLabel:{marginLeft:8,userSelect:"none"}});let _Toolbar=class _Toolbar extends W.Component{render(){let{children:e,classes:t}=this.props;return(0,O.jsx)("div",{className:t.root,children:e})}};let n$=withStyles(styles$p)(_Toolbar);let _ToolbarButton=class _ToolbarButton extends W.Component{constructor(){super(...arguments),__publicField(this,"handleClick",e=>{this.props.onClick&&this.props.onClick(e),e.currentTarget.blur()})}render(){let{id:e,title:t,keyName:n,active:l,icon:c,classes:y,theme:_,size:x=22,onClick:S,...w}=this.props,T=na(y.button,{[y.buttonActive]:l,[y.buttonDanger]:"delete"===e||"reset"===e}),E=t||e,F=n?`${E} (${n})`:E;return(0,O.jsx)("button",{className:T,onClick:this.handleClick,title:F,"aria-label":F,...w,children:(0,O.jsx)(Icon,{name:e,size:x})})}};let nG=withStyles(e=>({root:{width:"100%",background:e.bgMeta,padding:[[10,20]],display:"flex",justifyContent:"space-between",textAlign:"start","&:first-child":{borderTopLeftRadius:e.cardBorderRadius,borderTopRightRadius:e.cardBorderRadius},direction:"ltr"},button:{padding:[[3,4,1,4]],borderRadius:5,border:[[1,"solid",e.colorMeta]],marginBottom:2,background:e.bgCard,cursor:"pointer","&[disabled]":{opacity:.5,cursor:"not-allowed",color:[e.colorMeta,"!important"],background:e.bgMeta},"&:focus":{outline:0,borderStyle:"dashed"},"&:not(:last-child)":{marginRight:15}},buttonDanger:{"&:hover":{color:e.reject}},buttonActive:{background:e.bgHighlight},checkbox:{display:"inline-block",position:"relative",top:0,marginRight:14,fontSize:14,cursor:"pointer",fontWeight:"bold",whiteSpace:"nowrap"},checkboxDisabled:{opacity:.65},checkboxLabel:{marginLeft:8,userSelect:"none"}}))(_ToolbarButton),nU=withStyles(e=>({_root:{},root:{fontSize:e.smallText,width:"100%",wordWrap:"break-word",whiteSpace:"pre-wrap","&:focus":{outline:0},"&:empty":{display:"none"},"& iframe, & img":{maxwidth:"100%"}},wrap:{padding:e.cardPadding,textAlign:"center",fallbacks:{padding:20}},divider:{borderTop:e.cardBorder},small:{fontSize:e.smallText},medium:{fontSize:e.mediumText},large:{fontSize:e.largeText}}))(e=>{let{children:t,nowrap:n,divider:l,textSize:c,cardStyle:y={},classes:_,className:x,theme:S,...w}=e,T=na("prodigy-content",_.root,_._root,x,{[_.wrap]:!n,[_.divider]:l,[_.small]:!n&&"small"==c,[_.medium]:!n&&"medium"==c,[_.large]:!n&&"large"==c});return(0,O.jsx)("div",{className:T,style:y,...w,children:t})}),nB=withStyles(e=>({_root:{},root:{background:e.bgCardTitle,color:e.colorCardTitle,borderTopLeftRadius:e.cardBorderRadius,borderTopRightRadius:e.cardBorderRadius,fontWeight:"bold",fontSize:20,fontFamily:e.fontSecondary,padding:[[15,20]],textAlign:"center",textTransform:"uppercase",width:"100%",boxSizing:"border-box",direction:"ltr"},hasLabels:{padding:[[8,20]]},wrapper:{width:"100%",position:"sticky",top:0,zIndex:100},[`@media(max-width: ${e.sidebarBreakpoint}px)`]:{wrapper:{top:45}}}),{injectTheme:!0})(({toolbar:e,hasLabels:t,children:n,classes:l,className:c})=>{let y=na("prodigy-title",l.root,l._root,c,{[l.hasLabels]:t});return(0,O.jsxs)("div",{className:na("prodigy-title-wrapper",l.wrapper),children:[(0,O.jsx)("div",{className:y,children:n}),e]})}),nH="u">typeof window,getMediaType=e=>{let t=e.video?"video":"audio";return{MEDIA_KEY:t,isVideo:"video"===t}},updateRegionColor=(e,t)=>{var n,l;e.setOptions({...e,color:getAlphaColor(t,.2)});let c=null==(n=e.element.querySelector('[data-resize="left"]'))?void 0:n.style;c&&(c.borderLeftColor=t,c.borderWidth="1px");let y=null==(l=e.element.querySelector('[data-resize="right"]'))?void 0:l.style;y&&(y.borderRightColor=t,y.borderWidth="1px")};let _AudioCard=class _AudioCard extends W.Component{constructor(){super(...arguments),__publicField(this,"keymap","AUDIO"),__publicField(this,"state",{selected:null,spans:[],ready:!1,loop:!1,loopRegion:!1,isVideo:!0,MEDIA_KEY:"audio",MEDIA_SPANS_KEY:"audio_spans",zoom:0}),__publicField(this,"ws",null),__publicField(this,"wsRegions",null),__publicField(this,"minimap"),__publicField(this,"timeline"),__publicField(this,"player"),__publicField(this,"video"),__publicField(this,"zoomSlider"),__publicField(this,"componentDidMount",()=>{let{theme:e,config:t,content:n,isManual:l}=this.props,{MEDIA_SPANS_KEY:c}=this.state,{MEDIA_KEY:y,isVideo:_}=getMediaType(n);this.setState({origSpans:n[c],MEDIA_KEY:y,isVideo:_,loop:t.audioLoop}),t.labels&&t.labels.length&&this.setState({label:t.labels[0]});let x=t.audioTimeline,S=t.audioMinimap,w=t.audioCursor;this.ws=$.Z.create({backend:"MediaElement",barWidth:t.audioBarWidth,barHeight:t.audioBarHeight,barGap:t.audioBarGap,barRadius:t.audioBarRadius,audioRate:t.audioRate,waveColor:e.colorText,progressColor:e.bgCardTitle,container:this.player,media:this.video||void 0}),this.ws.on("ready",()=>{var e,t;this.setState({ready:!0}),this.setupRegions(this.props.content[c]),null==(e=this.ws)||e.setTime(0),this.props.config.audioAutoplay&&(null==(t=this.ws)||t.play())}),this.ws.on("audioprocess",()=>{var e;!this.state.isPlaying&&null!=(e=this.ws)&&e.isPlaying()&&this.setState({isPlaying:!0})}),this.ws.on("play",()=>{this.setState({isPlaying:!0})}),this.ws.on("pause",()=>{this.setState({isPlaying:!1})}),this.ws.on("finish",()=>{var e;this.state.loop&&(this.setState({isPlaying:!0}),null==(e=this.ws)||e.play())}),this.ws.on("interaction",()=>{this.setState({activeRegion:null})}),this.ws.once("decode",()=>{var n,c;if(this.ws){if(this.ws.zoom(this.state.zoom),w){this.ws.registerPlugin(nC.create({labelColor:t.audioCursorTime?"white":"transparent",labelBackground:t.audioCursorTime?e.colorText:"transparent",lineColor:e.colorText}));let l=(null==(c=null==(n=this.ws)?void 0:n.getWrapper().querySelector('[part="hover-label"]'))?void 0:c.style)||{};l.position="absolute",l.top="calc(50% - 10px)"}x&&this.ws.registerPlugin(n2.create({container:this.timeline,style:{fontFamily:e.fontPrimary}})),S&&this.ws.registerPlugin(u.create({container:this.minimap,waveColor:e.bgCardQuaternary,progressColor:e.colorText,height:15,barWidth:1,barGap:1})),this.wsRegions=this.ws.registerPlugin(s.create()),this.wsRegions.on("region-clicked",(e,t)=>{t.stopPropagation(),this.setState({activeRegion:e.id}),e.play()}),this.wsRegions.on("region-out",e=>{var t;this.state.activeRegion===e.id&&(null==(t=this.ws)||t.pause(),this.setState({activeRegion:null}))}),l&&(this.wsRegions.enableDragSelection({color:getAlphaColor(e.colorText,.2)}),this.wsRegions.on("region-created",e=>{var n;null!=(n=e.id)&&n.startsWith("region-")&&(e.id=v4(),updateRegionColor(e,this.getLabelColor(t.labels,this.state.label)),this.state.label&&this.addRegionLabel(e,this.state.label,l),this.updateSpan(e.id,this.regionToSpan(e)))}),this.wsRegions.on("region-updated",e=>{this.updateSpan(e.id,this.regionToSpan(e))}))}}),this.loadMedia(n,y),nH&&(window.wavesurfer=this.ws)}),__publicField(this,"componentWillUnmount",()=>{this.ws&&this.ws.pause()}),__publicField(this,"componentDidUpdate",e=>{let{content:t}=this.props,{MEDIA_KEY:n,isVideo:l}=getMediaType(t);this.ws&&e.content&&e.content[X]!=t[X]&&(this.ws.pause(),this.setState({ready:!1,MEDIA_KEY:n,isVideo:l},()=>{this.loadMedia(t,n)}))}),__publicField(this,"handlePlayPause",()=>{this.ws&&this.ws.playPause()}),__publicField(this,"handleLoop",()=>{let{loop:e}=this.state;if(this.ws){let t=this.ws.isPlaying();e&&t&&this.ws.pause()}this.setState({loop:!e})}),__publicField(this,"handleReset",()=>{this.props.isManual&&this.setupRegions(this.state.origSpans)}),__publicField(this,"handleZoomFocus",()=>{this.zoomSlider&&this.zoomSlider.focus()}),__publicField(this,"handleZoom",({currentTarget:e})=>{if(!this.ws)return;let t=Number(e.value);this.setState({zoom:t}),this.ws.zoom(t)}),__publicField(this,"removeSpan",e=>{let{spans:t}=this.state,n=e?t.filter(t=>t.id!==e):t;this.updateSpans(n)}),__publicField(this,"updateSpans",e=>{this.setState({spans:e}),this.props.update({[this.state.MEDIA_SPANS_KEY]:e})}),__publicField(this,"updateSpan",(e,t)=>{let{spans:n}=this.state,l=n.map(e=>e.id).indexOf(e),c=n.find(t=>t.id==e)||{},y=n.filter(t=>t.id!==e),_={...c,...t},x=insertInto(y,_,l);this.updateSpans(x)}),__publicField(this,"regionToSpan",e=>({start:e.start,end:e.end,label:e.label||this.state.label,id:e.id||v4(),color:e.color})),__publicField(this,"setupRegions",(e=[])=>{if(!this.wsRegions)return;let{isManual:t,config:n}=this.props,l=t?n.labels:Array.from(new Set(e.map(e=>e.label||""))).sort();this.wsRegions.clearRegions();let c=e.map(e=>({start:e.start,end:e.end,label:e.label,id:e.id||v4(),color:e.color||this.getLabelColor(l,e.label)}));this.updateSpans(c),c.forEach(e=>{if(!this.wsRegions)return;let n=this.wsRegions.addRegion({id:e.id,drag:t,resize:t,color:e.color,start:e.start,end:e.end}),c=n.color||this.getLabelColor(l,e.label);updateRegionColor(n,c),e.label&&this.addRegionLabel(n,e.label,t)})}),__publicField(this,"addRegionLabel",(e,t,n)=>{var l;if(!nH)return;let{uiLang:c}=this.props,y=e.element,_=y.appendChild(document.createElement("span")),x=getAlphaColor(e.color,1),S=getContrastColor(e.color);_.textContent=t,_.style.display="block",_.style.padding="0 3px",_.style.position="absolute",_.style.bottom="0",_.style.left="1px",_.style.zIndex="10",_.style.fontWeight="bold",_.style.fontSize="0.7em",_.style.textTransform="uppercase",_.style.userSelect="none",_.style.color=S,_.style.background=x;let w=null==(l=y.querySelector("canvas"))?void 0:l.clientWidth,T=y.offsetLeft;if(w&&T+_.clientWidth>w&&(_.style.right="0",_.style.left="initial"),n){let t=y.appendChild(document.createElement("span"));t.textContent="\xd7",t.title=getTranslate(c)("delete_region","Delete region"),t.addEventListener("click",t=>{t.stopPropagation(),this.removeSpan(e.id),e.remove()}),t.style.position="absolute",t.style.top="3px",t.style.right="3px",t.style.display="block",t.style.fontSize="12px",t.style.fontFamily="sans-serif",t.style.fontWeight="bold",t.style.lineHeight="1.4rem",t.style.width="14px",t.style.height="14px",t.style.textAlign="center",t.style.borderRadius="50%",t.style.cursor="pointer",t.style.background=x,t.style.color=S}}),__publicField(this,"handleShortcuts",e=>{switch(e){case"playpause":this.handlePlayPause();break;case"reset":this.handleReset();break;case"loop":this.handleLoop();break;case"zoom":this.handleZoomFocus()}}),__publicField(this,"getLabelColor",(e,t)=>{let{isManual:n,theme:l}=this.props,{labelColors:c}=this.props.config;if(void 0!==t&&c[t])return c[t];let y=void 0!==t?e.indexOf(t):-1,_=-1!==y?y:n?e.length+1:0;return getColor(l.palettes.audio,_)})}loadMedia(e,t){this.ws&&t in e&&this.ws.load(e[t],e.peaks)}render(){let{isManual:e,content:t,config:n,nowrap:l,classes:c,uiLang:y,children:_}=this.props,{cardStyle:x,labelStyle:S,labels:w,audioMinimap:T}=n,{isPlaying:E,label:F,ready:D,loop:L}=this.state,j=getTranslate(y),$="dropdown"==S?nj:nW,V=(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,className:c.shortcuts,name:this.keymap,handler:this.handleShortcuts,targetNodeSelector:"body",global:!0,children:(0,O.jsxs)(n$,{children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(nG,{id:E?"pause":"play",title:E?j("audio_pause","pause"):j("audio_play","play"),onClick:this.handlePlayPause,disabled:!D,keyName:getKeyName(this.context,this.keymap,"playpause"),"data-test":E?"pause":"play"}),(0,O.jsx)(nG,{id:"loop",title:j("audio_loop","loop"),active:L,onClick:this.handleLoop,keyName:getKeyName(this.context,this.keymap,"loop"),"data-test":"loop"})]}),e&&(0,O.jsxs)("div",{children:[(0,O.jsx)(Icon,{name:"zoom",size:20}),(0,O.jsx)("input",{type:"range",min:"0",value:this.state.zoom,max:this.props.config.audioMaxZoom,step:this.props.config.audioMaxZoom/50,onInput:this.handleZoom,className:c.slider,ref:e=>{this.zoomSlider=e},"data-test":"zoom-slider"}),(0,O.jsx)(nG,{id:"reset",onClick:this.handleReset,disabled:!D,title:j("reset"),keyName:getKeyName(this.context,this.keymap,"reset"),"data-test":"reset"})]})]})}),X=na(c.player,{[c.playerLoading]:!D}),{MEDIA_KEY:Y,isVideo:Z}=getMediaType(t);return(0,O.jsxs)(W.Fragment,{children:[e?(0,O.jsx)(nB,{toolbar:V,classes:{_root:c.heading},hasLabels:!0,children:(0,O.jsx)($,{labels:w,selected:F,handleSelect:e=>this.setState({label:e}),keymap:n.labelKeymap})}):V,(0,O.jsxs)(nU,{cardStyle:x,nowrap:l,children:[Z&&Y in t&&(0,O.jsx)("video",{ref:e=>{this.video=e},src:t[Y],width:t.width||"100%",height:t.height||"auto",className:c.video,onClick:this.handlePlayPause}),(0,O.jsx)("div",{id:"player",className:X,ref:e=>{this.player=e},children:!D&&(0,O.jsx)("div",{className:c.loading,children:j("loading_audio","Loading audio...")})}),(0,O.jsx)("div",{ref:e=>{this.timeline=e}}),T&&(0,O.jsx)("div",{ref:e=>{this.minimap=e},className:na(c.minimap,{[c.hidden]:!D})})]}),_]})}};__publicField(_AudioCard,"id","audio"),__publicField(_AudioCard,"contextTypes",{shortcuts:eP.object}),__publicField(_AudioCard,"defaultProps",{isManual:!1,config:{}});let nV=withStyles(e=>({player:{fontFamily:e.fontSecondary,position:"relative",whiteSpace:"nowrap"},playerLoading:{visibility:"hidden"},heading:{display:"flex",textAlign:"start"},shortcuts:{display:"block",width:"100%",outline:0},loading:{textAlign:"center",fontSize:16,fontStyle:"italic",position:"absolute",top:0,left:0,padding:20,width:"100%"},minimap:{paddingTop:25,whiteSpace:"nowrap"},hidden:{opacity:0},slider:{margin:[[0,20,0,10]],width:100,cursor:"grab"},video:{cursor:"pointer"}}),{injectTheme:!0})(_AudioCard);let _Blocks=class _Blocks extends W.Component{render(){let{content:e,config:t,classes:n,...l}=this.props,{blocks:c=[]}=t,y=(0,O.jsx)("div",{className:n.empty,children:"No blocks available."});return(0,O.jsxs)(W.Fragment,{children:[!c.length&&y,c.map(({view_id:c,html_template:y,labels:_,...x},S)=>{let w="blocks"==c?null:s0[c];return w?(0,W.createElement)(w,{content:{...e,...x},config:{...t,htmlTemplate:y||t.htmlTemplate,labels:_||t.labels},...l,key:S}):(0,O.jsxs)("div",{className:na(n.empty,n.error),children:["Not a valid view ID: ",(0,O.jsx)("strong",{children:c}),". Available options:"," ",Object.keys(s0).filter(e=>"blocks"!=e).join(", "),"."]})})]})}};__publicField(_Blocks,"id","blocks");let nq=withStyles(e=>({empty:{width:"100%",height:100,padding:20,textAlign:"center",fontSize:16,fontStyle:"italic"},error:{border:[[3,"solid",e.reject]]}}))(_Blocks);let _Option=class _Option extends W.Component{render(){let{id:e,name:t="choice",meta:n,title:l,style:c,isSelected:y,columns:_,onClick:x,type:S,keyNum:w,showKey:T,classes:E,className:F,children:D}=this.props,L=na("prodigy-option",E.wrapper,F,{[E.wrapperSelected]:y,[E.wrapperCols]:_,[E.wrapperColsWide]:3==_}),j=na(E.checkbox,{[E.checkboxCols]:_}),W=na(E.key,{[E.keyCols]:_});return(0,O.jsxs)("div",{className:L,onClick:x,style:c,"data-prodigy-option":e,children:[(0,O.jsx)("input",{className:j,name:t,type:S,id:e,checked:y,onChange:()=>{}}),(0,O.jsx)("a",{className:E.content,title:l,children:D}),null!==n&&"u">typeof n&&!isObject2(n)&&(0,O.jsx)("span",{className:E.meta,children:n}),T&&(0,O.jsx)("span",{className:W,children:w})]})}};let nK=withStyles(e=>({wrapper:{alignItems:"center",border:e.cardBorder,borderRadius:4,cursor:"pointer",display:"flex",marginBottom:15,marginRight:10,padding:[[5,3,5,10]],position:"relative",textAlign:"start",transition:[["background","0.2s","ease"]],width:"100%","&:hover":{background:e.bgMeta}},wrapperSelected:{background:e.bgMeta},checkbox:{flex:"0 0 20px",height:20,marginRight:20,width:20,fontSize:16},content:{flex:"100%",maxWidth:"100%",textDecoration:"none"},meta:{display:"inline",marginRight:"2em",fontSize:"0.7em",opacity:.6,whiteSpace:"nowrap"},key:{background:e.bgCard,border:e.cardBorder,borderRadius:4,display:"block",fontSize:13,padding:[[1,7]],position:"absolute",right:-8,textAlign:"center",top:"23%"},"@supports (top: calc(50% - 1rem))":{key:{top:"calc(50% - 10px)"}},wrapperCols:{},wrapperColsWide:{},checkboxCols:{},keyCols:{},"@media(min-width: 52em)":{wrapperCols:{padding:5,flex:"0 1 calc(50% - 10px)",flexDirection:"column-reverse",maxWidth:"calc(50% - 10px)"},wrapperColsWide:{maxWidth:"calc(33.33% - 10px)",flex:"0 0 calc(33.33% - 20px)"},checkboxCols:{margin:[[10,0,0,0]]},keyCols:{right:10,top:-10}}}))(_Option),getColumns=e=>"image"!=findInterface(e[0])?0:"spans"in e[0]?1:e.length>=3&&e.length%3==0?3:1;let _Choice=class _Choice extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{selected:[]}),__publicField(this,"componentDidMount",()=>{this.updateTaskConfig(),this.props.content.accept&&this.setState({selected:this.props.content.accept})}),__publicField(this,"UNSAFE_componentWillReceiveProps",({content:e})=>{let{accept:t}=e;this.setState({selected:t||[]}),t||this.props.update({accept:[]})}),__publicField(this,"componentDidUpdate",e=>{let{content:t}=this.props;e.content&&e.content[X]!=t[X]&&this.updateTaskConfig()}),__publicField(this,"updateTaskConfig",()=>{let e=this.props.content.config||{},t=this.props.config.choiceStyle;this.props.update({config:{...e,choice_style:t}})}),__publicField(this,"getChoices",(e,t=[])=>{let n="single"==this.props.config.choiceStyle,l=this.props.config.choiceAutoAccept;return n?l?t.includes(e)?t:[e]:t.toString()==[e].toString()?[]:[e]:t.includes(e)?t.filter(t=>t!=e):[...new Set([...t,e])]}),__publicField(this,"updateChoice",e=>{let t=this.getChoices(e,this.state.selected);this.setState({selected:t}),this.props.update({accept:t}),this.props.config.choiceAutoAccept&&setTimeout(()=>this.props.answer("accept"),250)}),__publicField(this,"isSelected",e=>this.state.selected.includes(e)),__publicField(this,"getInputCard",e=>{let{content:t,...n}=this.props;return this.props.getInterfaceComp({...e,options:!1},n)}),__publicField(this,"handleShortcuts",(e,t)=>{let{labelKeymap:n}=this.props.config,l=invertObject(n),{options:c}=this.props.content;if("choice"===e&&(t.preventDefault(),c&&c.length)){let e=l[t.key],y=e?parseInt(e):getNumberKey(t)-1;(y<c.length&&e||typeof n[String(y)]>"u")&&this.updateChoice(c[y].id)}})}render(){let{content:e,config:t,getInterfaceComp:n,classes:l}=this.props,c=e.options||[],y=getColumns(c),_=this.getInputCard(e),x=this.props.ChoiceOption||nK,S=v4(),w={name:"CARD",handler:this.handleShortcuts,targetNodeSelector:"body",global:!0};return(0,O.jsxs)(W.Fragment,{children:[_,(0,O.jsx)("div",{className:l.root,children:(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,...w,children:(0,O.jsx)("div",{className:na("prodigy-options",l.options),children:c.map((e,l)=>{let _="multiple"==t.choiceStyle?"checkbox":"radio",w=t.labelKeymap[String(l)],T="u">typeof w,E=T?w:l+1,F=e.meta??e.score;return(0,O.jsx)(x,{id:e.id,name:S,title:e.score,style:e.style,meta:F,isSelected:this.isSelected(e.id),columns:y,onClick:()=>this.updateChoice(e.id),type:_,keyNum:E,showKey:T||c.length<=30,children:n(e,{config:t,nowrap:!0})},l)})})})})]})}};__publicField(_Choice,"id","choice"),__publicField(_Choice,"contextTypes",{shortcuts:eP.object});let nX=withStyles({root:{width:"100%","& > div":{width:"100%"}},options:{display:"flex",flexDirection:"row",flexWrap:"wrap",fontSize:"2rem",padding:[[20,20,10]],width:"100%"}})(_Choice);/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var nY=Object.prototype.toString,nQ=Array.isArray||function(e){return"[object Array]"===nY.call(e)};function isFunction(e){return"function"==typeof e}function escapeRegExp(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(e,t){return null!=e&&"object"==typeof e&&t in e}var nZ=RegExp.prototype.test,nJ=/\S/,n0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},n1=/\s*/,n5=/\s+/,n4=/\s*=/,n6=/\s*\}/,n8=/#|\^|\/|>|\{|&|=|!/;function Scanner(e){this.string=e,this.tail=e,this.pos=0}function Context$2(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function Writer(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Scanner.prototype.eos=function(){return""===this.tail},Scanner.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},Scanner.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case -1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},Context$2.prototype.push=function(e){return new Context$2(e,this)},Context$2.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var l,c,y,_,x,S=this,w=!1;S;){if(e.indexOf(".")>0)for(y=S.view,_=e.split("."),x=0;null!=y&&x<_.length;)x===_.length-1&&(w=hasProperty(y,_[x])||(l=y,c=_[x],null!=l&&"object"!=typeof l&&l.hasOwnProperty&&l.hasOwnProperty(c))),y=y[_[x++]];else y=S.view[e],w=hasProperty(S.view,e);if(w){t=y;break}S=S.parent}n[e]=t}return isFunction(t)&&(t=t.call(this.view)),t},Writer.prototype.clearCache=function(){"u">typeof this.templateCache&&this.templateCache.clear()},Writer.prototype.parse=function(e,t){var n=this.templateCache,l=e+":"+(t||n9.tags).join(":"),c="u">typeof n,y=c?n.get(l):void 0;return null==y&&(y=function(e,t){if(!e)return[];var n=!1,l=[],c=[],y=[],_=!1,x=!1,S="",w=0;function stripSpace(){if(_&&!x)for(;y.length;)delete c[y.pop()];else y=[];_=!1,x=!1}function compileTags(e){if("string"==typeof e&&(e=e.split(n5,2)),!nQ(e)||2!==e.length)throw Error("Invalid tags: "+e);T=RegExp(escapeRegExp(e[0])+"\\s*"),E=RegExp("\\s*"+escapeRegExp(e[1])),F=RegExp("\\s*"+escapeRegExp("}"+e[1]))}compileTags(t||n9.tags);for(var T,E,F,D,L,j,O,W,$,V=new Scanner(e);!V.eos();){if(D=V.pos,j=V.scanUntil(T))for(var X,Y=0,Z=j.length;Y<Z;++Y){(X=O=j.charAt(Y),nZ.call(nJ,X))?(x=!0,n=!0,S+=" "):(y.push(c.length),S+=O),c.push(["text",O,D,D+1]),D+=1,O===`
`&&(stripSpace(),S="",w=0,n=!1)}if(!V.scan(T))break;if(_=!0,L=V.scan(n8)||"name",V.scan(n1),"="===L?(j=V.scanUntil(n4),V.scan(n4),V.scanUntil(E)):"{"===L?(j=V.scanUntil(F),V.scan(n6),V.scanUntil(E),L="&"):j=V.scanUntil(E),!V.scan(E))throw Error("Unclosed tag at "+V.pos);if(W=">"==L?[L,j,D,V.pos,S,w,n]:[L,j,D,V.pos],w++,c.push(W),"#"===L||"^"===L)l.push(W);else if("/"===L){if(!($=l.pop()))throw Error('Unopened section "'+j+'" at '+D);if($[1]!==j)throw Error('Unclosed section "'+$[1]+'" at '+D)}else"name"===L||"{"===L||"&"===L?x=!0:"="===L&&compileTags(j)}if(stripSpace(),$=l.pop())throw Error('Unclosed section "'+$[1]+'" at '+V.pos);return function(e){for(var t,n=[],l=n,c=[],y=0,_=e.length;y<_;++y)switch((t=e[y])[0]){case"#":case"^":l.push(t),c.push(t),l=t[4]=[];break;case"/":c.pop()[5]=t[2],l=c.length>0?c[c.length-1][4]:n;break;default:l.push(t)}return n}(function(e){for(var t,n,l=[],c=0,y=e.length;c<y;++c)(t=e[c])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(l.push(t),n=t));return l}(c))}(e,t),c&&n.set(l,y)),y},Writer.prototype.render=function(e,t,n,l){var c=this.getConfigTags(l),y=this.parse(e,c),_=t instanceof Context$2?t:new Context$2(t,void 0);return this.renderTokens(y,_,n,e,l)},Writer.prototype.renderTokens=function(e,t,n,l,c){for(var y,_,x,S="",w=0,T=e.length;w<T;++w)x=void 0,"#"===(_=(y=e[w])[0])?x=this.renderSection(y,t,n,l,c):"^"===_?x=this.renderInverted(y,t,n,l,c):">"===_?x=this.renderPartial(y,t,n,c):"&"===_?x=this.unescapedValue(y,t):"name"===_?x=this.escapedValue(y,t,c):"text"===_&&(x=this.rawValue(y)),void 0!==x&&(S+=x);return S},Writer.prototype.renderSection=function(e,t,n,l,c){var y=this,_="",x=t.lookup(e[1]);if(x){if(nQ(x))for(var S=0,w=x.length;S<w;++S)_+=this.renderTokens(e[4],t.push(x[S]),n,l,c);else if("object"==typeof x||"string"==typeof x||"number"==typeof x)_+=this.renderTokens(e[4],t.push(x),n,l,c);else if(isFunction(x)){if("string"!=typeof l)throw Error("Cannot use higher-order sections without the original template");null!=(x=x.call(t.view,l.slice(e[3],e[5]),function(e){return y.render(e,t,n,c)}))&&(_+=x)}else _+=this.renderTokens(e[4],t,n,l,c);return _}},Writer.prototype.renderInverted=function(e,t,n,l,c){var y=t.lookup(e[1]);if(!y||nQ(y)&&0===y.length)return this.renderTokens(e[4],t,n,l,c)},Writer.prototype.indentPartial=function(e,t,n){for(var l=t.replace(/[^ \t]/g,""),c=e.split(`
`),y=0;y<c.length;y++)c[y].length&&(y>0||!n)&&(c[y]=l+c[y]);return c.join(`
`)},Writer.prototype.renderPartial=function(e,t,n,l){if(n){var c=this.getConfigTags(l),y=isFunction(n)?n(e[1]):n[e[1]];if(null!=y){var _=e[6],x=e[5],S=e[4],w=y;0==x&&S&&(w=this.indentPartial(y,S,_));var T=this.parse(w,c);return this.renderTokens(T,t,n,w,l)}}},Writer.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},Writer.prototype.escapedValue=function(e,t,n){var l=this.getConfigEscape(n)||n9.escape,c=t.lookup(e[1]);if(null!=c)return"number"==typeof c&&l===n9.escape?String(c):l(c)},Writer.prototype.rawValue=function(e){return e[1]},Writer.prototype.getConfigTags=function(e){return nQ(e)?e:e&&"object"==typeof e?e.tags:void 0},Writer.prototype.getConfigEscape=function(e){if(e&&"object"==typeof e&&!nQ(e))return e.escape};var n9={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(cache2){n7.templateCache=cache2},get templateCache(){return n7.templateCache}},n7=new Writer;n9.clearCache=function(){return n7.clearCache()},n9.parse=function(e,t){return n7.parse(e,t)},n9.render=function(e,t,n,l){if("string"!=typeof e)throw TypeError('Invalid template! Template should be a "string" but "'+(nQ(e)?"array":typeof e)+'" was given as the first argument for mustache#render(template, view, partials)');return n7.render(e,t,n,l)},n9.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return n0[e]})},n9.Scanner=Scanner,n9.Context=Context$2,n9.Writer=Writer;let getHtml=({config:e,content:t,theme:n})=>e.htmlTemplate?n9.render(e.htmlTemplate,{...t,theme:n}):t.html||"";let _Html=class _Html extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{html:null}),__publicField(this,"UNSAFE_componentWillMount",()=>{this.setState({html:getHtml(this.props)})}),__publicField(this,"UNSAFE_componentWillReceiveProps",e=>this.setState({html:getHtml(e)}))}render(){let{nowrap:e,classes:t,children:n}=this.props;return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nU,{classes:{_root:t.root},dangerouslySetInnerHTML:this.state.html?{__html:this.state.html}:void 0,nowrap:e}),n]})}};__publicField(_Html,"id","html");let it=withStyles(e=>({root:{"& a":{color:"inherit"},"& ul, & ol, & p, & h1, & h2, & h3, & h4, & h5":{marginBottom:20},"& button":{fontWeight:"bold",fontSize:20,fontFamily:e.fontSecondary,lineHeight:1,background:e.bgCardTitle,color:e.colorCardTitle,textTransform:"uppercase",display:"inline-block",borderRadius:4,padding:[[11,18,13]],whiteSpace:"normal",border:"none"},'& input[type="text"]':{font:"inherit",border:[[1,"solid"]],padding:[[4,8]]}}}),{injectTheme:!0})(_Html);let _BoundingBox=class _BoundingBox extends W.Component{constructor(){super(...arguments),__publicField(this,"findLabelPosition",e=>{let t={x:e[0][0],y:e[0][1]};if(!this.props.autoPositionLabel)return t;let n=[...e].sort((e,t)=>e[0]+e[1]-t[0]-t[1])[0];return n?{x:n[0],y:n[1]}:t})}render(){let{color:e,hidden:t,onClick:n,points:l,strokeWidth:c,fontSize:y,showCenter:_,shadeBoxes:x,closePath:S,center:w,label:T,selected:E,i:F,id:D,style:L,pathProps:j,classes:W,theme:$}=this.props,V=e||getColor($.palettes.images,F),X=this.findLabelPosition(l),Y=null===D?F:D;return(0,O.jsxs)("g",{className:W._root,style:{opacity:t?.5:1,...L},onClick:n,children:[(0,O.jsx)("path",{d:`M${l.map(e=>`${Math.max(e[0],c/2)},${Math.max(e[1],c/2)}`).join(",")}${S?"z":""}`,fill:V,fillOpacity:x?.4:E?.75:0,strokeWidth:c,stroke:V,...j}),_&&w&&(0,O.jsx)("circle",{cx:w[0],cy:w[1],r:1.5*c,fill:V,strokeWidth:c}),T&&!t&&(0,O.jsxs)("g",{onClick:n,children:[(0,O.jsx)("defs",{children:(0,O.jsxs)("filter",{x:0,y:0,width:1,height:1,id:`bg-${Y}`,children:[(0,O.jsx)("feFlood",{floodColor:V}),(0,O.jsx)("feComposite",{in:"SourceGraphic"})]})}),(0,O.jsxs)("text",{className:W.text,filter:`url(#bg-${Y})`,x:Math.max(X.x,c),y:Math.max(X.y-c,y),style:{fontSize:y},children:["\xa0",T,"\xa0"]})]}),this.props.children]})}};__publicField(_BoundingBox,"defaultProps",{hidden:!1,points:[],center:null,showCenter:!1,shadeBoxes:!1,strokeWidth:4,fontSize:16,closePath:!0,autoPositionLabel:!1,i:0,id:null});let ir=withStyles(e=>({_root:{},center:{stroke:"#000"},text:{fontWeight:"bold",fontFamily:e.fontSecondary,textTransform:"uppercase",fill:"#000",userSelect:"none"}}),{injectTheme:!0})(_BoundingBox);let _SvgImage=class _SvgImage extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{loaded:!1,width:0,height:0,image:void 0}),__publicField(this,"svg"),__publicField(this,"componentDidMount",()=>this.props.content&&this.setState({width:this.props.content.width||0,height:this.props.content.height||0,image:this.props.content.image})),__publicField(this,"componentDidUpdate",e=>{let{content:t}=this.props;t.image!=e.content.image&&this.setState({loaded:!1,width:t.width,height:t.height,image:t.image})}),__publicField(this,"handleImageLoaded",({target:e})=>{let t=this.state.width||e.width,n=this.state.height||e.height,{minBoxFontSize:l,minBoxStrokeWidth:c,minWidth:y}=this.props,_=Math.max(l,l/y*t),x=Math.max(c,c/y*t),S=Math.max(1,1/y*t);this.setState({loaded:!0,width:t,height:n,strokeWidth:x,fontSize:_,pixel:S}),this.props.onSizeUpdate&&this.props.onSizeUpdate(t,n,x,_,S)}),__publicField(this,"getSVGPoint",(e,t)=>{var n;let l=this.svg;if(!l)return{x:null,y:null};let c=l.createSVGPoint();return c.x=e,c.y=t,c.matrixTransform(null==(n=l.getScreenCTM())?void 0:n.inverse())}),__publicField(this,"handleEvent",e=>({clientX:t,clientY:n})=>{e&&e(this.getSVGPoint(t,n))})}render(){let{darkenImage:e,previewBoxes:t,shadeBoxes:n,showCenter:l,content:c,renderSpans:y,trapActive:_,children:x,style:S,classes:w}=this.props,{spans:T=[]}=c,{width:E,height:F,loaded:D,image:L,strokeWidth:j,fontSize:W}=this.state,$=`0 0 ${E} ${F}`,V=1-e,X=!c.width&&!c.height||!c.image.startsWith("data:"),Y=!D||X&&D||!X,Z=na(w.svg,{[w.darken]:V<1}),et=na(w.img,{[w.hidden]:Y}),er=na(w.trap,{[w.trapActive]:_});return(0,O.jsxs)("div",{className:w.root,onMouseMove:this.handleEvent(this.props.handleMouseMove),onDoubleClick:this.props.onDoubleClick,children:[(0,O.jsx)("div",{className:er,onMouseDown:this.handleEvent(this.props.handleClick),onMouseUp:this.handleEvent(this.props.handleClick)}),D&&(0,O.jsxs)("svg",{className:Z,preserveAspectRatio:"xMinYMin meet",viewBox:$,width:E,height:F,ref:e=>{this.svg=e},onDragStart:e=>e.preventDefault(),style:S,children:[(0,O.jsx)("image",{xlinkHref:X?D&&L:L,width:E,height:F,style:{opacity:V},onMouseDown:this.handleEvent(this.props.handleClick),onMouseUp:this.handleEvent(this.props.handleClick)}),y&&T.map((e,c)=>{let{id:y,color:_,label:x}=e,S="points"in e?e.points:void 0;if(!S){if(isRect(e))S=rectToPoints(e);else{let t=JSON.stringify(e);throw Error(`Invalid image span with no points or x/y/width/height: ${t}`)}}let w=!t&&e.hidden,T={i:c,id:y,points:S,center:"center"in e?e.center:null,shadeBoxes:n,showCenter:l,color:_,hidden:e.hidden,label:x,strokeWidth:j,fontSize:W};return!w&&(0,O.jsx)(ir,{...T},c)}),x]}),(0,O.jsx)("img",{className:et,src:L,onLoad:this.handleImageLoaded,hidden:Y})]})}};__publicField(_SvgImage,"defaultProps",{darkenImage:0,previewBoxes:!1,shadeBoxes:!1,showCenter:!1,minBoxStrokeWidth:4,minBoxFontSize:16,minWidth:650,renderSpans:!0});let ia=withStyles(e=>({root:{width:"100%",position:"relative"},trap:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1},trapActive:{zIndex:[999,"!important"]},svg:{margin:[[0,"auto"]],display:"block",maxWidth:"100%",height:"auto",background:e.bgPage},hidden:{visibility:"hidden"},darken:{background:"#000"},img:{height:"auto",maxHeight:e.imageMaxHeight,maxWidth:"100%"}}))(_SvgImage),Image$3=({content:e,config:t,nowrap:n,children:l})=>{let{darkenImage:c,previewBoxes:y,shadeBoxes:_,showCenter:x}=t;return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nU,{nowrap:n,children:(0,O.jsx)(ia,{content:e,darkenImage:c,previewBoxes:y,shadeBoxes:_,showCenter:x})}),l]})},io=withStyles(()=>({root:{opacity:.5,lineHeight:1,verticalAlign:"middle",padding:[[0,5]],fontSize:8}}))(({children:e,classes:t})=>(0,O.jsx)("span",{className:t.root,children:e})),is=withStyles(e=>({_root:{},root:{color:e.colorHighlightLabel,fontWeight:"bold",fontSize:"0.675em",fontFamily:e.fontSecondary,marginLeft:8,textTransform:"uppercase",verticalAlign:"middle"},rtl:{marginLeft:0,verticalAlign:"baseline"}}))(({children:e,writingDir:t,classes:n,className:l})=>{let c=na(n.root,n._root,l,{[n.rtl]:"rtl"==t});return(0,O.jsx)("span",{className:c,children:e})}),il=withStyles(e=>({_root:{},root:{boxDecorationBreak:"clone",color:"inherit",display:"inline",fontWeight:"bold",lineHeight:1,margin:[[0,"0.15em"]],padding:[["0.25em","0.4em"]],background:e.bgHighlight},outside:{background:e.bgLowlight},rtl:{margin:0}}),{injectTheme:!0})(e=>{let{children:t,label:n,outside:l,color:c,title:y,classes:_,className:x,theme:S,writingDir:w,style:T={},...E}=e,F=c||(n?S.labels[n]:void 0),D=na(_.root,_._root,x,{[_.outside]:l,[_.rtl]:"rtl"==w});return(0,O.jsx)("mark",{className:D,style:{background:F,...T},title:y,...E,children:t})});let _Token=class _Token extends W.Component{render(){let{tokenId:e,tokenChar:t,text:n,ws:l=!0,disabled:c=!1,hideNewlines:y=!1,allowNewlineHighlight:_=!1,honorWs:x=!1,classes:S,style:w,children:T}=this.props,E=!/\S/.test(n),F=/^[\n\s]*$/.test(n),D=na(S.token,{[S.tokenDisabled]:c||!_&&F,[S.tokenWs]:E,[S.noTrailingWs]:x&&!l}),L=(E&&n.match(/\n/g)||[]).map(e=>(0,O.jsx)("br",{},e));return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsxs)("span",{className:D,style:w,"data-prodigy-token":e,"data-prodigy-char":t,children:[replaceWs(n)," ",T]}),!y&&L]},e)}};let ih=withStyles({token:{display:"inline-block",position:"relative",margin:[[0,1]]},tokenDisabled:{opacity:.5,userSelect:"none",cursor:"not-allowed"},tokenWs:{opacity:.5,fontSize:"0.7em",padding:[[0,10]],letterSpacing:2},noTrailingWs:{whiteSpace:"normal",marginRight:-1},tokenSpacer:{display:"none"}})(_Token);let _TokenOverlap=class _TokenOverlap extends W.Component{constructor(){super(...arguments),__publicField(this,"getLineColors",(e,t)=>{let{theme:n,config:l}=this.props,{labels:c}=l,y=getEntityColor(e,t??null,n,l)||getColor(n.palettes.spans,c.indexOf(e)),_=getContrastColor(y);return[y,_]})}render(){let{tokenId:e,tokenChar:t,text:n,disabled:l,ws:c,spans:y,hovered:_,config:x,classes:S,theme:w,onSpanHover:T,onSpanHoverOut:E,handleDeletion:F,isEditable:D,style:L}=this.props,{entityLineHeight:j,tokenHeight:W}=w,$=4*j+1,{honorTokenWhitespace:V,hideNewlines:X,allowNewlineHighlight:Y}=x,Z=_?range(_.start,_.end):[],et=-1!==Z.indexOf(t),er=_?_.label:null,en=_?_.score:null,ea=y.length?Math.max(...y.map(({level:e})=>e??0)):0,[eo,es]=et&&null!==er?this.getLineColors(er,en):[void 0,void 0];return(0,O.jsxs)(ih,{tokenId:e,tokenChar:t,text:n,disabled:l,ws:c,honorWs:V,hideNewlines:X,allowNewlineHighlight:Y,style:{...L,fontWeight:y.length?"bold":"normal",height:1.5*W+ea*$},children:[et&&(0,O.jsx)("span",{className:na(S.hoverOverlay,{[S.hoverOverlayFirst]:et&&(1==Z.length||Z[0]==t),[S.hoverOverlayLast]:et&&(1==Z.length||Z[Z.length-1]==t)}),style:{background:eo,color:es}}),y.map(e=>{let{label:t,isFirst:n,isLast:l,level:c,score:y}=e,[_,x]=this.getLineColors(t,y),w=na(S.line,{[S.lineFirst]:n,[S.lineLast]:l});return(0,O.jsx)("span",{onMouseOver:()=>T(e),onMouseOut:E,onClick:()=>F(e),className:w,style:{background:_,top:W+c*$,height:j},title:null==y?void 0:y.toString(),children:n&&(0,O.jsxs)("span",{className:S.lineLabel,style:{background:_,color:x},"data-test":"span-"+t,children:[t,D&&(0,O.jsx)("span",{className:S.lineRemove,children:"\xd7"})]})},e.id)})]})}};let iu=withStyles(e=>({line:{position:"absolute",width:"calc(100% + 2px)",height:2,left:-1,top:e.tokenHeight,background:e.bgHighlight,cursor:"pointer","& *::selection":{background:["transparent","!important"]},"& *::-moz-selection":{background:["transparent","!important"]}},lineFirst:{borderTopLeftRadius:3,borderBottomLeftRadius:3},lineLast:{borderTopRightRadius:3,borderBottomRightRadius:3},lineLabel:{position:"absolute",fontSize:"0.6em",fontWeight:"bold",fontFamily:e.fontSecondary,background:e.bgHighlight,lineHeight:1,padding:[[2,3]],borderRadius:3,top:"-0.5em",whiteSpace:"nowrap",zIndex:10,"&:hover $lineRemove":{opacity:1}},lineRemove:{fontSize:"1.2em",position:"absolute",top:2,left:"-0.6em",opacity:0,color:e.colorText,transition:[["opacity","0.1s","ease"]]},hoverOverlay:{position:"absolute",top:5,left:-1,width:"100%",height:e.tokenHeight-10,pointerEvents:"none",zIndex:0,opacity:.5,mixBlendMode:"multiply"},hoverOverlayFirst:{borderTopLeftRadius:3,borderBottomLeftRadius:3},hoverOverlayLast:{borderTopRightRadius:3,borderBottomRightRadius:3}}),{injectTheme:!0})(_TokenOverlap),sortSpans=(e,t)=>null!==e.start&&null!==t.start?e.start-t.start:e.token_start-t.token_start,hasOverlap=(e,t)=>{for(let{start:n,end:l}of e)if(Math.max(n,t.start)<=Math.min(l,t.end))return!0;return!1},getCharTokens=(e=[])=>e.map(({text:e,start:t,id:n,disabled:l,ws:c=!0,style:y={}})=>{let _=[...e];return _.map((e,x)=>({id:n,start:t+x,end:t+x+e.length,text:e,disabled:l,ws:!(x<_.length-1)&&c,style:y}))}).flat().map(e=>e.ws?[e,null]:[e]).flat();let _Tokens=class _Tokens extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{hovered:null}),__publicField(this,"handleDeletion",e=>{let{handleDeletion:t}=this.props;t&&t(e),this.setState({hovered:null})}),__publicField(this,"getTokens",(e=[])=>{let t=e.filter(e=>null!=e);return this.props.highlightChars?t.map((e,t)=>{let{id:n,start:l,text:c,disabled:y,ws:_,style:x={}}=e;return(0,O.jsx)(ih,{tokenId:n,tokenChar:l,text:c,disabled:y,ws:_,style:x,honorWs:this.props.config.honorTokenWhitespace,hideNewlines:this.props.config.hideNewlines,allowNewlineHighlight:this.props.config.allowNewlineHighlight},`${n}-${l}-${t}`)}):t.map(e=>{let{text:t,id:n,start:l,disabled:c,ws:y=!0,style:_={}}=e;return(0,O.jsx)(ih,{text:t,tokenId:n,tokenChar:l,disabled:c,ws:y,honorWs:this.props.config.honorTokenWhitespace,hideNewlines:this.props.config.hideNewlines,allowNewlineHighlight:this.props.config.allowNewlineHighlight,style:_},n)})}),__publicField(this,"getEntity",(e,t,n)=>{let{classes:l,config:c,theme:y}=this.props,_=t.score,x=!!this.props.handleDeletion,S=na(l.mark,{[l.markEditable]:x}),w=e.filter(e=>null!=e);return(0,O.jsxs)(il,{classes:{_root:S},label:t.label,onClick:()=>this.handleDeletion(t),color:getEntityColor(t.label,_??null,y,c),writingDir:c.writingDir,title:null==_?void 0:_.toString(),children:[w.map((e,t)=>(0,O.jsx)(ih,{tokenId:e.id,tokenChar:e.start,text:e.text,ws:e.ws,hideNewlines:c.hideNewlines,honorWs:c.honorTokenWhitespace,style:e.style||{}},`ent-${e.id}-${t}`)),(0,O.jsxs)(is,{writingDir:c.writingDir,children:[t.label,x&&(0,O.jsx)("span",{className:l.remove,children:"\xd7"})]})]},`ent-${n}`)}),__publicField(this,"renderTokens",e=>{let{highlightChars:t}=this.props,n=e.tokens||[],l=t?getCharTokens(n):n,c=[...this.props.spans].sort(sortSpans),y=0;return[].concat(...c.map((e,n)=>{let{start:c,end:_,token_start:x,token_end:S}=e,w=t?c:x,T=t?_:S+1,E=[...this.getTokens(l.slice(y,w)),this.getEntity(l.slice(w,T),e,n)];return y=T,E})).concat(this.getTokens(l.slice(y,l.length)))}),__publicField(this,"renderOverlapping",e=>{let{hovered:t}=this.state,{highlightChars:n}=this.props,l=e.tokens||[],c=n?getCharTokens(l):l,y=[...this.props.spans].sort(sortSpans),_=Object.assign({},...c.map((e,t)=>({[t]:[]}))),x=[[]];y.forEach((e,t)=>{let l=null;for(let t=0;t<x.length;t++){let n=x[t];if(!n.length||!hasOverlap(n,e)){n.push(e),l=t;break}}null===l&&x.push([e]);let c=null===l?x.length-1:l;n?range(e.start,e.end).forEach(n=>_[n].push({id:t,isFirst:n===e.start,isLast:n===e.end,...e,level:c})):range(e.token_start,e.token_end+1).forEach(n=>_[n].push({id:t,isFirst:n===e.token_start,isLast:n===e.token_end,...e,level:c}))});let S=!!this.props.handleDeletion;return c.filter(e=>null!=e).map((e,l)=>{let{text:c,id:y,start:x,disabled:w,ws:T=!0,style:E={}}=e,F=n?_[x]:_[y];return(0,O.jsx)(iu,{tokenId:y,tokenChar:x,text:c,disabled:w,ws:T,spans:F||[],hovered:t,config:this.props.config,onSpanHover:e=>this.setState({hovered:e}),onSpanHoverOut:()=>this.setState({hovered:null}),handleDeletion:this.handleDeletion,isEditable:S,style:E},`overlap-${y}-${x}-${l}`)})})}render(){let{classes:e,config:t,content:n,className:l}=this.props,{writingDir:c,overlappingSpans:y}=t,_=!!this.props.handleDeletion,x=na(e.entities,l,{[e.editable]:_,[e.rtl]:"rtl"==c});return(0,O.jsx)("div",{className:x,children:y?this.renderOverlapping(n):this.renderTokens(n)})}};__publicField(_Tokens,"defaultProps",{spans:[],handleDeletion:null,highlightChars:!1});let id=withStyles(e=>({entities:{lineHeight:2},editable:{"& *::selection":{background:e.bgHighlight},"& *::-moz-selection":{background:e.bgHighlight}},rtl:{direction:"rtl","& $mark":{display:"inline-block",padding:[["0.35em","0.4em"]],marginLeft:2},"& $remove":{left:-7}},mark:{position:"relative"},markEditable:{cursor:"pointer","&:hover $remove":{opacity:1}},remove:{position:"absolute",top:-7,left:-7,color:e.bgCard,background:e.colorText,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"0.9em",fontFamily:"sans-serif",lineHeight:1.1,width:14,height:14,textAlign:"center",borderRadius:"50%",opacity:0,transition:[["opacity","0.1s","ease"]],userSelect:"none",zIndex:10}}))(_Tokens),getEntities=(e="",t=[],n={},l=!1)=>{let c=[...e],formatText=e=>replaceWsChar(e,io,l),y=0,_=[].concat(...t.map(({start:e,end:t,label:l,color:_},x)=>{let S=[],w=c.slice(y,e).join(""),T="O"==l;return w.length&&S.push((0,O.jsx)("span",{children:formatText(w)},x)),S.push((0,O.jsxs)(il,{outside:T,label:l,color:_||n[l],children:[formatText(c.slice(e,t).join("")),l&&!T&&(0,O.jsx)(is,{children:l})]},`ent-${x}`)),y=t,S})),x=c.slice(y,c.length).join("");return x.length&&_.push((0,O.jsx)("span",{children:formatText(x)},-1)),_},getIsSpanToken=e=>!e||e.every(e=>"token_start"in e&&"token_end"in e);let _Ner=class _Ner extends W.Component{renderString(e,t){let{classes:n}=this.props,{labelColors:l,showWhitespace:c}=t,y=getEntities(e.text||"",e.spans,l,c),_=na("prodigy-spans",n.root);return(0,O.jsx)("div",{className:_,children:y.map(e=>e)})}renderTokens(e,t){let{classes:n}=this.props,l=e.spans||[],c=na("prodigy-spans",n.root);return(0,O.jsx)(id,{content:e,spans:l,config:t,className:c})}render(){let{content:e,config:t,nowrap:n,children:l}=this.props,{cardStyle:c}=t,y=getTextSize("text"in e?e.text:"");return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nU,{cardStyle:c,textSize:y,nowrap:n,children:"tokens"in e&&e.tokens.length&&getIsSpanToken(e.spans)?this.renderTokens(e,t):this.renderString(e,t)}),l]})}};__publicField(_Ner,"id","ner");let ip=withStyles({root:{lineHeight:1.7,textAlign:"start"}})(_Ner),Spans=e=>{let{config:t,...n}=e;return(0,O.jsx)(ip,{...n,config:{...t,overlappingSpans:!0}})},im=(__publicField(x=class extends W.Component{render(){let{content:e,config:t,nowrap:n,children:l}=this.props,{text:c}=e,{cardStyle:y}=t,_=getTextSize(c);return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nU,{cardStyle:y,textSize:_,nowrap:n,children:c}),l]})}},"id","text"),x),getClassificationCard=(e={})=>"image"in e&&e.image?Image$3:"html"in e&&e.html?it:"spans"in e&&e.spans?Spans:im;let _Compare=class _Compare extends W.Component{render(){let{content:e,config:t,getInterfaceComp:n,classes:l}=this.props,{input:c,accept:y,reject:_}=e;return(0,O.jsxs)(W.Fragment,{children:[c&&n(c,{config:t}),(0,O.jsx)("div",{className:l.card,children:(0,O.jsx)("div",{className:na(l.content,l.accept),children:n(y,{config:t})})}),(0,O.jsx)("div",{className:l.card,children:(0,O.jsx)("div",{className:na(l.content,l.reject),children:n(_,{config:t})})})]})}};__publicField(_Compare,"id","compare");let iv=withStyles(e=>({content:{borderStyle:"solid",borderWidth:[[0,0,0,25]],outline:"none",width:"100%"},accept:{borderLeftColor:e.accept},reject:{borderLeftColor:e.reject},card:{borderTop:e.cardBorder,width:"100%","&:last-child $content":{borderBottomLeftRadius:e.cardBorderRadius}}}))(_Compare);let _DependenciesContent=class _DependenciesContent extends W.Component{constructor(){super(...arguments),__publicField(this,"getTokens",(e=[])=>e.map(({text:e,id:t})=>(0,O.jsxs)("span",{className:this.props.classes.token,children:[replaceWsChar(e,io,this.props.showWhitespace)," "]},t)))}render(){let{classes:e,content:t}=this.props,{tokens:n,arcs:l}=t,c=l[0],y=Math.min(c.head,c.child),_=Math.max(c.head,c.child),x=this.getTokens(n.slice(0,y)),S=this.getTokens(n.slice(_+1)),w=this.getTokens(n.slice(y+1,_));return(0,O.jsxs)(W.Fragment,{children:[x,y==_?(0,O.jsxs)(il,{className:e.mark,children:[n[y].text,(0,O.jsx)("span",{className:e.label,children:"ROOT"})]}):(0,O.jsxs)("span",{className:e.span,children:[(0,O.jsxs)(il,{className:na(e.mark,{[e.child]:c.child==y}),children:[n[y].text,c.head==y&&(0,O.jsx)("span",{className:e.label,children:c.label})]}),(0,O.jsx)("span",{className:e.spanText,children:w}),(0,O.jsxs)(il,{className:na(e.mark,{[e.child]:c.child==_}),children:[c.head==_&&(0,O.jsx)("span",{className:e.label,children:c.label}),n[_].text]})]}),S]})}};let ib=withStyles(e=>({span:{borderTop:[["0.2em","solid",e.labels.HEAD]],borderTopLeftRadius:"0.2em",borderTopRightRadius:"0.2em",margin:[[0,"0.2em"]],padding:[["0.4em",0,"0.25em"]],position:"relative"},spanText:{margin:[[0,"0.2em"]],position:"relative"},mark:{background:e.labels.HEAD,position:"relative",padding:[["0.5em","0.4em","0.25em"]],"&:first-child":{margin:0},"&:last-child":{margin:0},display:"inline-block"},child:{background:e.labels.CHILD,"&:after":{content:'""',width:0,height:0,border:[["0.4em","solid","transparent"]],borderBottomWidth:0,borderTopColor:e.labels.HEAD,position:"absolute",top:0,left:"calc(50% - 8px)"}},label:{position:"absolute",top:-11,left:0,fontWeight:"bold",fontSize:"0.7em",fontFamily:e.fontSecondary,zIndex:10,padding:[["0.1em","0.25em","0.1em"]],background:e.labels.CHILD,color:"inherit",margin:[[0,"0.25em"]],borderRadius:"0.4em",border:[["0.15em","solid",e.labels.HEAD]]},token:{display:"inline-block"}}))(_DependenciesContent);let _Dependencies=class _Dependencies extends W.Component{render(){let{content:e,config:t,nowrap:n,classes:l,children:c}=this.props,y=getTextSize(e.text);return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nU,{cardStyle:t.cardStyle,textSize:y,nowrap:n,children:(0,O.jsx)("div",{className:l.root,children:(0,O.jsx)(ib,{content:e,showWhitespace:t.showWhitespace})})}),c]})}};__publicField(_Dependencies,"id","dep");let iy=withStyles({root:{lineHeight:2.75,textAlign:"start"}})(_Dependencies);function Diff$1(){}Diff$1.prototype={diff:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=n.callback;"function"==typeof n&&(l=n,n={}),this.options=n;var c=this;function done(e){return l?(setTimeout(function(){l(void 0,e)},0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var y=(t=this.removeEmpty(this.tokenize(t))).length,_=e.length,x=1,S=y+_;n.maxEditLength&&(S=Math.min(S,n.maxEditLength));var w=[{newPos:-1,components:[]}],T=this.extractCommon(w[0],t,e,0);if(w[0].newPos+1>=y&&T+1>=_)return done([{value:this.join(t),count:t.length}]);function execEditLength(){for(var n=-1*x;n<=x;n+=2){var l=void 0,S=w[n-1],T=w[n+1],E=(T?T.newPos:0)-n;S&&(w[n-1]=void 0);var F=S&&S.newPos+1<y,D=T&&0<=E&&E<_;if(!F&&!D){w[n]=void 0;continue}if(!F||D&&S.newPos<T.newPos?(l={newPos:T.newPos,components:T.components.slice(0)},c.pushComponent(l.components,void 0,!0)):(l=S,l.newPos++,c.pushComponent(l.components,!0,void 0)),E=c.extractCommon(l,t,e,n),l.newPos+1>=y&&E+1>=_)return done(function(e,t,n,l,c){for(var y=0,_=t.length,x=0,S=0;y<_;y++){var w=t[y];if(w.removed){if(w.value=e.join(l.slice(S,S+w.count)),S+=w.count,y&&t[y-1].added){var T=t[y-1];t[y-1]=t[y],t[y]=T}}else{if(!w.added&&c){var E=n.slice(x,x+w.count);E=E.map(function(e,t){var n=l[S+t];return n.length>e.length?n:e}),w.value=e.join(E)}else w.value=e.join(n.slice(x,x+w.count));x+=w.count,w.added||(S+=w.count)}}var F=t[_-1];return _>1&&"string"==typeof F.value&&(F.added||F.removed)&&e.equals("",F.value)&&(t[_-2].value+=F.value,t.pop()),t}(c,l.components,t,e,c.useLongestToken));w[n]=l}x++}if(l)!function exec(){setTimeout(function(){if(x>S)return l();execEditLength()||exec()},0)}();else for(;x<=S;){var E=execEditLength();if(E)return E}},pushComponent:function(e,t,n){var l=e[e.length-1];l&&l.added===t&&l.removed===n?e[e.length-1]={count:l.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,l){for(var c=t.length,y=n.length,_=e.newPos,x=_-l,S=0;_+1<c&&x+1<y&&this.equals(t[_+1],n[x+1]);)_++,x++,S++;return S&&e.components.push({count:S}),e.newPos=_,x},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var i_=new Diff$1,ix=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,iS=/\S/,iw=new Diff$1;iw.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!iS.test(e)&&!iS.test(t)},iw.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&ix.test(t[n])&&ix.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var ik=new Diff$1;ik.tokenize=function(e){var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var l=0;l<n.length;l++){var c=n[l];l%2&&!this.options.newlineIsToken?t[t.length-1]+=c:(this.options.ignoreWhitespace&&(c=c.trim()),t.push(c))}return t};var iC=new Diff$1;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}iC.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},new Diff$1().tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var iP=Object.prototype.toString,iM=new Diff$1;iM.useLongestToken=!0,iM.tokenize=ik.tokenize,iM.castInput=function(e){var t=this.options,n=t.undefinedReplacement,l=t.stringifyReplacer,c=void 0===l?function(e,t){return typeof t>"u"?n:t}:l;return"string"==typeof e?e:JSON.stringify(function canonicalize(e,t,n,l,c){for(t=t||[],n=n||[],l&&(e=l(c,e)),y=0;y<t.length;y+=1)if(t[y]===e)return n[y];if("[object Array]"===iP.call(e)){for(t.push(e),_=Array(e.length),n.push(_),y=0;y<e.length;y+=1)_[y]=canonicalize(e[y],t,n,l,c);return t.pop(),n.pop(),_}if(e&&e.toJSON&&(e=e.toJSON()),"object"===_typeof(e)&&null!==e){t.push(e),_={},n.push(_);var y,_,x,S=[];for(x in e)e.hasOwnProperty(x)&&S.push(x);for(S.sort(),y=0;y<S.length;y+=1)_[x=S[y]]=canonicalize(e[x],t,n,l,x);t.pop(),n.pop()}else _=e;return _}(e,null,null,c),c,"  ")},iM.equals=function(e,t){return Diff$1.prototype.equals.call(iM,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var iT=new Diff$1;iT.tokenize=function(e){return e.slice()},iT.join=iT.removeEmpty=function(e){return e};let getDiffContent=(e,t)=>isObject2(e)&&e.text||t,getDiff=(e,t)=>{var n;let l=e.removed||getDiffContent(e.reject,""),c=e.added||getDiffContent(e.accept,"");return"chars"==t?i_.diff(l,c,void 0):"sentences"==t?iC.diff(l,c,void 0):(n=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(n,{ignoreWhitespace:!0}),iw.diff(l,c,n))};let _Diff=class _Diff extends W.Component{render(){let{content:e,config:t,nowrap:n,getInterfaceComp:l,classes:c}=this.props,{diffStyle:y}=t,_="input"in e&&e.input?e.input:"text"in e&&e.text?{text:e.text}:null;return(0,O.jsxs)(W.Fragment,{children:[_&&l(_,{config:t}),(0,O.jsx)(nU,{divider:!0,cardStyle:t.cardStyle,nowrap:n,children:getDiff(e,y).map(({added:e,removed:t,value:n},l)=>{let y=na(c.element,{[c.highlight]:e||t,[c.accept]:e,[c.reject]:t});return(0,O.jsx)("span",{className:y,children:n},l)})})]})}};__publicField(_Diff,"id","diff");let iE=withStyles(e=>({element:{boxDecorationBreak:"clone",padding:[[0,4]],lineHeight:1.35},highlight:{fontWeight:"bold",color:e.colorButton},accept:{background:e.accept},reject:{background:e.reject}}))(_Diff),Points=({points:e,handleClose:t,color:n,drawing:l})=>(0,O.jsx)(W.Fragment,{children:e.map(([c,y],_)=>{let x=0===_,S=l&&_===e.length-1;return(0,O.jsx)("circle",{cx:c,cy:y,r:5,fill:n,onClick:l&&x?t:void 0,style:S?{pointerEvents:"none"}:void 0,stroke:"transparent",strokeWidth:20},_)})}),getNewPoints=(e,t,n)=>"left"===n?e.map(([e,n])=>[e-t,n]):"right"===n?e.map(([e,n])=>[e+t,n]):"up"===n?e.map(([e,n])=>[e,n-t]):e.map(([e,n])=>[e,n+t]);let _ImageManual=class _ImageManual extends W.Component{constructor(){super(...arguments),__publicField(this,"keymap","IMAGE"),__publicField(this,"state",{label:"",mode:"rect",spans:[],origSpans:[],current:[],drawing:!1,selected:null,pixel:1}),__publicField(this,"componentDidMount",()=>{let{content:e,config:t}=this.props;this.updateBoxes(e),t.labels&&t.labels.length&&this.setState({label:t.labels[0]})}),__publicField(this,"componentDidUpdate",e=>{let{content:t}=this.props;e.content&&e.content[X]!=t[X]&&this.updateBoxes(t)}),__publicField(this,"handleSizeUpdate",(e,t,n,l,c)=>{this.props.update({width:e,height:t}),this.setState({strokeWidth:n,fontSize:l,pixel:c})}),__publicField(this,"updateBoxes",({spans:e=[]})=>{let{theme:t}=this.props;if(!e)return;let n=e.map((e,n)=>({...e,color:e.color||getColor(t.palettes.images,n),id:e.id||v4()}));this.setState({origSpans:n,spans:n,current:[],drawing:!1,selected:null})}),__publicField(this,"updateShape",(e,t)=>{let{current:n,mode:l}=this.state;if(!(null===e||null===t)){if("polygon"!=l&&n.length){if(1==n.length&&n[0][0]==e&&n[0][1]==t){this.setState({x:e,y:t});return}let l=getRect(n[0],[e,t]);this.setState({x:e,y:t,current:l,selected:null},()=>this.handleClose())}else this.setState({x:e,y:t,current:[...n,[e,t]],selected:null})}}),__publicField(this,"getCurrentPoints",()=>{let{mode:e,current:t,x:n,y:l}=this.state;return t.length&&void 0!==n&&void 0!==l?"polygon"===e?[...t,[n,l]]:getRect(t[0],[n,l]):[]}),__publicField(this,"handleClick",e=>{let{current:t,mode:n}=this.state;"rect"===n&&1==t.length&&t[0][0]==e.x&&t[0][1]==e.y||this.setState({x:null,y:null,selected:null,drawing:!0},()=>{null===e.x||null===e.y||this.updateShape(roundPx(e.x),roundPx(e.y))})}),__publicField(this,"handleMouseMove",e=>{this.setState({x:e.x,y:e.y,drawing:!0})}),__publicField(this,"handleClose",()=>{let{spans:e,label:t,current:n,mode:l}=this.state,{theme:c}=this.props;if("polygon"===l&&n.length<3||"rect"===l&&4!=n.length){this.setState({selected:null,current:[],drawing:!1});return}let y=v4(),_=getColor(c.palettes.images,e.length),x=[...e,{id:y,label:t,points:n,color:_}];this.setState({current:[],spans:x,selected:null,drawing:!1,x:null,y:null}),this.props.update({spans:x})}),__publicField(this,"handleLabelSelect",e=>{let{selected:t,spans:n}=this.state;if(this.setState({label:e}),t){let l=n.filter(e=>e.id!=t),c=n.find(e=>e.id==t);if(!c)return;let y=[...l,{...c,label:e}];this.setState({spans:y}),this.props.update({spans:y})}}),__publicField(this,"handleSelect",(e,t,n)=>{if("circle"!==n.currentTarget.tagName){let n=this.state.selected===e?null:e;this.setState({label:t,selected:n})}}),__publicField(this,"handleDelete",()=>{let{selected:e,spans:t}=this.state,n=t.filter(({id:t})=>t!=e);this.setState({selected:null,current:[],drawing:!1,spans:n}),this.props.update({spans:n})}),__publicField(this,"handleReset",()=>{let e=this.state.origSpans;this.setState({spans:e,selected:null}),this.props.update({spans:e})}),__publicField(this,"handleMove",e=>{let{selected:t,spans:n,pixel:l}=this.state;if(!t)return;let c=n.filter(e=>e.id!=t),y=n.find(e=>e.id==t);if(!y||!y.points)return;let _=[...c,{...y,points:getNewPoints(y.points,l,e)}];this.setState({spans:_}),this.props.update({spans:_})}),__publicField(this,"handleShortcuts",e=>{switch(e){case"rect":this.setState({mode:"rect"});break;case"polygon":this.setState({mode:"polygon"});break;case"reset":this.handleReset();break;case"delete":this.handleDelete();break;case"exit":this.state.drawing?this.handleDelete():this.setState({selected:null});break;case"left":this.handleMove("left");break;case"right":this.handleMove("right");break;case"up":this.handleMove("up");break;case"down":this.handleMove("down")}})}render(){let{content:e,config:t,classes:n,theme:l}=this.props,{labels:c,shadeBoxes:y,showCenter:_,labelStyle:x,darkenImage:S,clickBoxes:w}=t,{mode:T,drawing:E,selected:F,label:D,spans:L,current:j,origSpans:$,strokeWidth:V,fontSize:X}=this.state,Y="rect"===T&&E,Z=E?this.handleMouseMove:void 0,et="dropdown"==x?nj:nW,er={shadeBoxes:y,showCenter:_,strokeWidth:V,fontSize:X},en=na(n.box,{[n.boxInactive]:this.state.drawing}),ea=this.getCurrentPoints(),eo=(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,className:n.shortcuts,name:this.keymap,handler:this.handleShortcuts,targetNodeSelector:"body",global:!0,children:(0,O.jsxs)(n$,{children:[(0,O.jsx)("div",{children:["rect","polygon"].map(e=>(0,O.jsx)(nG,{id:e,active:T==e,onClick:()=>this.setState({mode:e}),keyName:getKeyName(this.context,this.keymap,e)},e))}),(0,O.jsxs)("div",{children:[(0,O.jsx)(nG,{id:"delete",onClick:this.handleDelete,disabled:!F,keyName:getKeyName(this.context,this.keymap,"delete")}),(0,O.jsx)(nG,{id:"reset",onClick:this.handleReset,disabled:!L.length&&!$.length,keyName:getKeyName(this.context,this.keymap,"reset")})]})]})});return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nB,{toolbar:eo,classes:{_root:n.heading},hasLabels:!0,children:(0,O.jsx)(et,{labels:c,selected:D,handleSelect:this.handleLabelSelect,keymap:t.labelKeymap})}),(0,O.jsx)(nU,{children:(0,O.jsxs)(ia,{content:e,darkenImage:S,handleClick:this.handleClick,handleMouseMove:Z,renderSpans:!1,trapActive:Y,onDoubleClick:"polygon"===T?this.handleClose:void 0,onSizeUpdate:this.handleSizeUpdate,style:{cursor:"crosshair"},children:[L.map((e,t)=>(0,O.jsx)(ir,{i:t,id:e.id,onClick:E?void 0:t=>this.handleSelect(e.id,e.label,t),selected:e.id==F,points:e.points||[],center:"center"in e?e.center:null,color:e.color||getColor(l.palettes.images,t),label:e.label,classes:{_root:en},style:{pointerEvents:E?"none":void 0},autoPositionLabel:!0,pathProps:w||e.id===F?void 0:{fill:"none"},...er},e.id)),!!j.length&&(0,O.jsx)(ir,{i:-1,points:ea,color:getColor(l.palettes.images,L.length),classes:{_root:na(en,n.boxCurrent)},pathProps:{style:{pointerEvents:"polygon"===T?"none":void 0}},closePath:"polygon"!==T,...er,children:"polygon"==T&&(0,O.jsx)(Points,{drawing:E,points:ea,color:getColor(l.palettes.images,L.length),handleClose:this.handleClose})},"current")]})})]})}};__publicField(_ImageManual,"id","image_manual"),__publicField(_ImageManual,"defaultProps",{minStrokeWidth:4,minFontSize:16,centerLength:10,iconSize:24,activeColor:"yellow",config:{}}),__publicField(_ImageManual,"contextTypes",{shortcuts:eP.object});let iR=withStyles({heading:{display:"flex",textAlign:"start"},shortcuts:{display:"block",width:"100%",outline:0},box:{cursor:"pointer"},boxInactive:{pointerEvents:"none"},boxCurrent:{zIndex:1e3}},{injectTheme:!0})(_ImageManual);var iF={exports:{}},iN={},iA={},iD={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;let t=Math.PI/180;e.glob="u">typeof eo?eo:"u">typeof window?window:"u">typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.2.2",isBrowser:"u">typeof window&&("[object Window]"===({}).toString.call(window)||"[object global]"===({}).toString.call(window)),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle:n=>e.Konva.angleDeg?n*t:n,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"u">typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>e.Konva.DD.isDragging,isDragReady:()=>!!e.Konva.DD.node,releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}},e._registerNode=t=>{e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)}(iD);var iL={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;let Transform=class Transform{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),n=Math.sin(e),l=this.m[0]*t+this.m[2]*n,c=this.m[1]*t+this.m[3]*n,y=-(this.m[0]*n)+this.m[2]*t,_=-(this.m[1]*n)+this.m[3]*t;return this.m[0]=l,this.m[1]=c,this.m[2]=y,this.m[3]=_,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var n=this.m[0]+this.m[2]*t,l=this.m[1]+this.m[3]*t,c=this.m[2]+this.m[0]*e,y=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=l,this.m[2]=c,this.m[3]=y,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],l=this.m[0]*e.m[2]+this.m[2]*e.m[3],c=this.m[1]*e.m[2]+this.m[3]*e.m[3],y=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],_=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=l,this.m[3]=c,this.m[4]=y,this.m[5]=_,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,l=-this.m[2]*e,c=this.m[0]*e,y=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),_=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=l,this.m[3]=c,this.m[4]=y,this.m[5]=_,this}getMatrix(){return this.m}decompose(){var t=this.m[0],n=this.m[1],l=this.m[2],c=this.m[3],y=this.m[4],_=this.m[5],x=t*c-n*l;let S={x:y,y:_,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){var w=Math.sqrt(t*t+n*n);S.rotation=n>0?Math.acos(t/w):-Math.acos(t/w),S.scaleX=w,S.scaleY=x/w,S.skewX=(t*l+n*c)/x,S.skewY=0}else if(0!=l||0!=c){var T=Math.sqrt(l*l+c*c);S.rotation=Math.PI/2-(c>0?Math.acos(-l/T):-Math.acos(l/T)),S.scaleX=x/T,S.scaleY=T,S.skewX=0,S.skewY=(t*l+n*c)/x}return S.rotation=e.Util._getRotation(S.rotation),S}};e.Transform=Transform;var t=Math.PI/180,n=180/Math.PI,l="Konva error: ",c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},y=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,_=[];let x="u">typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)};e.Util={_isElement:e=>!!(e&&1==e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){_.push(e),1===_.length&&x(function(){let e=_;_=[],e.forEach(function(e){e()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(t,n){var l=e.Util.createImageElement();l.onload=function(){n(l)},l.src=t},_rgbToHex:(e,t,n)=>(16777216+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){var t=parseInt(e=e.replace("#",""),16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e="0"+e;return"#"+e},getRGB(e){var t;return e in c?{r:(t=c[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?{r:parseInt((t=y.exec(e.replace(/ /g,"")))[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}:{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)),_namedColorToRBA(e){var t=c[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){let t,n,l;let[c,...y]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),_=Number(y[0])/360,x=Number(y[1])/100,S=Number(y[2])/100;if(0===x)return{r:Math.round(l=255*S),g:Math.round(l),b:Math.round(l),a:1};t=S<.5?S*(1+x):S+x-S*x;let w=2*S-t,T=[0,0,0];for(let e=0;e<3;e++)(n=_+-(1/3*(e-1)))<0&&n++,n>1&&n--,l=6*n<1?w+(t-w)*6*n:2*n<1?t:3*n<2?w+(t-w)*(2/3-n)*6:w,T[e]=255*l;return{r:Math.round(T[0]),g:Math.round(T[1]),b:Math.round(T[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){var t={};for(var n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*t,radToDeg:e=>e*n,_degToRad:t=>(e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)),_radToDeg:t=>(e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)),_getRotation:t=>iD.Konva.angleDeg?e.Util.radToDeg(t):t,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw Error(l+e)},error(e){console.error(l+e)},warn(e){iD.Konva.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(var n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,l,c,y){var _,x,S,w=(e-n)*(e-n)+(t-l)*(t-l);if(0==w)_=e,x=t,S=(c-n)*(c-n)+(y-l)*(y-l);else{var T=((c-e)*(n-e)+(y-t)*(l-t))/w;T<0?(_=e,x=t,S=(e-c)*(e-c)+(t-y)*(t-y)):T>1?(_=n,x=l,S=(n-c)*(n-c)+(l-y)*(l-y)):S=((_=e+T*(n-e))-c)*(_-c)+((x=t+T*(l-t))-y)*(x-y)}return[_,x,S]},_getProjectionToLine(t,n,l){var c=e.Util.cloneObject(t),y=Number.MAX_VALUE;return n.forEach(function(_,x){if(!(!l&&x===n.length-1)){var S=n[(x+1)%n.length],w=e.Util._getProjectionToSegment(_.x,_.y,S.x,S.y,t.x,t.y),T=w[0],E=w[1],F=w[2];F<y&&(c.x=T,c.y=E,y=F)}}),c},_prepareArrayForTween(t,n,l){var c,y=[],_=[];if(t.length>n.length){var x=n;n=t,t=x}for(c=0;c<t.length;c+=2)y.push({x:t[c],y:t[c+1]});for(c=0;c<n.length;c+=2)_.push({x:n[c],y:n[c+1]});var S=[];return _.forEach(function(t){var n=e.Util._getProjectionToLine(t,y,l);S.push(n.x),S.push(n.y)}),S},_prepareToStringify(t){var n;for(var l in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(l)&&t[l]&&"object"==typeof t[l]){if(n=Object.getOwnPropertyDescriptor(t,l),t[l].visitedByCircularReferenceRemoval||e.Util._isElement(t[l])){if(!n.configurable)return null;delete t[l]}else if(null===e.Util._prepareToStringify(t[l])){if(!n.configurable)return null;delete t[l]}}return delete t.visitedByCircularReferenceRemoval,t},_assign(e,t){for(var n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){iD.Konva.releaseCanvasOnDestroy&&e.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(e,t,n,l){let c=0,y=0,_=0,x=0;"number"==typeof l?c=y=_=x=Math.min(l,t/2,n/2):(c=Math.min(l[0]||0,t/2,n/2),y=Math.min(l[1]||0,t/2,n/2),x=Math.min(l[2]||0,t/2,n/2),_=Math.min(l[3]||0,t/2,n/2)),e.moveTo(c,0),e.lineTo(t-y,0),e.arc(t-y,y,y,3*Math.PI/2,0,!1),e.lineTo(t,n-x),e.arc(t-x,n-x,x,0,Math.PI/2,!1),e.lineTo(_,n),e.arc(_,n-_,_,Math.PI/2,Math.PI,!1),e.lineTo(0,c),e.arc(c,c,c,Math.PI,3*Math.PI/2,!1)}}}(iL);var ij={},iO={},iI={};function _formatValue(e){return iL.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||iL.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}Object.defineProperty(iI,"__esModule",{value:!0}),iI.getComponentValidator=iI.getBooleanValidator=iI.getNumberArrayValidator=iI.getFunctionValidator=iI.getStringOrGradientValidator=iI.getStringValidator=iI.getNumberOrAutoValidator=iI.getNumberOrArrayOfNumbersValidator=iI.getNumberValidator=iI.alphaComponent=iI.RGBComponent=void 0,iI.RGBComponent=function(e){return e>255?255:e<0?0:Math.round(e)},iI.alphaComponent=function(e){return e>1?1:e<1e-4?1e-4:e},iI.getNumberValidator=function(){if(iD.Konva.isUnminified)return function(e,t){return iL.Util._isNumber(e)||iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}},iI.getNumberOrArrayOfNumbersValidator=function(e){if(iD.Konva.isUnminified)return function(t,n){let l=iL.Util._isNumber(t),c=iL.Util._isArray(t)&&t.length==e;return l||c||iL.Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}},iI.getNumberOrAutoValidator=function(){if(iD.Konva.isUnminified)return function(e,t){var n=iL.Util._isNumber(e),l="auto"===e;return n||l||iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}},iI.getStringValidator=function(){if(iD.Konva.isUnminified)return function(e,t){return iL.Util._isString(e)||iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}},iI.getStringOrGradientValidator=function(){if(iD.Konva.isUnminified)return function(e,t){let n=iL.Util._isString(e),l="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return n||l||iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}},iI.getFunctionValidator=function(){if(iD.Konva.isUnminified)return function(e,t){return iL.Util._isFunction(e)||iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}},iI.getNumberArrayValidator=function(){if(iD.Konva.isUnminified)return function(e,t){let n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(iL.Util._isArray(e)?e.forEach(function(e){iL.Util._isNumber(e)||iL.Util.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")}):iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}},iI.getBooleanValidator=function(){if(iD.Konva.isUnminified)return function(e,t){return!0===e||!1===e||iL.Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}},iI.getComponentValidator=function(e){if(iD.Konva.isUnminified)return function(t,n){return null==t||iL.Util.isObject(t)||iL.Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}},Object.defineProperty(iO,"__esModule",{value:!0}),iO.Factory=void 0,iO.Factory={addGetterSetter(e,t,n,l,c){iO.Factory.addGetter(e,t,n),iO.Factory.addSetter(e,t,l,c),iO.Factory.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){var l="get"+iL.Util._capitalize(t);e.prototype[l]=e.prototype[l]||function(){var e=this.attrs[t];return void 0===e?n:e}},addSetter(e,t,n,l){var c="set"+iL.Util._capitalize(t);e.prototype[c]||iO.Factory.overWriteSetter(e,t,n,l)},overWriteSetter(e,t,n,l){var c="set"+iL.Util._capitalize(t);e.prototype[c]=function(e){return n&&null!=e&&(e=n.call(this,e,t)),this._setAttr(t,e),l&&l.call(this),this}},addComponentsGetterSetter(e,t,n,l,c){var y,_,x=n.length,S=iL.Util._capitalize,w="get"+S(t),T="set"+S(t);e.prototype[w]=function(){var e={};for(y=0;y<x;y++)e[_=n[y]]=this.getAttr(t+S(_));return e};var E=(0,iI.getComponentValidator)(n);e.prototype[T]=function(e){var y,_=this.attrs[t];for(y in l&&(e=l.call(this,e)),E&&E.call(this,e,t),e)e.hasOwnProperty(y)&&this._setAttr(t+S(y),e[y]);return e||n.forEach(e=>{this._setAttr(t+S(e),void 0)}),this._fireChangeEvent(t,_,e),c&&c.call(this),this},iO.Factory.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var n=iL.Util._capitalize(t),l="set"+n,c="get"+n;e.prototype[t]=function(){return arguments.length?(this[l](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(e,t,n,l){iL.Util.error("Adding deprecated "+t);var c="get"+iL.Util._capitalize(t),y=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[c]=function(){iL.Util.error(y);var e=this.attrs[t];return void 0===e?n:e},iO.Factory.addSetter(e,t,l,function(){iL.Util.error(y)}),iO.Factory.addOverloadedGetterSetter(e,t)},backCompat(e,t){iL.Util.each(t,function(t,n){var l=e.prototype[n],c="get"+iL.Util._capitalize(t),y="set"+iL.Util._capitalize(t);function deprecated(){l.apply(this,arguments),iL.Util.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[t]=deprecated,e.prototype[c]=deprecated,e.prototype[y]=deprecated})},afterSetFilter(){this._filterUpToDate=!1}};var iz={},iW={};Object.defineProperty(iW,"__esModule",{value:!0}),iW.HitContext=iW.SceneContext=iW.Context=void 0;var i$=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];let Context=class Context{constructor(e){this.canvas=e,iD.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var n,l,c,y,_=this.traceArr,x=_.length,S="";for(n=0;n<x;n++)(c=(l=_[n]).method)?(y=l.args,S+=c,e?S+="()":iL.Util._isArray(y[0])?S+="(["+y.join(",")+"])":(t&&(y=y.map(e=>"number"==typeof e?Math.floor(e):e)),S+="("+y.join(",")+")")):(S+=l.property,e||(S+="="+l.val)),S+=";";return S}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){let t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){let t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,l,c,y){this._context.arc(e,t,n,l,c,y)}arcTo(e,t,n,l,c){this._context.arcTo(e,t,n,l,c)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,l,c,y){this._context.bezierCurveTo(e,t,n,l,c,y)}clearRect(e,t,n,l){this._context.clearRect(e,t,n,l)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){var n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,l){return this._context.createLinearGradient(e,t,n,l)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,l,c,y){return this._context.createRadialGradient(e,t,n,l,c,y)}drawImage(e,t,n,l,c,y,_,x,S){var w=arguments,T=this._context;3===w.length?T.drawImage(e,t,n):5===w.length?T.drawImage(e,t,n,l,c):9===w.length&&T.drawImage(e,t,n,l,c,y,_,x,S)}ellipse(e,t,n,l,c,y,_,x){this._context.ellipse(e,t,n,l,c,y,_,x)}isPointInPath(e,t,n,l){return n?this._context.isPointInPath(n,e,t,l):this._context.isPointInPath(e,t,l)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,l){this._context.fillRect(e,t,n,l)}strokeRect(e,t,n,l){this._context.strokeRect(e,t,n,l)}fillText(e,t,n,l){l?this._context.fillText(e,t,n,l):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,l){return this._context.getImageData(e,t,n,l)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,l){this._context.rect(e,t,n,l)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,l){this._context.quadraticCurveTo(e,t,n,l)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,l,c,y){this._context.setTransform(e,t,n,l,c,y)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,l){this._context.strokeText(e,t,n,l)}transform(e,t,n,l,c,y){this._context.transform(e,t,n,l,c,y)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e,t,n=this,l=i$.length,c=this.setAttr,func=function(e){var l,c=n[e];n[e]=function(){return t=function(e){var t,n,l=[],c=e.length,y=iL.Util;for(t=0;t<c;t++)n=e[t],y._isNumber(n)?n=Math.round(1e3*n)/1e3:y._isString(n)||(n+=""),l.push(n);return l}(Array.prototype.slice.call(arguments,0)),l=c.apply(n,arguments),n._trace({method:e,args:t}),l}};for(e=0;e<l;e++)func(i$[e]);n.setAttr=function(){c.apply(n,arguments);var e=arguments[0],t=arguments[1];("shadowOffsetX"===e||"shadowOffsetY"===e||"shadowBlur"===e)&&(t/=this.canvas.getPixelRatio()),n._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){let t=e.attrs.globalCompositeOperation;t&&"source-over"!==t&&this.setAttr("globalCompositeOperation",t)}};iW.Context=Context,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(e){Object.defineProperty(Context.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})}),iW.SceneContext=class extends Context{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){let t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){let t=e.fill(),n=e.getFillPriority();if(t&&"color"===n){this._fillColor(e);return}let l=e.getFillPatternImage();if(l&&"pattern"===n){this._fillPattern(e);return}let c=e.getFillLinearGradientColorStops();if(c&&"linear-gradient"===n){this._fillLinearGradient(e);return}let y=e.getFillRadialGradientColorStops();if(y&&"radial-gradient"===n){this._fillRadialGradient(e);return}t?this._fillColor(e):l?this._fillPattern(e):c?this._fillLinearGradient(e):y&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),l=e.getStrokeLinearGradientColorStops(),c=this.createLinearGradient(t.x,t.y,n.x,n.y);if(l){for(var y=0;y<l.length;y+=2)c.addColorStop(l[y],l[y+1]);this.setAttr("strokeStyle",c)}}_stroke(e){var t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();var l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,l,c=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",y=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,_=null!==(l=e.getShadowOffset())&&void 0!==l?l:{x:0,y:0},x=e.getAbsoluteScale(),S=this.canvas.getPixelRatio(),w=x.x*S,T=x.y*S;this.setAttr("shadowColor",c),this.setAttr("shadowBlur",y*Math.min(Math.abs(w),Math.abs(T))),this.setAttr("shadowOffsetX",_.x*w),this.setAttr("shadowOffsetY",_.y*T)}},iW.HitContext=class extends Context{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let c=e.getStrokeScaleEnabled();if(!c){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),l="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",l),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),c||this.restore()}}},Object.defineProperty(iz,"__esModule",{value:!0}),iz.HitCanvas=iz.SceneCanvas=iz.Canvas=void 0;let Canvas=class Canvas{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||iD.Konva.pixelRatio||function(){if(S)return S;var e=iL.Util.createCanvasElement(),t=e.getContext("2d");return S=(iD.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),iL.Util.releaseCanvas(e),S}();this.pixelRatio=t,this._canvas=iL.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(e){return iL.Util.error("Unable to get data URL. "+e.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};iz.Canvas=Canvas,iO.Factory.addGetterSetter(Canvas,"pixelRatio",void 0,(0,iI.getNumberValidator)()),iz.SceneCanvas=class extends Canvas{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new iW.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}},iz.HitCanvas=class extends Canvas{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new iW.HitContext(this),this.setSize(e.width,e.height)}};var iG={};Object.defineProperty(iG,"__esModule",{value:!0}),iG.DD=void 0,iG.DD={get isDragging(){var iU=!1;return iG.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&(iU=!0)}),iU},justDragged:!1,get node(){var iB;return iG.DD._dragElements.forEach(e=>{iB=e.node}),iB},_dragElements:new Map,_drag(e){let t=[];iG.DD._dragElements.forEach((n,l)=>{let{node:c}=n,y=c.getStage();y.setPointersPositions(e),void 0===n.pointerId&&(n.pointerId=iL.Util._getFirstPointerId(e));let _=y._changedPointerPositions.find(e=>e.id===n.pointerId);if(_){if("dragging"!==n.dragStatus){var x=c.dragDistance();if(Math.max(Math.abs(_.x-n.startPointerPos.x),Math.abs(_.y-n.startPointerPos.y))<x||(c.startDrag({evt:e}),!c.isDragging()))return}c._setDragPosition(e,n),t.push(c)}}),t.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)})},_endDragBefore(e){let t=[];iG.DD._dragElements.forEach(n=>{let{node:l}=n,c=l.getStage();if(e&&c.setPointersPositions(e),!c._changedPointerPositions.find(e=>e.id===n.pointerId))return;("dragging"===n.dragStatus||"stopped"===n.dragStatus)&&(iG.DD.justDragged=!0,iD.Konva._mouseListenClick=!1,iD.Konva._touchListenClick=!1,iD.Konva._pointerListenClick=!1,n.dragStatus="stopped");let y=n.node.getLayer()||n.node instanceof iD.Konva.Stage&&n.node;y&&-1===t.indexOf(y)&&t.push(y)}),t.forEach(e=>{e.draw()})},_endDragAfter(e){iG.DD._dragElements.forEach((t,n)=>{"stopped"===t.dragStatus&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),"dragging"!==t.dragStatus&&iG.DD._dragElements.delete(n)})}},iD.Konva.isBrowser&&(window.addEventListener("mouseup",iG.DD._endDragBefore,!0),window.addEventListener("touchend",iG.DD._endDragBefore,!0),window.addEventListener("mousemove",iG.DD._drag),window.addEventListener("touchmove",iG.DD._drag),window.addEventListener("mouseup",iG.DD._endDragAfter,!1),window.addEventListener("touchend",iG.DD._endDragAfter,!1)),Object.defineProperty(ij,"__esModule",{value:!0}),ij.Node=void 0;var iH="absoluteOpacity",iV="allEventListeners",iq="absoluteTransform",iK="absoluteScale",iX="canvas",iY="listening",iQ="mouseenter",iZ="mouseleave",iJ="Shape",i0="stage",i1="transform",i2="visible";let i5=1,i3=class Node2{constructor(e){this._id=i5++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===i1||e===iq)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){var n=this._cache.get(e),l=e===i1||e===iq;return(void 0===n||l&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){let n=t.map(e=>e+"Change.konva").join(" ");this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(iX)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===iq&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(iX)){let{scene:e,filter:t,hit:n}=this._cache.get(iX);iL.Util.releaseCanvas(e,t,n),this._cache.delete(iX)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},n={};(void 0===t.x||void 0===t.y||void 0===t.width||void 0===t.height)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var l=Math.ceil(t.width||n.width),c=Math.ceil(t.height||n.height),y=t.pixelRatio,_=void 0===t.x?Math.floor(n.x):t.x,x=void 0===t.y?Math.floor(n.y):t.y,S=t.offset||0,w=t.drawBorder||!1,T=t.hitCanvasPixelRatio||1;if(!l||!c){iL.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}l+=2*S+1,c+=2*S+1,_-=S,x-=S;var E=new iz.SceneCanvas({pixelRatio:y,width:l,height:c}),F=new iz.SceneCanvas({pixelRatio:y,width:0,height:0,willReadFrequently:!0}),D=new iz.HitCanvas({pixelRatio:T,width:l,height:c}),L=E.getContext(),j=D.getContext();return D.isCache=!0,E.isCache=!0,this._cache.delete(iX),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(E.getContext()._context.imageSmoothingEnabled=!1,F.getContext()._context.imageSmoothingEnabled=!1),L.save(),j.save(),L.translate(-_,-x),j.translate(-_,-x),this._isUnderCache=!0,this._clearSelfAndDescendantCache(iH),this._clearSelfAndDescendantCache(iK),this.drawScene(E,this),this.drawHit(D,this),this._isUnderCache=!1,L.restore(),j.restore(),w&&(L.save(),L.beginPath(),L.rect(0,0,l,c),L.closePath(),L.setAttr("strokeStyle","red"),L.setAttr("lineWidth",5),L.stroke(),L.restore()),this._cache.set(iX,{scene:E,filter:F,hit:D,x:_,y:x}),this._requestDraw(),this}isCached(){return this._cache.has(iX)}getClientRect(e){throw Error('abstract "getClientRect" method call')}_transformedRect(e,t){var n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],l=1/0,c=1/0,y=-1/0,_=-1/0,x=this.getAbsoluteTransform(t);return n.forEach(function(e){var t=x.point(e);void 0===l&&(l=y=t.x,c=_=t.y),l=Math.min(l,t.x),c=Math.min(c,t.y),y=Math.max(y,t.x),_=Math.max(_,t.y)}),{x:l,y:c,width:y-l,height:_-c}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let t=this._getCanvasCache();e.translate(t.x,t.y);var n=this._getCachedSceneCanvas(),l=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/l,n.height/l),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e,t,n,l,c=this.filters(),y=this._getCanvasCache(),_=y.scene,x=y.filter,S=x.getContext();if(c){if(!this._filterUpToDate){var w=_.pixelRatio;x.setSize(_.width/_.pixelRatio,_.height/_.pixelRatio);try{for(e=c.length,S.clear(),S.drawImage(_._canvas,0,0,_.getWidth()/w,_.getHeight()/w),t=S.getImageData(0,0,x.getWidth(),x.getHeight()),n=0;n<e;n++){if(l=c[n],"function"!=typeof l){iL.Util.error("Filter should be type of function, but got "+typeof l+" instead. Please check correct filters");continue}l.call(this,t),S.putImageData(t,0,0)}}catch(e){iL.Util.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return x}return _}on(e,t){if(this._cache&&this._cache.delete(iV),3==arguments.length)return this._delegate.apply(this,arguments);var n,l,c,y,_=e.split(" "),x=_.length;for(n=0;n<x;n++)c=(l=_[n].split("."))[0],y=l[1]||"",this.eventListeners[c]||(this.eventListeners[c]=[]),this.eventListeners[c].push({name:y,handler:t});return this}off(e,t){var n,l,c,y,_,x=(e||"").split(" "),S=x.length;if(this._cache&&this._cache.delete(iV),!e)for(l in this.eventListeners)this._off(l);for(n=0;n<S;n++)if(y=(c=x[n].split("."))[0],_=c[1],y)this.eventListeners[y]&&this._off(y,_,t);else for(l in this.eventListeners)this._off(l,_,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){var l=this;this.on(e,function(e){for(var c=e.target.findAncestors(t,!0,l),y=0;y<c.length;y++)(e=iL.Util.cloneObject(e)).currentTarget=c[y],n.call(c[y],e)})}remove(){return this.isDragging()&&this.stopDrag(),iG.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(iq),this._clearSelfAndDescendantCache(iH),this._clearSelfAndDescendantCache(iK),this._clearSelfAndDescendantCache(i0),this._clearSelfAndDescendantCache(i2),this._clearSelfAndDescendantCache(iY)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+iL.Util._capitalize(e);return iL.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+iL.Util._capitalize(t),iL.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(iY,this._isListening)}_isListening(e){if(!this.listening())return!1;let t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(i2,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var n=this.getLayer(),l=!1;iG.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===n)&&(l=!0)});var c=!t&&!iD.Konva.hitOnDragEnabled&&l;return this.isListening()&&this.isVisible()&&!c}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e,t,n,l,c=this.getDepth(),y=this,_=0;let x=this.getStage();return"Stage"!==y.nodeType&&x&&function addChildren(x){for(e=[],t=x.length,n=0;n<t;n++)l=x[n],_++,l.nodeType!==iJ&&(e=e.concat(l.getChildren().slice())),l._id===y._id&&(n=t);e.length>0&&e[0].getDepth()<=c&&addChildren(e)}(x.getChildren()),_}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(i1),this._clearSelfAndDescendantCache(iq)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;var t=e.getPointerPosition();if(!t)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);var l=this.getAbsoluteTransform(e).getMatrix(),c=new iL.Transform,y=this.offset();return c.m=l.slice(),c.translate(y.x,y.y),c.getTranslation()}setAbsolutePosition(e){let{x:t,y:n,...l}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(i1);var c=this._getAbsoluteTransform().copy();return c.invert(),c.translate(e.x,e.y),e={x:this.attrs.x+c.getTranslation().x,y:this.attrs.y+c.getTranslation().y},this._setTransform(l),this.setPosition({x:e.x,y:e.y}),this._clearCache(i1),this._clearSelfAndDescendantCache(iq),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,n=e.y,l=this.x(),c=this.y();return void 0!==t&&(l+=t),void 0!==n&&(c+=n),this.setPosition({x:l,y:c}),this}_eachAncestorReverse(e,t){var n,l,c=[],y=this.getParent();if(!(t&&t._id===this._id)){for(c.unshift(this);y&&(!t||y._id!==t._id);)c.unshift(y),y=y.parent;for(n=c.length,l=0;l<n;l++)e(c[l])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return iL.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return iL.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return iL.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return iL.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return iL.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&iL.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(iH,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e,t,n,l,c={},y=this.getAttrs();for(e in c.attrs={},y)t=y[e],(!iL.Util.isObject(t)||iL.Util._isPlainObject(t)||iL.Util._isArray(t))&&(n="function"==typeof this[e]&&this[e],delete y[e],l=n?n.call(this):null,y[e]=t,l!==t&&(c.attrs[e]=t));return c.className=this.getClassName(),iL.Util._prepareToStringify(c)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){var l=[];t&&this._isMatch(e)&&l.push(this);for(var c=this.parent;c&&c!==n;)c._isMatch(e)&&l.push(c),c=c.parent;return l}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);var t,n,l=e.replace(/ /g,"").split(","),c=l.length;for(t=0;t<c;t++)if(n=l[t],iL.Util.isValidSelector(n)||(iL.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),iL.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),iL.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(i0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(iq,this._getAbsoluteTransform)}_getAbsoluteTransform(e){if(e)return t=new iL.Transform,this._eachAncestorReverse(function(e){var n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())},e),t;t=this._cache.get(iq)||new iL.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var t,n=this.transformsEnabled();if("all"===n)t.multiply(this.getTransform());else if("position"===n){let e=this.attrs.x||0,n=this.attrs.y||0,l=this.attrs.offsetX||0,c=this.attrs.offsetY||0;t.translate(e-l,n-c)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();let n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(i1,this._getTransform)}_getTransform(){var e,t,n=this._cache.get(i1)||new iL.Transform;n.reset();var l=this.x(),c=this.y(),y=iD.Konva.getAngle(this.rotation()),_=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,x=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,S=this.attrs.skewX||0,w=this.attrs.skewY||0,T=this.attrs.offsetX||0,E=this.attrs.offsetY||0;return(0!==l||0!==c)&&n.translate(l,c),0!==y&&n.rotate(y),(0!==S||0!==w)&&n.skew(S,w),(1!==_||1!==x)&&n.scale(_,x),(0!==T||0!==E)&&n.translate(-1*T,-1*E),n.dirty=!1,n}clone(e){var t,n,l,c,y,_=iL.Util.cloneObject(this.attrs);for(t in e)_[t]=e[t];var x=new this.constructor(_);for(t in this.eventListeners)for(l=(n=this.eventListeners[t]).length,c=0;c<l;c++)0>(y=n[c]).name.indexOf("konva")&&(x.eventListeners[t]||(x.eventListeners[t]=[]),x.eventListeners[t].push(y));return x}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),n=this.getStage(),l=void 0!==e.x?e.x:Math.floor(t.x),c=void 0!==e.y?e.y:Math.floor(t.y),y=e.pixelRatio||1,_=new iz.SceneCanvas({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:y}),x=_.getContext();return!1===e.imageSmoothingEnabled&&(x._context.imageSmoothingEnabled=!1),x.save(),(l||c)&&x.translate(-1*l,-1*c),this.drawScene(_),x.restore(),_}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){var t=(e=e||{}).mimeType||null,n=e.quality||null,l=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(l),l}toImage(e){return new Promise((t,n)=>{try{let n=null==e?void 0:e.callback;n&&delete e.callback,iL.Util._urlToImage(this.toDataURL(e),function(e){t(e),null==n||n(e)})}catch(e){n(e)}})}toBlob(e){return new Promise((t,n)=>{try{let n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob(e=>{t(e),null==n||n(e)})}catch(e){n(e)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():iD.Konva.dragDistance}_off(e,t,n){var l,c,y,_=this.eventListeners[e];for(l=0;l<_.length;l++)if(c=_[l].name,y=_[l].handler,("konva"!==c||"konva"===t)&&(!t||c===t)&&(!n||n===y)){if(_.splice(l,1),0===_.length){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){var t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;let t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){var t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return -1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){var n=this["set"+iL.Util._capitalize(e)];return iL.Util._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(iD.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){var n=this.attrs[e];(n!==t||iL.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){var l;void 0!==n&&((l=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,l,n))}_fireAndBubble(e,t,n){if(t&&this.nodeType===iJ&&(t.target=this),!((e===iQ||e===iZ)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(e,t);var l=(e===iQ||e===iZ)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!l&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,l;let c=null!==(t=this._cache.get(iV))&&void 0!==t?t:{},y=null==c?void 0:c[e];if(void 0===y){y=[];let t=Object.getPrototypeOf(this);for(;t;){let c=null!==(l=null===(n=t.eventListeners)||void 0===n?void 0:n[e])&&void 0!==l?l:[];y.push(...c),t=Object.getPrototypeOf(t)}c[e]=y,this._cache.set(iV,c)}return y}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;let n=this._getProtoListeners(e);if(n)for(var l=0;l<n.length;l++)n[l].handler.call(this,t);let c=this.eventListeners[e];if(c)for(var l=0;l<c.length;l++)c[l].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,n=this.getStage(),l=this.getAbsolutePosition();if(n){var c=n._getPointerById(t)||n._changedPointerPositions[0]||l;iG.DD._dragElements.set(this._id,{node:this,startPointerPos:c,offset:{x:c.x-l.x,y:c.y-l.y},dragStatus:"ready",pointerId:t})}}startDrag(e,t=!0){iG.DD._dragElements.has(this._id)||this._createDragElement(e);let n=iG.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){let n=this.getStage()._getPointerById(t.pointerId);if(n){var l={x:n.x-t.offset.x,y:n.y-t.offset.y},c=this.dragBoundFunc();if(void 0!==c){let t=c.call(this,l,e);t?l=t:iL.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===l.x&&this._lastPos.y===l.y||(this.setAbsolutePosition(l),this._requestDraw()),this._lastPos=l}}stopDrag(e){let t=iG.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),iG.DD._endDragBefore(e),iG.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=iG.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if((!(void 0!==e.evt.button)||iD.Konva.dragButtons.indexOf(e.evt.button)>=0)&&!this.isDragging()){var t=!1;iG.DD._dragElements.forEach(e=>{this.isAncestorOf(e.node)&&(t=!0)}),t||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let e=iG.DD._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,n=e&&"ready"===e.dragStatus;t?this.stopDrag():n&&iG.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){let t=this.getStage();if(!t)return!1;let n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return iL.Util.haveIntersection(n,this.getClientRect())}static create(e,t){return iL.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var n,l,c,y=Node2.prototype.getClassName.call(e),_=e.children;t&&(e.attrs.container=t),iD.Konva[y]||(iL.Util.warn('Can not find a node with class name "'+y+'". Fallback to "Shape".'),y="Shape");let x=iD.Konva[y];if(n=new x(e.attrs),_)for(l=_.length,c=0;c<l;c++)n.add(Node2._createNode(_[c]));return n}};ij.Node=i3,i3.prototype.nodeType="Node",i3.prototype._attrsAffectingSize=[],i3.prototype.eventListeners={},i3.prototype.on.call(i3.prototype,"xChange.konva yChange.konva scaleXChange.konva scaleYChange.konva skewXChange.konva skewYChange.konva rotationChange.konva offsetXChange.konva offsetYChange.konva transformsEnabledChange.konva",function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(i1),this._clearSelfAndDescendantCache(iq)}),i3.prototype.on.call(i3.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(i2)}),i3.prototype.on.call(i3.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(iY)}),i3.prototype.on.call(i3.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(iH)});let i6=iO.Factory.addGetterSetter;i6(i3,"zIndex"),i6(i3,"absolutePosition"),i6(i3,"position"),i6(i3,"x",0,(0,iI.getNumberValidator)()),i6(i3,"y",0,(0,iI.getNumberValidator)()),i6(i3,"globalCompositeOperation","source-over",(0,iI.getStringValidator)()),i6(i3,"opacity",1,(0,iI.getNumberValidator)()),i6(i3,"name","",(0,iI.getStringValidator)()),i6(i3,"id","",(0,iI.getStringValidator)()),i6(i3,"rotation",0,(0,iI.getNumberValidator)()),iO.Factory.addComponentsGetterSetter(i3,"scale",["x","y"]),i6(i3,"scaleX",1,(0,iI.getNumberValidator)()),i6(i3,"scaleY",1,(0,iI.getNumberValidator)()),iO.Factory.addComponentsGetterSetter(i3,"skew",["x","y"]),i6(i3,"skewX",0,(0,iI.getNumberValidator)()),i6(i3,"skewY",0,(0,iI.getNumberValidator)()),iO.Factory.addComponentsGetterSetter(i3,"offset",["x","y"]),i6(i3,"offsetX",0,(0,iI.getNumberValidator)()),i6(i3,"offsetY",0,(0,iI.getNumberValidator)()),i6(i3,"dragDistance",null,(0,iI.getNumberValidator)()),i6(i3,"width",0,(0,iI.getNumberValidator)()),i6(i3,"height",0,(0,iI.getNumberValidator)()),i6(i3,"listening",!0,(0,iI.getBooleanValidator)()),i6(i3,"preventDefault",!0,(0,iI.getBooleanValidator)()),i6(i3,"filters",null,function(e){return this._filterUpToDate=!1,e}),i6(i3,"visible",!0,(0,iI.getBooleanValidator)()),i6(i3,"transformsEnabled","all",(0,iI.getStringValidator)()),i6(i3,"size"),i6(i3,"dragBoundFunc"),i6(i3,"draggable",!1,(0,iI.getBooleanValidator)()),iO.Factory.backCompat(i3,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var i8={};Object.defineProperty(i8,"__esModule",{value:!0}),i8.Container=void 0;let i9=ij;let Container=class Container extends i9.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];let t=this.children||[];var n=[];return t.forEach(function(t){e(t)&&n.push(t)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(var t=0;t<e.length;t++)this.add(e[t]);return this}let n=e[0];return n.getParent()?n.moveTo(this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw()),this}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var n=[];return this._descendants(l=>{let c=l._isMatch(e);return c&&n.push(l),!!(c&&t)}),n}_descendants(e){let t=this.getChildren();for(let n of t)if(e(n)||n.hasChildren()&&n._descendants(e))return!0;return!1}toObject(){var e=i9.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=i9.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){t.add(e.clone())}),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t){var n=this.getLayer(),l=e||n&&n.getCanvas(),c=l&&l.getContext(),y=this._getCanvasCache(),_=y&&y.scene,x=l&&l.isCache;if(!this.isVisible()&&!x)return this;if(_){c.save();var S=this.getAbsoluteTransform(t).getMatrix();c.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var n=this.getLayer(),l=e||n&&n.hitCanvas,c=l&&l.getContext(),y=this._getCanvasCache();if(y&&y.hit){c.save();var _=this.getAbsoluteTransform(t).getMatrix();c.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(c),c.restore()}else this._drawChildren("drawHit",l,t);return this}_drawChildren(e,t,n){var l,c=t&&t.getContext(),y=this.clipWidth(),_=this.clipHeight(),x=this.clipFunc(),S=y&&_||x;let w=n===this;if(S){let e;c.save();var T=this.getAbsoluteTransform(n),E=T.getMatrix();if(c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),c.beginPath(),x)e=x.call(this,c,this);else{var F=this.clipX(),D=this.clipY();c.rect(F,D,y,_)}c.clip.apply(c,e),E=T.copy().invert().getMatrix(),c.transform(E[0],E[1],E[2],E[3],E[4],E[5])}var L=!w&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;L&&(c.save(),c._applyGlobalCompositeOperation(this)),null===(l=this.children)||void 0===l||l.forEach(function(l){l[e](t,n)}),L&&c.restore(),S&&c.restore()}getClientRect(e={}){var t,n,l,c,y,_=e.skipTransform,x=e.relativeTo,S={x:1/0,y:1/0,width:0,height:0},w=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(t.visible()){var _=t.getClientRect({relativeTo:w,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===_.width&&0===_.height||(void 0===n?(n=_.x,l=_.y,c=_.x+_.width,y=_.y+_.height):(n=Math.min(n,_.x),l=Math.min(l,_.y),c=Math.max(c,_.x+_.width),y=Math.max(y,_.y+_.height)))}});for(var T=this.find("Shape"),E=!1,F=0;F<T.length;F++)if(T[F]._isVisible(this)){E=!0;break}return S=E&&void 0!==n?{x:n,y:l,width:c-n,height:y-l}:{x:0,y:0,width:0,height:0},_?S:this._transformedRect(S,x)}};i8.Container=Container,iO.Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]),iO.Factory.addGetterSetter(Container,"clipX",void 0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Container,"clipY",void 0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Container,"clipWidth",void 0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Container,"clipHeight",void 0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Container,"clipFunc");var i7={},at={};Object.defineProperty(at,"__esModule",{value:!0}),at.releaseCapture=at.setPointerCapture=at.hasPointerCapture=at.createEvent=at.getCapturedShape=void 0;let ar=new Map,an=void 0!==iD.Konva._global.PointerEvent;function createEvent(e){return{evt:e,pointerId:e.pointerId}}function releaseCapture(e,t){let n=ar.get(e);if(!n)return;let l=n.getStage();l&&l.content,ar.delete(e),an&&n._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}at.getCapturedShape=function(e){return ar.get(e)},at.createEvent=createEvent,at.hasPointerCapture=function(e,t){return ar.get(e)===t},at.setPointerCapture=function(e,t){releaseCapture(e),t.getStage()&&(ar.set(e,t),an&&t._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))},at.releaseCapture=releaseCapture,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;let t=i8;var n="mouseleave",l="mouseover",c="mouseenter",y="mousemove",_="mousedown",x="mouseup",S="pointermove",w="pointerdown",T="pointerup",E="pointercancel",F="pointerout",D="pointerleave",L="pointerover",j="pointerenter",O="contextmenu",W="touchstart",$="touchend",V="touchmove",X="touchcancel",Y="wheel",Z=[[c,"_pointerenter"],[_,"_pointerdown"],[y,"_pointermove"],[x,"_pointerup"],[n,"_pointerleave"],[W,"_pointerdown"],[V,"_pointermove"],[$,"_pointerup"],[X,"_pointercancel"],[l,"_pointerover"],[Y,"_wheel"],[O,"_contextmenu"],[w,"_pointerdown"],[S,"_pointermove"],[T,"_pointerup"],[E,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];let et={mouse:{[F]:"mouseout",[D]:n,[L]:l,[j]:c,[S]:y,[w]:_,[T]:x,[E]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[F]:"touchout",[D]:"touchleave",[L]:"touchover",[j]:"touchenter",[S]:V,[w]:W,[T]:$,[E]:X,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[F]:F,[D]:D,[L]:L,[j]:j,[S]:S,[w]:w,[T]:T,[E]:E,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",getEventsMap=e=>{let t=getEventType(e);return"pointer"===t?iD.Konva.pointerEventsEnabled&&et.pointer:"touch"===t?et.touch:"mouse"===t?et.mouse:void 0};function checkNoClip(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&iL.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}e.stages=[];let Stage2=class Stage2 extends t.Container{constructor(t){super(checkNoClip(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(e){let t="Layer"===e.getType(),n="FastLayer"===e.getType();t||n||iL.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){if("."===e.charAt(0)){var t,n=e.slice(1);e=document.getElementsByClassName(n)[0]}else t="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e,t=this.children,n=t.length;for(e=0;e<n;e++)t[e].clear();return this}clone(e){return e||(e={}),e.container="u">typeof document&&document.createElement("div"),t.Container.prototype.clone.call(this,e)}destroy(){super.destroy();var t=this.content;t&&iL.Util._isInDocument(t)&&this.container().removeChild(t);var n=e.stages.indexOf(this);return n>-1&&e.stages.splice(n,1),iL.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(iL.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new iz.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,l=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),l.forEach(function(t){if(t.isVisible()){var l=t._toKonvaCanvas(e);n.drawImage(l._canvas,e.x,e.y,l.getWidth()/l.getPixelRatio(),l.getHeight()/l.getPixelRatio())}}),t}getIntersection(e){if(!e)return null;var t,n=this.children;for(t=n.length-1;t>=0;t--){let l=n[t].getIntersection(e);if(l)return l}return null}_resizeDOM(){var e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(n=>{n.setSize({width:e,height:t}),n.draw()})}add(e,...t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(e);var l=this.children.length;return l>5&&iL.Util.warn("The stage has "+l+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),iD.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return at.hasPointerCapture(e,this)}setPointerCapture(e){at.setPointerCapture(e,this)}releaseCapture(e){at.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){iD.Konva.isBrowser&&Z.forEach(([e,t])=>{this.content.addEventListener(e,e=>{this[t](e)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let t=getEventsMap(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let t=getEventsMap(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){let t=getEventsMap(e.type),n=getEventType(e.type);if(t){this.setPointersPositions(e);var l=this._getTargetShape(n),c=!iG.DD.isDragging||iD.Konva.hitOnDragEnabled;l&&c?(l._fireAndBubble(t.pointerout,{evt:e}),l._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):c&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(e){let t=getEventsMap(e.type),n=getEventType(e.type);if(t){this.setPointersPositions(e);var l=!1;this._changedPointerPositions.forEach(c=>{var y=this.getIntersection(c);if(iG.DD.justDragged=!1,iD.Konva["_"+n+"ListenClick"]=!0,!y||!y.isListening())return;iD.Konva.capturePointerEventsEnabled&&y.setPointerCapture(c.id),this[n+"ClickStartShape"]=y,y._fireAndBubble(t.pointerdown,{evt:e,pointerId:c.id}),l=!0;let _=e.type.indexOf("touch")>=0;y.preventDefault()&&e.cancelable&&_&&e.preventDefault()}),l||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){let t=getEventsMap(e.type),n=getEventType(e.type);if(!t||(iG.DD.isDragging&&iG.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!iG.DD.isDragging||iD.Konva.hitOnDragEnabled)))return;var l={};let c=!1;var y=this._getTargetShape(n);this._changedPointerPositions.forEach(_=>{let x=at.getCapturedShape(_.id)||this.getIntersection(_),S=_.id,w={evt:e,pointerId:S};var T=y!==x;if(T&&y&&(y._fireAndBubble(t.pointerout,{...w},x),y._fireAndBubble(t.pointerleave,{...w},x)),x){if(l[x._id])return;l[x._id]=!0}x&&x.isListening()?(c=!0,T&&(x._fireAndBubble(t.pointerover,{...w},y),x._fireAndBubble(t.pointerenter,{...w},y),this[n+"targetShape"]=x),x._fireAndBubble(t.pointermove,{...w})):y&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:S}),this[n+"targetShape"]=null)}),c||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let t=getEventsMap(e.type),n=getEventType(e.type);if(!t)return;this.setPointersPositions(e);let l=this[n+"ClickStartShape"],c=this[n+"ClickEndShape"];var y={};let _=!1;this._changedPointerPositions.forEach(x=>{let S=at.getCapturedShape(x.id)||this.getIntersection(x);if(S){if(S.releaseCapture(x.id),y[S._id])return;y[S._id]=!0}let w=x.id,T={evt:e,pointerId:w},E=!1;iD.Konva["_"+n+"InDblClickWindow"]?(E=!0,clearTimeout(this[n+"DblTimeout"])):iG.DD.justDragged||(iD.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){iD.Konva["_"+n+"InDblClickWindow"]=!1},iD.Konva.dblClickWindow),S&&S.isListening()?(_=!0,this[n+"ClickEndShape"]=S,S._fireAndBubble(t.pointerup,{...T}),iD.Konva["_"+n+"ListenClick"]&&l&&l===S&&(S._fireAndBubble(t.pointerclick,{...T}),E&&c&&c===S&&S._fireAndBubble(t.pointerdblclick,{...T}))):(this[n+"ClickEndShape"]=null,iD.Konva["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:w}),E&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:w}))}),_||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),iD.Konva["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(O,{evt:e}):this._fire(O,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Y,{evt:e}):this._fire(Y,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let t=at.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(T,at.createEvent(e)),at.releaseCapture(e.pointerId)}_lostpointercapture(e){at.releaseCapture(e.pointerId)}setPointersPositions(e){var t=this._getContentPosition(),n=null,l=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})})):(n=(e.clientX-t.left)/t.scaleX,l=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:n,y:l},this._pointerPositions=[{x:n,y:l,id:iL.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:l,id:iL.Util._getFirstPointerId(e)}])}_setPointerPosition(e){iL.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new iz.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new iz.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),iD.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return iL.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};e.Stage=Stage2,Stage2.prototype.nodeType="Stage",(0,iD._registerNode)(Stage2),iO.Factory.addGetterSetter(Stage2,"container")}(i7);var aa={},ao={};!function(e){let t;Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;let n=ij;var l="hasShadow",c="shadowRGBA",y="patternImage",_="linearGradient",x="radialGradient";function getDummyContext2(){return t||(t=iL.Util.createCanvasElement().getContext("2d"))}e.shapes={};let Shape2=class Shape2 extends n.Node{constructor(t){let n;for(super(t);!((n=iL.Util.getRandomColor())&&!(n in e.shapes)););this.colorKey=n,e.shapes[n]=this}getContext(){return iL.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return iL.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(y,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=getDummyContext2();let t=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){let e=new iL.Transform;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(iD.Konva.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let n=e.getMatrix(),l=typeof DOMMatrix>"u"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);t.setTransform(l)}return t}}_getLinearGradient(){return this._getCache(_,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var t=getDummyContext2(),n=this.fillLinearGradientStartPoint(),l=this.fillLinearGradientEndPoint(),c=t.createLinearGradient(n.x,n.y,l.x,l.y),y=0;y<e.length;y+=2)c.addColorStop(e[y],e[y+1]);return c}}_getRadialGradient(){return this._getCache(x,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var t=getDummyContext2(),n=this.fillRadialGradientStartPoint(),l=this.fillRadialGradientEndPoint(),c=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),l.x,l.y,this.fillRadialGradientEndRadius()),y=0;y<e.length;y+=2)c.addColorStop(e[y],e[y+1]);return c}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=iL.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var t=this.getStage();if(!t)return!1;let n=t.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!this.getStage()||!(null===(t=this.attrs.perfectDrawEnabled)||void 0===t||t))return!1;let n=e||this.hasFill(),l=this.hasStroke(),c=1!==this.getAbsoluteOpacity();if(n&&l&&c)return!0;let y=this.hasShadow(),_=this.shadowForStrokeEnabled();return!!(n&&l&&y&&_)}setStrokeHitEnabled(e){iL.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=e.skipTransform,n=e.relativeTo,l=this.getSelfRect(),c=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,y=l.width+c,_=l.height+c,x=!e.skipShadow&&this.hasShadow(),S=x?this.shadowOffsetX():0,w=x?this.shadowOffsetY():0,T=y+Math.abs(S),E=_+Math.abs(w),F=x&&this.shadowBlur()||0,D={width:T+2*F,height:E+2*F,x:-(c/2+F)+Math.min(S,0)+l.x,y:-(c/2+F)+Math.min(w,0)+l.y};return t?D:this._transformedRect(D,n)}drawScene(e,t){var n,l,c=this.getLayer(),y=e||c.getCanvas(),_=y.getContext(),x=this._getCanvasCache(),S=this.getSceneFunc(),w=this.hasShadow(),T=y.isCache,E=t===this;if(!this.isVisible()&&!E)return this;if(x){_.save();var F=this.getAbsoluteTransform(t).getMatrix();return _.transform(F[0],F[1],F[2],F[3],F[4],F[5]),this._drawCachedSceneCanvas(_),_.restore(),this}if(!S)return this;if(_.save(),this._useBufferCanvas()&&!T){(l=(n=this.getStage().bufferCanvas).getContext()).clear(),l.save(),l._applyLineJoin(this);var D=this.getAbsoluteTransform(t).getMatrix();l.transform(D[0],D[1],D[2],D[3],D[4],D[5]),S.call(this,l,this),l.restore();var L=n.pixelRatio;w&&_._applyShadow(this),_._applyOpacity(this),_._applyGlobalCompositeOperation(this),_.drawImage(n._canvas,0,0,n.width/L,n.height/L)}else{if(_._applyLineJoin(this),!E){var D=this.getAbsoluteTransform(t).getMatrix();_.transform(D[0],D[1],D[2],D[3],D[4],D[5]),_._applyOpacity(this),_._applyGlobalCompositeOperation(this)}w&&_._applyShadow(this),S.call(this,_,this)}return _.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;var l=this.getLayer(),c=e||l.hitCanvas,y=c&&c.getContext(),_=this.hitFunc()||this.sceneFunc(),x=this._getCanvasCache(),S=x&&x.hit;if(this.colorKey||iL.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),S){y.save();var w=this.getAbsoluteTransform(t).getMatrix();return y.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(y),y.restore(),this}if(!_)return this;if(y.save(),y._applyLineJoin(this),this!==t){var T=this.getAbsoluteTransform(t).getMatrix();y.transform(T[0],T[1],T[2],T[3],T[4],T[5])}return _.call(this,y,this),y.restore(),this}drawHitFromCache(e=0){var t,n,l,c,y,_=this._getCanvasCache(),x=this._getCachedSceneCanvas(),S=_.hit,w=S.getContext(),T=S.getWidth(),E=S.getHeight();w.clear(),w.drawImage(x._canvas,0,0,T,E);try{for(l=(n=(t=w.getImageData(0,0,T,E)).data).length,c=iL.Util._hexToRgb(this.colorKey),y=0;y<l;y+=4)n[y+3]>e?(n[y]=c.r,n[y+1]=c.g,n[y+2]=c.b,n[y+3]=255):n[y+3]=0;w.putImageData(t,0,0)}catch(e){iL.Util.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}hasPointerCapture(e){return at.hasPointerCapture(e,this)}setPointerCapture(e){at.setPointerCapture(e,this)}releaseCapture(e){at.releaseCapture(e,this)}};e.Shape=Shape2,Shape2.prototype._fillFunc=function(e){let t=this.attrs.fillRule;t?e.fill(t):e.fill()},Shape2.prototype._strokeFunc=function(e){e.stroke()},Shape2.prototype._fillFuncHit=function(e){e.fill()},Shape2.prototype._strokeFuncHit=function(e){e.stroke()},Shape2.prototype._centroid=!1,Shape2.prototype.nodeType="Shape",(0,iD._registerNode)(Shape2),Shape2.prototype.eventListeners={},Shape2.prototype.on.call(Shape2.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(l)}),Shape2.prototype.on.call(Shape2.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),Shape2.prototype.on.call(Shape2.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(y)}),Shape2.prototype.on.call(Shape2.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(_)}),Shape2.prototype.on.call(Shape2.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(x)}),iO.Factory.addGetterSetter(Shape2,"stroke",void 0,(0,iI.getStringOrGradientValidator)()),iO.Factory.addGetterSetter(Shape2,"strokeWidth",2,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"fillAfterStrokeEnabled",!1),iO.Factory.addGetterSetter(Shape2,"hitStrokeWidth","auto",(0,iI.getNumberOrAutoValidator)()),iO.Factory.addGetterSetter(Shape2,"strokeHitEnabled",!0,(0,iI.getBooleanValidator)()),iO.Factory.addGetterSetter(Shape2,"perfectDrawEnabled",!0,(0,iI.getBooleanValidator)()),iO.Factory.addGetterSetter(Shape2,"shadowForStrokeEnabled",!0,(0,iI.getBooleanValidator)()),iO.Factory.addGetterSetter(Shape2,"lineJoin"),iO.Factory.addGetterSetter(Shape2,"lineCap"),iO.Factory.addGetterSetter(Shape2,"sceneFunc"),iO.Factory.addGetterSetter(Shape2,"hitFunc"),iO.Factory.addGetterSetter(Shape2,"dash"),iO.Factory.addGetterSetter(Shape2,"dashOffset",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"shadowColor",void 0,(0,iI.getStringValidator)()),iO.Factory.addGetterSetter(Shape2,"shadowBlur",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"shadowOpacity",1,(0,iI.getNumberValidator)()),iO.Factory.addComponentsGetterSetter(Shape2,"shadowOffset",["x","y"]),iO.Factory.addGetterSetter(Shape2,"shadowOffsetX",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"shadowOffsetY",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"fillPatternImage"),iO.Factory.addGetterSetter(Shape2,"fill",void 0,(0,iI.getStringOrGradientValidator)()),iO.Factory.addGetterSetter(Shape2,"fillPatternX",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"fillPatternY",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"fillLinearGradientColorStops"),iO.Factory.addGetterSetter(Shape2,"strokeLinearGradientColorStops"),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientStartRadius",0),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientEndRadius",0),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientColorStops"),iO.Factory.addGetterSetter(Shape2,"fillPatternRepeat","repeat"),iO.Factory.addGetterSetter(Shape2,"fillEnabled",!0),iO.Factory.addGetterSetter(Shape2,"strokeEnabled",!0),iO.Factory.addGetterSetter(Shape2,"shadowEnabled",!0),iO.Factory.addGetterSetter(Shape2,"dashEnabled",!0),iO.Factory.addGetterSetter(Shape2,"strokeScaleEnabled",!0),iO.Factory.addGetterSetter(Shape2,"fillPriority","color"),iO.Factory.addComponentsGetterSetter(Shape2,"fillPatternOffset",["x","y"]),iO.Factory.addGetterSetter(Shape2,"fillPatternOffsetX",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"fillPatternOffsetY",0,(0,iI.getNumberValidator)()),iO.Factory.addComponentsGetterSetter(Shape2,"fillPatternScale",["x","y"]),iO.Factory.addGetterSetter(Shape2,"fillPatternScaleX",1,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Shape2,"fillPatternScaleY",1,(0,iI.getNumberValidator)()),iO.Factory.addComponentsGetterSetter(Shape2,"fillLinearGradientStartPoint",["x","y"]),iO.Factory.addComponentsGetterSetter(Shape2,"strokeLinearGradientStartPoint",["x","y"]),iO.Factory.addGetterSetter(Shape2,"fillLinearGradientStartPointX",0),iO.Factory.addGetterSetter(Shape2,"strokeLinearGradientStartPointX",0),iO.Factory.addGetterSetter(Shape2,"fillLinearGradientStartPointY",0),iO.Factory.addGetterSetter(Shape2,"strokeLinearGradientStartPointY",0),iO.Factory.addComponentsGetterSetter(Shape2,"fillLinearGradientEndPoint",["x","y"]),iO.Factory.addComponentsGetterSetter(Shape2,"strokeLinearGradientEndPoint",["x","y"]),iO.Factory.addGetterSetter(Shape2,"fillLinearGradientEndPointX",0),iO.Factory.addGetterSetter(Shape2,"strokeLinearGradientEndPointX",0),iO.Factory.addGetterSetter(Shape2,"fillLinearGradientEndPointY",0),iO.Factory.addGetterSetter(Shape2,"strokeLinearGradientEndPointY",0),iO.Factory.addComponentsGetterSetter(Shape2,"fillRadialGradientStartPoint",["x","y"]),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientStartPointX",0),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientStartPointY",0),iO.Factory.addComponentsGetterSetter(Shape2,"fillRadialGradientEndPoint",["x","y"]),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientEndPointX",0),iO.Factory.addGetterSetter(Shape2,"fillRadialGradientEndPointY",0),iO.Factory.addGetterSetter(Shape2,"fillPatternRotation",0),iO.Factory.addGetterSetter(Shape2,"fillRule",void 0,(0,iI.getStringValidator)()),iO.Factory.backCompat(Shape2,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(ao),Object.defineProperty(aa,"__esModule",{value:!0}),aa.Layer=void 0;let as=i8;var al=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],au=al.length;let ac=class extends as.Container{constructor(e){super(e),this.canvas=new iz.SceneCanvas,this.hitCanvas=new iz.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){ij.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!ij.Node.prototype.moveUp.call(this))return!1;var e=this.getStage();return!!e&&!!e.content&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(ij.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(ij.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return ij.Node.prototype.remove.call(this),e&&e.parentNode&&iL.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&iL.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),ij.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){iL.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){iL.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,iL.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,n=!1;;){for(let l=0;l<au;l++){let c=al[l],y=this._getIntersection({x:e.x+c.x*t,y:e.y+c.y*t}),_=y.shape;if(_)return _;if(n=!!y.antialiased,!y.antialiased)break}if(!n)return null;t+=1}}_getIntersection(e){let t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,l=n[3];if(255===l){let e=iL.Util._rgbToHex(n[0],n[1],n[2]),t=ao.shapes["#"+e];return t?{shape:t}:{antialiased:!0}}return l>0?{antialiased:!0}:{}}drawScene(e,t){var n=this.getLayer(),l=e||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&l.getContext().clear(),as.Container.prototype.drawScene.call(this,l,t),this._fire("draw",{node:this}),this}drawHit(e,t){var n=this.getLayer(),l=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),as.Container.prototype.drawHit.call(this,l,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){iL.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return iL.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent;this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return iL.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};aa.Layer=ac,ac.prototype.nodeType="Layer",(0,iD._registerNode)(ac),iO.Factory.addGetterSetter(ac,"imageSmoothingEnabled",!0),iO.Factory.addGetterSetter(ac,"clearBeforeDraw",!0),iO.Factory.addGetterSetter(ac,"hitGraphEnabled",!0,(0,iI.getBooleanValidator)());var ap={};Object.defineProperty(ap,"__esModule",{value:!0}),ap.FastLayer=void 0;let ag=aa;let FastLayer=class FastLayer extends ag.Layer{constructor(e){super(e),this.listening(!1),iL.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};ap.FastLayer=FastLayer,FastLayer.prototype.nodeType="FastLayer",(0,iD._registerNode)(FastLayer);var am={};Object.defineProperty(am,"__esModule",{value:!0}),am.Group=void 0;let av=i8,ab=class extends av.Container{_validateAdd(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&iL.Util.throw("You may only add groups and shapes to groups.")}};am.Group=ab,ab.prototype.nodeType="Group",(0,iD._registerNode)(ab);var ay={};Object.defineProperty(ay,"__esModule",{value:!0}),ay.Animation=void 0;let a_=iD.glob.performance&&iD.glob.performance.now?function(){return iD.glob.performance.now()}:function(){return new Date().getTime()};let Animation=class Animation{constructor(e,t){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:a_(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){let t=this.layers,n=t.length;for(let l=0;l<n;l++)if(t[l]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let e=Animation.animations,t=e.length;for(let n=0;n<t;n++)if(e[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=a_(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let t=e.id,n=this.animations,l=n.length;for(let e=0;e<l;e++)if(n[e].id===t){this.animations.splice(e,1);break}}static _runFrames(){let e={},t=this.animations;for(let n=0;n<t.length;n++){let l=t[n],c=l.layers,y=l.func;l._updateFrameObject(a_());let _=c.length;if(!y||!1!==y.call(l,l.frame))for(let t=0;t<_;t++){let n=c[t];void 0!==n._id&&(e[n._id]=n)}}for(let t in e)e.hasOwnProperty(t)&&e[t].batchDraw()}static _animationLoop(){Animation.animations.length?(Animation._runFrames(),iL.Util.requestAnimFrame(Animation._animationLoop)):Animation.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,iL.Util.requestAnimFrame(this._animationLoop))}};ay.Animation=Animation,Animation.animations=[],Animation.animIdCounter=0,Animation.animRunning=!1;var ax={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},n=0,l=["fill","stroke","shadowColor"];let TweenEngine=class TweenEngine{constructor(e,t,n,l,c,y,_){this.prop=e,this.propFunc=t,this.begin=l,this._pos=l,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=c-this.begin,this.pause()}fire(e){var t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}};let Tween2=class Tween2{constructor(l){var c,y,_=this,x=l.node,S=x._id,w=l.easing||e.Easings.Linear,T=!!l.yoyo;c=typeof l.duration>"u"?.3:0===l.duration?.001:l.duration,this.node=x,this._id=n++;var E=x.getLayer()||(x instanceof iD.Konva.Stage?x.getLayers():null);for(y in E||iL.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ay.Animation(function(){_.tween.onEnterFrame()},E),this.tween=new TweenEngine(y,function(e){_._tweenFunc(e)},w,0,1,1e3*c,T),this._addListeners(),Tween2.attrs[S]||(Tween2.attrs[S]={}),Tween2.attrs[S][this._id]||(Tween2.attrs[S][this._id]={}),Tween2.tweens[S]||(Tween2.tweens[S]={}),l)void 0===t[y]&&this._addAttr(y,l[y]);this.reset(),this.onFinish=l.onFinish,this.onReset=l.onReset,this.onUpdate=l.onUpdate}_addAttr(e,t){var n,c,y,_,x,S,w,T,E=this.node,F=E._id;if((y=Tween2.tweens[F][e])&&delete Tween2.attrs[F][y][e],n=E.getAttr(e),iL.Util._isArray(t)){if(c=[],x=Math.max(t.length,n.length),"points"===e&&t.length!==n.length&&(t.length>n.length?(w=n,n=iL.Util._prepareArrayForTween(n,t,E.closed())):(S=t,t=iL.Util._prepareArrayForTween(t,n,E.closed()))),0===e.indexOf("fill"))for(_=0;_<x;_++)if(_%2==0)c.push(t[_]-n[_]);else{var D=iL.Util.colorToRGBA(n[_]);T=iL.Util.colorToRGBA(t[_]),n[_]=D,c.push({r:T.r-D.r,g:T.g-D.g,b:T.b-D.b,a:T.a-D.a})}else for(_=0;_<x;_++)c.push(t[_]-n[_])}else -1!==l.indexOf(e)?(n=iL.Util.colorToRGBA(n),c={r:(T=iL.Util.colorToRGBA(t)).r-n.r,g:T.g-n.g,b:T.b-n.b,a:T.a-n.a}):c=t-n;Tween2.attrs[F][this._id][e]={start:n,diff:c,end:t,trueEnd:S,trueStart:w},Tween2.tweens[F][e]=this._id}_tweenFunc(e){var t,n,c,y,_,x,S,w,T=this.node,E=Tween2.attrs[T._id][this._id];for(t in E){if(c=(n=E[t]).start,y=n.diff,w=n.end,iL.Util._isArray(c)){if(_=[],S=Math.max(c.length,w.length),0===t.indexOf("fill"))for(x=0;x<S;x++)x%2==0?_.push((c[x]||0)+y[x]*e):_.push("rgba("+Math.round(c[x].r+y[x].r*e)+","+Math.round(c[x].g+y[x].g*e)+","+Math.round(c[x].b+y[x].b*e)+","+(c[x].a+y[x].a*e)+")");else for(x=0;x<S;x++)_.push((c[x]||0)+y[x]*e)}else _=-1!==l.indexOf(t)?"rgba("+Math.round(c.r+y.r*e)+","+Math.round(c.g+y.g*e)+","+Math.round(c.b+y.b*e)+","+(c.a+y.a*e)+")":c+y*e;T.setAttr(t,_)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,t=Tween2.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,t=Tween2.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e,t=this.node._id,n=this._id,l=Tween2.tweens[t];for(e in this.pause(),l)delete Tween2.tweens[t][e];delete Tween2.attrs[t][n]}};e.Tween=Tween2,Tween2.attrs={},Tween2.tweens={},ij.Node.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new Tween2(e).play()},e.Easings={BackEaseIn:(e,t,n,l)=>n*(e/=l)*e*(2.70158*e-1.70158)+t,BackEaseOut:(e,t,n,l)=>n*((e=e/l-1)*e*(2.70158*e+1.70158)+1)+t,BackEaseInOut(e,t,n,l){var c=1.70158;return(e/=l/2)<1?n/2*(e*e*(((c*=1.525)+1)*e-c))+t:n/2*((e-=2)*e*(((c*=1.525)+1)*e+c)+2)+t},ElasticEaseIn(e,t,n,l,c,y){var _=0;return 0===e?t:1==(e/=l)?t+n:(y||(y=.3*l),!c||c<Math.abs(n)?(c=n,_=y/4):_=y/(2*Math.PI)*Math.asin(n/c),-(c*Math.pow(2,10*(e-=1))*Math.sin((e*l-_)*(2*Math.PI)/y))+t)},ElasticEaseOut(e,t,n,l,c,y){var _=0;return 0===e?t:1==(e/=l)?t+n:(y||(y=.3*l),!c||c<Math.abs(n)?(c=n,_=y/4):_=y/(2*Math.PI)*Math.asin(n/c),c*Math.pow(2,-10*e)*Math.sin((e*l-_)*(2*Math.PI)/y)+n+t)},ElasticEaseInOut(e,t,n,l,c,y){var _=0;return 0===e?t:2==(e/=l/2)?t+n:(y||(y=l*(.3*1.5)),!c||c<Math.abs(n)?(c=n,_=y/4):_=y/(2*Math.PI)*Math.asin(n/c),e<1?-.5*(c*Math.pow(2,10*(e-=1))*Math.sin((e*l-_)*(2*Math.PI)/y))+t:c*Math.pow(2,-10*(e-=1))*Math.sin((e*l-_)*(2*Math.PI)/y)*.5+n+t)},BounceEaseOut:(e,t,n,l)=>(e/=l)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(t,n,l,c)=>l-e.Easings.BounceEaseOut(c-t,0,l,c)+n,BounceEaseInOut:(t,n,l,c)=>t<c/2?.5*e.Easings.BounceEaseIn(2*t,0,l,c)+n:.5*e.Easings.BounceEaseOut(2*t-c,0,l,c)+.5*l+n,EaseIn:(e,t,n,l)=>n*(e/=l)*e+t,EaseOut:(e,t,n,l)=>-n*(e/=l)*(e-2)+t,EaseInOut:(e,t,n,l)=>(e/=l/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,l)=>n*(e/=l)*e*e*e*e+t,StrongEaseOut:(e,t,n,l)=>n*((e=e/l-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,l)=>(e/=l/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,l)=>n*e/l+t}}(ax),Object.defineProperty(iA,"__esModule",{value:!0}),iA.Konva=void 0,iA.Konva=iL.Util._assign(iD.Konva,{Util:iL.Util,Transform:iL.Transform,Node:ij.Node,Container:i8.Container,Stage:i7.Stage,stages:i7.stages,Layer:aa.Layer,FastLayer:ap.FastLayer,Group:am.Group,DD:iG.DD,Shape:ao.Shape,shapes:ao.shapes,Animation:ay.Animation,Tween:ax.Tween,Easings:ax.Easings,Context:iW.Context,Canvas:iz.Canvas}),iA.default=iA.Konva;var aS={};Object.defineProperty(aS,"__esModule",{value:!0}),aS.Arc=void 0;let aw=ao,ak=class extends aw.Shape{_sceneFunc(e){var t=iD.Konva.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,n),e.arc(0,0,this.innerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),t=this.outerRadius(),n=this.clockwise(),l=iD.Konva.getAngle(n?360-this.angle():this.angle()),c=Math.cos(Math.min(l,Math.PI)),y=Math.sin(Math.min(Math.max(Math.PI,l),3*Math.PI/2)),_=Math.sin(Math.min(l,Math.PI/2)),x=c*(c>0?e:t),S=y*(y>0?e:t),w=_*(_>0?t:e);return{x:x,y:n?-1*w:S,width:1*t-x,height:w-S}}};aS.Arc=ak,ak.prototype._centroid=!0,ak.prototype.className="Arc",ak.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,iD._registerNode)(ak),iO.Factory.addGetterSetter(ak,"innerRadius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(ak,"outerRadius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(ak,"angle",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(ak,"clockwise",!1,(0,iI.getBooleanValidator)());var aC={},aP={};Object.defineProperty(aP,"__esModule",{value:!0}),aP.Line=void 0;let aM=ao;function getControlPoints(e,t,n,l,c,y,_){var x=Math.sqrt(Math.pow(n-e,2)+Math.pow(l-t,2)),S=Math.sqrt(Math.pow(c-n,2)+Math.pow(y-l,2)),w=_*x/(x+S),T=_*S/(x+S);return[n-w*(c-e),l-w*(y-t),n+T*(c-e),l+T*(y-t)]}function expandPoints(e,t){var n,l,c=e.length,y=[];for(n=2;n<c-2;n+=2)isNaN((l=getControlPoints(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t))[0])||(y.push(l[0]),y.push(l[1]),y.push(e[n]),y.push(e[n+1]),y.push(l[2]),y.push(l[3]));return y}let aT=class extends aM.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var t,n,l,c=this.points(),y=c.length,_=this.tension(),x=this.closed(),S=this.bezier();if(y){if(e.beginPath(),e.moveTo(c[0],c[1]),0!==_&&y>4){for(n=(t=this.getTensionPoints()).length,l=x?0:4,x||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);l<n-2;)e.bezierCurveTo(t[l++],t[l++],t[l++],t[l++],t[l++],t[l++]);x||e.quadraticCurveTo(t[n-2],t[n-1],c[y-2],c[y-1])}else if(S)for(l=2;l<y;)e.bezierCurveTo(c[l++],c[l++],c[l++],c[l++],c[l++],c[l++]);else for(l=2;l<y;l+=2)e.lineTo(c[l],c[l+1]);x?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,n=this.tension(),l=getControlPoints(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),c=getControlPoints(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),y=expandPoints(e,n);return[l[2],l[3]].concat(y).concat([c[0],c[1],e[t-2],e[t-1],c[2],c[3],l[0],l[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points();for(var t,n,l=e[0],c=e[0],y=e[1],_=e[1],x=0;x<e.length/2;x++)t=e[2*x],n=e[2*x+1],l=Math.min(l,t),c=Math.max(c,t),y=Math.min(y,n),_=Math.max(_,n);return{x:l,y:y,width:c-l,height:_-y}}};aP.Line=aT,aT.prototype.className="Line",aT.prototype._attrsAffectingSize=["points","bezier","tension"],(0,iD._registerNode)(aT),iO.Factory.addGetterSetter(aT,"closed",!1),iO.Factory.addGetterSetter(aT,"bezier",!1),iO.Factory.addGetterSetter(aT,"tension",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(aT,"points",[],(0,iI.getNumberArrayValidator)());var aE={},aR={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],e.getCubicArcLength=(t,n,l)=>{let c,y,_;c=l/2,y=0;for(let l=0;l<20;l++)_=c*e.tValues[20][l]+c,y+=e.cValues[20][l]*function(e,t,n){let l=getDerivative(1,n,e),c=getDerivative(1,n,t);return Math.sqrt(l*l+c*c)}(t,n,_);return c*y},e.getQuadraticArcLength=(e,t,n)=>{void 0===n&&(n=1);let l=e[0]-2*e[1]+e[2],c=t[0]-2*t[1]+t[2],y=2*e[1]-2*e[0],_=2*t[1]-2*t[0],x=4*(l*l+c*c);if(0===x)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));let S=4*(l*y+c*_)/(2*x),w=n+S,T=(y*y+_*_)/x-S*S,E=w*w+T>0?Math.sqrt(w*w+T):0,F=S*S+T>0?Math.sqrt(S*S+T):0;return Math.sqrt(x)/2*(w*E-S*F+(S+Math.sqrt(S*S+T)!==0?T*Math.log(Math.abs((w+E)/(S+F))):0))};let getDerivative=(t,n,l)=>{let c,y;let _=l.length-1;if(0===_)return 0;if(0===t){y=0;for(let t=0;t<=_;t++)y+=e.binomialCoefficients[_][t]*Math.pow(1-n,_-t)*Math.pow(n,t)*l[t];return y}c=Array(_);for(let e=0;e<_;e++)c[e]=_*(l[e+1]-l[e]);return getDerivative(t-1,n,c)};e.t2length=(e,t,n)=>{let l=1,c=e/t,y=(e-n(c))/t,_=0;for(;l>.001;){let x=n(c+y),S=Math.abs(e-x)/t;if(S<l)l=S,c+=y;else{let _=n(c-y),x=Math.abs(e-_)/t;x<l?(l=x,c-=y):y/=2}if(++_>500)break}return c}}(aR),Object.defineProperty(aE,"__esModule",{value:!0}),aE.Path=void 0;let aF=ao;let Path=class Path extends aF.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var n=!1,l=0;l<t.length;l++){var c=t[l].command,y=t[l].points;switch(c){case"L":e.lineTo(y[0],y[1]);break;case"M":e.moveTo(y[0],y[1]);break;case"C":e.bezierCurveTo(y[0],y[1],y[2],y[3],y[4],y[5]);break;case"Q":e.quadraticCurveTo(y[0],y[1],y[2],y[3]);break;case"A":var _=y[0],x=y[1],S=y[2],w=y[3],T=y[4],E=y[5],F=y[6],D=y[7],L=S>w?S:w,j=S>w?1:S/w,O=S>w?w/S:1;e.translate(_,x),e.rotate(F),e.scale(j,O),e.arc(0,0,L,T,T+E,1-D),e.scale(1/j,1/O),e.rotate(-F),e.translate(-_,-x);break;case"z":n=!0,e.closePath()}}n||this.hasFill()?e.fillStrokeShape(this):e.strokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(t){if("A"===t.command){var n=t.points[4],l=t.points[5],c=t.points[4]+l,y=Math.PI/180;if(Math.abs(n-c)<y&&(y=Math.abs(n-c)),l<0)for(let l=n-y;l>c;l-=y){let n=Path.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],l,0);e.push(n.x,n.y)}else for(let l=n+y;l<c;l+=y){let n=Path.getPointOnEllipticalArc(t.points[0],t.points[1],t.points[2],t.points[3],l,0);e.push(n.x,n.y)}}else if("C"===t.command)for(let n=0;n<=1;n+=.01){let l=Path.getPointOnCubicBezier(n,t.start.x,t.start.y,t.points[0],t.points[1],t.points[2],t.points[3],t.points[4],t.points[5]);e.push(l.x,l.y)}else e=e.concat(t.points)});for(var t,n,l=e[0],c=e[0],y=e[1],_=e[1],x=0;x<e.length/2;x++)t=e[2*x],n=e[2*x+1],isNaN(t)||(l=Math.min(l,t),c=Math.max(c,t)),isNaN(n)||(y=Math.min(y,n),_=Math.max(_,n));return{x:l,y:y,width:c-l,height:_-y}}getLength(){return this.pathLength}getPointAtLength(e){return Path.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,n,l){return Math.sqrt((n-e)*(n-e)+(l-t)*(l-t))}static getPathLength(e){let t=0;for(var n=0;n<e.length;++n)t+=e[n].pathLength;return t}static getPointAtLengthOfDataArray(e,t){var n,l=0,c=t.length;if(!c)return null;for(;l<c&&e>t[l].pathLength;)e-=t[l].pathLength,++l;if(l===c)return{x:(n=t[l-1].points.slice(-2))[0],y:n[1]};if(e<.01)return{x:(n=t[l].points.slice(0,2))[0],y:n[1]};var y=t[l],_=y.points;switch(y.command){case"L":return Path.getPointOnLine(e,y.start.x,y.start.y,_[0],_[1]);case"C":return Path.getPointOnCubicBezier((0,aR.t2length)(e,Path.getPathLength(t),e=>(0,aR.getCubicArcLength)([y.start.x,_[0],_[2],_[4]],[y.start.y,_[1],_[3],_[5]],e)),y.start.x,y.start.y,_[0],_[1],_[2],_[3],_[4],_[5]);case"Q":return Path.getPointOnQuadraticBezier((0,aR.t2length)(e,Path.getPathLength(t),e=>(0,aR.getQuadraticArcLength)([y.start.x,_[0],_[2]],[y.start.y,_[1],_[3]],e)),y.start.x,y.start.y,_[0],_[1],_[2],_[3]);case"A":var x=_[0],S=_[1],w=_[2],T=_[3],E=_[4],F=_[5],D=_[6];return E+=F*e/y.pathLength,Path.getPointOnEllipticalArc(x,S,w,T,E,D)}return null}static getPointOnLine(e,t,n,l,c,y,_){void 0===y&&(y=t),void 0===_&&(_=n);var x=(c-n)/(l-t+1e-8),S=Math.sqrt(e*e/(1+x*x));l<t&&(S*=-1);var w,T=x*S;if(l===t)w={x:y,y:_+T};else if((_-n)/(y-t+1e-8)===x)w={x:y+S,y:_+T};else{var E,F,D=this.getLineLength(t,n,l,c),L=(y-t)*(l-t)+(_-n)*(c-n);L/=D*D,E=t+L*(l-t),F=n+L*(c-n);var j=this.getLineLength(y,_,E,F),O=Math.sqrt(e*e-j*j);S=Math.sqrt(O*O/(1+x*x)),l<t&&(S*=-1),T=x*S,w={x:E+S,y:F+T}}return w}static getPointOnCubicBezier(e,t,n,l,c,y,_,x,S){function CB3(e){return 3*e*(1-e)*(1-e)}return{x:x*(e*e*e)+y*(3*e*e*(1-e))+l*CB3(e)+t*((1-e)*(1-e)*(1-e)),y:S*(e*e*e)+_*(3*e*e*(1-e))+c*CB3(e)+n*((1-e)*(1-e)*(1-e))}}static getPointOnQuadraticBezier(e,t,n,l,c,y,_){return{x:y*(e*e)+l*(2*e*(1-e))+t*((1-e)*(1-e)),y:_*(e*e)+c*(2*e*(1-e))+n*((1-e)*(1-e))}}static getPointOnEllipticalArc(e,t,n,l,c,y){var _=Math.cos(y),x=Math.sin(y),S={x:n*Math.cos(c),y:l*Math.sin(c)};return{x:e+(S.x*_-S.y*x),y:t+(S.x*x+S.y*_)}}static parsePathData(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(RegExp(" ","g"),",");for(var l=0;l<n.length;l++)t=t.replace(RegExp(n[l],"g"),"|"+n[l]);var c,y=t.split("|"),_=[],x=[],S=0,w=0,T=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(l=1;l<y.length;l++){var E=y[l],F=E.charAt(0);for(E=E.slice(1),x.length=0;c=T.exec(E);)x.push(c[0]);for(var D=[],L=0,j=x.length;L<j;L++){if("00"===x[L]){D.push(0,0);continue}var O=parseFloat(x[L]);isNaN(O)?D.push(0):D.push(O)}for(;D.length>0&&!isNaN(D[0]);){var W,$,V,X,Y,Z,et,er,en,ea,eo="",es=[],el=S,eh=w;switch(F){case"l":S+=D.shift(),w+=D.shift(),eo="L",es.push(S,w);break;case"L":S=D.shift(),w=D.shift(),es.push(S,w);break;case"m":var eu=D.shift(),ed=D.shift();if(S+=eu,w+=ed,eo="M",_.length>2&&"z"===_[_.length-1].command){for(var ep=_.length-2;ep>=0;ep--)if("M"===_[ep].command){S=_[ep].points[0]+eu,w=_[ep].points[1]+ed;break}}es.push(S,w),F="l";break;case"M":S=D.shift(),w=D.shift(),eo="M",es.push(S,w),F="L";break;case"h":S+=D.shift(),eo="L",es.push(S,w);break;case"H":S=D.shift(),eo="L",es.push(S,w);break;case"v":w+=D.shift(),eo="L",es.push(S,w);break;case"V":w=D.shift(),eo="L",es.push(S,w);break;case"C":es.push(D.shift(),D.shift(),D.shift(),D.shift()),S=D.shift(),w=D.shift(),es.push(S,w);break;case"c":es.push(S+D.shift(),w+D.shift(),S+D.shift(),w+D.shift()),S+=D.shift(),w+=D.shift(),eo="C",es.push(S,w);break;case"S":$=S,V=w,"C"===(W=_[_.length-1]).command&&($=S+(S-W.points[2]),V=w+(w-W.points[3])),es.push($,V,D.shift(),D.shift()),S=D.shift(),w=D.shift(),eo="C",es.push(S,w);break;case"s":$=S,V=w,"C"===(W=_[_.length-1]).command&&($=S+(S-W.points[2]),V=w+(w-W.points[3])),es.push($,V,S+D.shift(),w+D.shift()),S+=D.shift(),w+=D.shift(),eo="C",es.push(S,w);break;case"Q":es.push(D.shift(),D.shift()),S=D.shift(),w=D.shift(),es.push(S,w);break;case"q":es.push(S+D.shift(),w+D.shift()),S+=D.shift(),w+=D.shift(),eo="Q",es.push(S,w);break;case"T":$=S,V=w,"Q"===(W=_[_.length-1]).command&&($=S+(S-W.points[0]),V=w+(w-W.points[1])),S=D.shift(),w=D.shift(),eo="Q",es.push($,V,S,w);break;case"t":$=S,V=w,"Q"===(W=_[_.length-1]).command&&($=S+(S-W.points[0]),V=w+(w-W.points[1])),S+=D.shift(),w+=D.shift(),eo="Q",es.push($,V,S,w);break;case"A":X=D.shift(),Y=D.shift(),Z=D.shift(),et=D.shift(),er=D.shift(),en=S,ea=w,S=D.shift(),w=D.shift(),eo="A",es=this.convertEndpointToCenterParameterization(en,ea,S,w,et,er,X,Y,Z);break;case"a":X=D.shift(),Y=D.shift(),Z=D.shift(),et=D.shift(),er=D.shift(),en=S,ea=w,S+=D.shift(),w+=D.shift(),eo="A",es=this.convertEndpointToCenterParameterization(en,ea,S,w,et,er,X,Y,Z)}_.push({command:eo||F,points:es,start:{x:el,y:eh},pathLength:this.calcLength(el,eh,eo||F,es)})}("z"===F||"Z"===F)&&_.push({command:"z",points:[],start:void 0,pathLength:0})}return _}static calcLength(e,t,n,l){var c,y,_,x;switch(n){case"L":return Path.getLineLength(e,t,l[0],l[1]);case"C":return(0,aR.getCubicArcLength)([e,l[0],l[2],l[4]],[t,l[1],l[3],l[5]],1);case"Q":return(0,aR.getQuadraticArcLength)([e,l[0],l[2]],[t,l[1],l[3]],1);case"A":c=0;var S=l[4],w=l[5],T=l[4]+w,E=Math.PI/180;if(Math.abs(S-T)<E&&(E=Math.abs(S-T)),y=Path.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],S,0),w<0)for(x=S-E;x>T;x-=E)_=Path.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],x,0),c+=Path.getLineLength(y.x,y.y,_.x,_.y),y=_;else for(x=S+E;x<T;x+=E)_=Path.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],x,0),c+=Path.getLineLength(y.x,y.y,_.x,_.y),y=_;return _=Path.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],T,0),c+=Path.getLineLength(y.x,y.y,_.x,_.y)}return 0}static convertEndpointToCenterParameterization(e,t,n,l,c,y,_,x,S){var w=S*(Math.PI/180),T=Math.cos(w)*(e-n)/2+Math.sin(w)*(t-l)/2,E=-1*Math.sin(w)*(e-n)/2+Math.cos(w)*(t-l)/2,F=T*T/(_*_)+E*E/(x*x);F>1&&(_*=Math.sqrt(F),x*=Math.sqrt(F));var D=Math.sqrt((_*_*(x*x)-_*_*(E*E)-x*x*(T*T))/(_*_*(E*E)+x*x*(T*T)));c===y&&(D*=-1),isNaN(D)&&(D=0);var L=D*_*E/x,j=-(D*x)*T/_,O=(e+n)/2+Math.cos(w)*L-Math.sin(w)*j,W=(t+l)/2+Math.sin(w)*L+Math.cos(w)*j,vMag=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},vRatio=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(vMag(e)*vMag(t))},vAngle=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(vRatio(e,t))},$=vAngle([1,0],[(T-L)/_,(E-j)/x]),V=[(T-L)/_,(E-j)/x],X=[(-1*T-L)/_,(-1*E-j)/x],Y=vAngle(V,X);return -1>=vRatio(V,X)&&(Y=Math.PI),vRatio(V,X)>=1&&(Y=0),0===y&&Y>0&&(Y-=2*Math.PI),1===y&&Y<0&&(Y+=2*Math.PI),[O,W,_,x,$,Y,w,y]}};aE.Path=Path,Path.prototype.className="Path",Path.prototype._attrsAffectingSize=["data"],(0,iD._registerNode)(Path),iO.Factory.addGetterSetter(Path,"data"),Object.defineProperty(aC,"__esModule",{value:!0}),aC.Arrow=void 0;let aN=aP,aA=class extends aN.Line{_sceneFunc(e){super._sceneFunc(e);var t=2*Math.PI,n=this.points(),l=n,c=0!==this.tension()&&n.length>4;c&&(l=this.getTensionPoints());var y,_,x=this.pointerLength(),S=n.length;if(c){let e=[l[l.length-4],l[l.length-3],l[l.length-2],l[l.length-1],n[S-2],n[S-1]],t=aE.Path.calcLength(l[l.length-4],l[l.length-3],"C",e),c=aE.Path.getPointOnQuadraticBezier(Math.min(1,1-x/t),e[0],e[1],e[2],e[3],e[4],e[5]);y=n[S-2]-c.x,_=n[S-1]-c.y}else y=n[S-2]-n[S-4],_=n[S-1]-n[S-3];var w=(Math.atan2(_,y)+t)%t,T=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[S-2],n[S-1]),e.rotate(w),e.moveTo(0,0),e.lineTo(-x,T/2),e.lineTo(-x,-T/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),c?(y=(l[0]+l[2])/2-n[0],_=(l[1]+l[3])/2-n[1]):(y=n[2]-n[0],_=n[3]-n[1]),e.rotate((Math.atan2(-_,-y)+t)%t),e.moveTo(0,0),e.lineTo(-x,T/2),e.lineTo(-x,-T/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}}};aC.Arrow=aA,aA.prototype.className="Arrow",(0,iD._registerNode)(aA),iO.Factory.addGetterSetter(aA,"pointerLength",10,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(aA,"pointerWidth",10,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(aA,"pointerAtBeginning",!1),iO.Factory.addGetterSetter(aA,"pointerAtEnding",!0);var aD={};Object.defineProperty(aD,"__esModule",{value:!0}),aD.Circle=void 0;let aL=ao,aj=class extends aL.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};aD.Circle=aj,aj.prototype._centroid=!0,aj.prototype.className="Circle",aj.prototype._attrsAffectingSize=["radius"],(0,iD._registerNode)(aj),iO.Factory.addGetterSetter(aj,"radius",0,(0,iI.getNumberValidator)());var aO={};Object.defineProperty(aO,"__esModule",{value:!0}),aO.Ellipse=void 0;let aI=ao;let Ellipse=class Ellipse extends aI.Shape{_sceneFunc(e){var t=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),t!==n&&e.scale(1,n/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};aO.Ellipse=Ellipse,Ellipse.prototype.className="Ellipse",Ellipse.prototype._centroid=!0,Ellipse.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,iD._registerNode)(Ellipse),iO.Factory.addComponentsGetterSetter(Ellipse,"radius",["x","y"]),iO.Factory.addGetterSetter(Ellipse,"radiusX",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Ellipse,"radiusY",0,(0,iI.getNumberValidator)());var az={};Object.defineProperty(az,"__esModule",{value:!0}),az.Image=void 0;let aW=ao,a$=class Image extends aW.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){let t;let n=this.getWidth(),l=this.getHeight(),c=this.cornerRadius(),y=this.attrs.image;if(y){let e=this.attrs.cropWidth,c=this.attrs.cropHeight;t=e&&c?[y,this.cropX(),this.cropY(),e,c,0,0,n,l]:[y,0,0,n,l]}(this.hasFill()||this.hasStroke()||c)&&(e.beginPath(),c?iL.Util.drawRoundedRectPath(e,n,l,c):e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)),y&&(c&&e.clip(),e.drawImage.apply(e,t))}_hitFunc(e){var t=this.width(),n=this.height(),l=this.cornerRadius();e.beginPath(),l?iL.Util.drawRoundedRectPath(e,t,n,l):e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return null!==(e=this.attrs.width)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.width}getHeight(){var e,t;return null!==(e=this.attrs.height)&&void 0!==e?e:null===(t=this.image())||void 0===t?void 0:t.height}static fromURL(e,t,n=null){var l=iL.Util.createImageElement();l.onload=function(){t(new Image({image:l}))},l.onerror=n,l.crossOrigin="Anonymous",l.src=e}};az.Image=a$,a$.prototype.className="Image",(0,iD._registerNode)(a$),iO.Factory.addGetterSetter(a$,"cornerRadius",0,(0,iI.getNumberOrArrayOfNumbersValidator)(4)),iO.Factory.addGetterSetter(a$,"image"),iO.Factory.addComponentsGetterSetter(a$,"crop",["x","y","width","height"]),iO.Factory.addGetterSetter(a$,"cropX",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(a$,"cropY",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(a$,"cropWidth",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(a$,"cropHeight",0,(0,iI.getNumberValidator)());var aG={};Object.defineProperty(aG,"__esModule",{value:!0}),aG.Tag=aG.Label=void 0;let aU=ao,aB=am;var aH=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],aV="right",aq="down",aK="left",aX=aH.length;let aY=class extends aB.Group{constructor(e){super(e),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t,n=this,func=function(){n._sync()};for(t=0;t<aX;t++)e.on(aH[t]+"Change.konva",func)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e,t,n,l,c,y,_,x=this.getText(),S=this.getTag();if(x&&S){switch(e=x.width(),t=x.height(),n=S.pointerDirection(),l=S.pointerWidth(),_=S.pointerHeight(),c=0,y=0,n){case"up":c=e/2,y=-1*_;break;case aV:c=e+l,y=t/2;break;case aq:c=e/2,y=t+_;break;case aK:c=-1*l,y=t/2}S.setAttrs({x:-1*c,y:-1*y,width:e,height:t}),x.setAttrs({x:-1*c,y:-1*y})}}};aG.Label=aY,aY.prototype.className="Label",(0,iD._registerNode)(aY);let aQ=class extends aU.Shape{_sceneFunc(e){var t=this.width(),n=this.height(),l=this.pointerDirection(),c=this.pointerWidth(),y=this.pointerHeight(),_=this.cornerRadius();let x=0,S=0,w=0,T=0;"number"==typeof _?x=S=w=T=Math.min(_,t/2,n/2):(x=Math.min(_[0]||0,t/2,n/2),S=Math.min(_[1]||0,t/2,n/2),T=Math.min(_[2]||0,t/2,n/2),w=Math.min(_[3]||0,t/2,n/2)),e.beginPath(),e.moveTo(x,0),"up"===l&&(e.lineTo((t-c)/2,0),e.lineTo(t/2,-1*y),e.lineTo((t+c)/2,0)),e.lineTo(t-S,0),e.arc(t-S,S,S,3*Math.PI/2,0,!1),l===aV&&(e.lineTo(t,(n-y)/2),e.lineTo(t+c,n/2),e.lineTo(t,(n+y)/2)),e.lineTo(t,n-T),e.arc(t-T,n-T,T,0,Math.PI/2,!1),l===aq&&(e.lineTo((t+c)/2,n),e.lineTo(t/2,n+y),e.lineTo((t-c)/2,n)),e.lineTo(w,n),e.arc(w,n-w,w,Math.PI/2,Math.PI,!1),l===aK&&(e.lineTo(0,(n+y)/2),e.lineTo(-1*c,n/2),e.lineTo(0,(n-y)/2)),e.lineTo(0,x),e.arc(x,x,x,Math.PI,3*Math.PI/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,n=this.pointerWidth(),l=this.pointerHeight(),c=this.pointerDirection(),y=this.width(),_=this.height();return"up"===c?(t-=l,_+=l):c===aq?_+=l:c===aK?(e-=1.5*n,y+=n):c===aV&&(y+=1.5*n),{x:e,y:t,width:y,height:_}}};aG.Tag=aQ,aQ.prototype.className="Tag",(0,iD._registerNode)(aQ),iO.Factory.addGetterSetter(aQ,"pointerDirection","none"),iO.Factory.addGetterSetter(aQ,"pointerWidth",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(aQ,"pointerHeight",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(aQ,"cornerRadius",0,(0,iI.getNumberOrArrayOfNumbersValidator)(4));var aZ={};Object.defineProperty(aZ,"__esModule",{value:!0}),aZ.Rect=void 0;let aJ=ao,a0=class extends aJ.Shape{_sceneFunc(e){var t=this.cornerRadius(),n=this.width(),l=this.height();e.beginPath(),t?iL.Util.drawRoundedRectPath(e,n,l,t):e.rect(0,0,n,l),e.closePath(),e.fillStrokeShape(this)}};aZ.Rect=a0,a0.prototype.className="Rect",(0,iD._registerNode)(a0),iO.Factory.addGetterSetter(a0,"cornerRadius",0,(0,iI.getNumberOrArrayOfNumbersValidator)(4));var a1={};Object.defineProperty(a1,"__esModule",{value:!0}),a1.RegularPolygon=void 0;let a5=ao;let RegularPolygon=class RegularPolygon extends a5.Shape{_sceneFunc(e){let t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,t=this.attrs.radius||0,n=[];for(var l=0;l<e;l++)n.push({x:t*Math.sin(2*l*Math.PI/e),y:-1*t*Math.cos(2*l*Math.PI/e)});return n}getSelfRect(){let e=this._getPoints();var t=e[0].x,n=e[0].y,l=e[0].x,c=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),n=Math.max(n,e.x),l=Math.min(l,e.y),c=Math.max(c,e.y)}),{x:t,y:l,width:n-t,height:c-l}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};a1.RegularPolygon=RegularPolygon,RegularPolygon.prototype.className="RegularPolygon",RegularPolygon.prototype._centroid=!0,RegularPolygon.prototype._attrsAffectingSize=["radius"],(0,iD._registerNode)(RegularPolygon),iO.Factory.addGetterSetter(RegularPolygon,"radius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(RegularPolygon,"sides",0,(0,iI.getNumberValidator)());var a3={};Object.defineProperty(a3,"__esModule",{value:!0}),a3.Ring=void 0;let a4=ao;var a6=2*Math.PI;let Ring=class Ring extends a4.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,a6,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),a6,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};a3.Ring=Ring,Ring.prototype.className="Ring",Ring.prototype._centroid=!0,Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,iD._registerNode)(Ring),iO.Factory.addGetterSetter(Ring,"innerRadius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Ring,"outerRadius",0,(0,iI.getNumberValidator)());var a8={};Object.defineProperty(a8,"__esModule",{value:!0}),a8.Sprite=void 0;let a9=ao;let Sprite=class Sprite extends a9.Shape{constructor(e){super(e),this._updated=!0,this.anim=new ay.Animation(()=>{var e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var t=this.animation(),n=this.frameIndex(),l=4*n,c=this.animations()[t],y=this.frameOffsets(),_=c[l+0],x=c[l+1],S=c[l+2],w=c[l+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,S,w),e.closePath(),e.fillStrokeShape(this)),T){if(y){var E=y[t],F=2*n;e.drawImage(T,_,x,S,w,E[F+0],E[F+1],S,w)}else e.drawImage(T,_,x,S,w,0,0,S,w)}}_hitFunc(e){var t=this.animation(),n=this.frameIndex(),l=4*n,c=this.animations()[t],y=this.frameOffsets(),_=c[l+2],x=c[l+3];if(e.beginPath(),y){var S=y[t],w=2*n;e.rect(S[w+0],S[w+1],_,x)}else e.rect(0,0,_,x);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)}};a8.Sprite=Sprite,Sprite.prototype.className="Sprite",(0,iD._registerNode)(Sprite),iO.Factory.addGetterSetter(Sprite,"animation"),iO.Factory.addGetterSetter(Sprite,"animations"),iO.Factory.addGetterSetter(Sprite,"frameOffsets"),iO.Factory.addGetterSetter(Sprite,"image"),iO.Factory.addGetterSetter(Sprite,"frameIndex",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Sprite,"frameRate",17,(0,iI.getNumberValidator)()),iO.Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var a7={};Object.defineProperty(a7,"__esModule",{value:!0}),a7.Star=void 0;let ot=ao;let Star=class Star extends ot.Shape{_sceneFunc(e){var t=this.innerRadius(),n=this.outerRadius(),l=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var c=1;c<2*l;c++){var y=c%2==0?n:t,_=y*Math.sin(c*Math.PI/l),x=-1*y*Math.cos(c*Math.PI/l);e.lineTo(_,x)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};a7.Star=Star,Star.prototype.className="Star",Star.prototype._centroid=!0,Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,iD._registerNode)(Star),iO.Factory.addGetterSetter(Star,"numPoints",5,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Star,"innerRadius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Star,"outerRadius",0,(0,iI.getNumberValidator)());var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.Text=or.stringToArray=void 0;let oa=ao;function stringToArray(e){return Array.from(e)}or.stringToArray=stringToArray;var oo="auto",os="inherit",ol="justify",ou="left",od="middle",op="normal",om="none",ov=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ob=ov.length;function getDummyContext(){return w||(w=iL.Util.createCanvasElement().getContext("2d"))}let oy=class extends oa.Shape{constructor(e){var t;super(((t=(t=e)||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<ob;n++)this.on(ov[n]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,n=t.length;if(this.text()){var l,c=this.padding(),y=this.fontSize(),_=this.lineHeight()*y,x=this.verticalAlign(),S=this.direction(),w=0,T=this.align(),E=this.getWidth(),F=this.letterSpacing(),D=this.fill(),L=this.textDecoration(),j=-1!==L.indexOf("underline"),O=-1!==L.indexOf("line-through");S=S===os?e.direction:S;var W=_/2,$=0,V=0;for("rtl"===S&&e.setAttr("direction",S),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",od),e.setAttr("textAlign",ou),x===od?w=(this.getHeight()-n*_-2*c)/2:"bottom"===x&&(w=this.getHeight()-n*_-2*c),e.translate(c,w+c),l=0;l<n;l++){var X,Y,Z,$=0,V=0,et=t[l],er=et.text,en=et.width,ea=et.lastInParagraph;if(e.save(),"right"===T?$+=E-en-2*c:"center"===T&&($+=(E-en-2*c)/2),j){e.save(),e.beginPath(),e.moveTo($,W+V+Math.round(y/2)),Y=0==(X=er.split(" ").length-1),Z=T!==ol||ea?en:E-2*c,e.lineTo($+Math.round(Z),W+V+Math.round(y/2)),e.lineWidth=y/15;let t=this._getLinearGradient();e.strokeStyle=t||D,e.stroke(),e.restore()}if(O){e.save(),e.beginPath(),e.moveTo($,W+V),Y=0==(X=er.split(" ").length-1),Z=T===ol&&ea&&!Y?E-2*c:en,e.lineTo($+Math.round(Z),W+V),e.lineWidth=y/15;let t=this._getLinearGradient();e.strokeStyle=t||D,e.stroke(),e.restore()}if("rtl"!==S&&(0!==F||T===ol)){X=er.split(" ").length-1;for(var eo=stringToArray(er),es=0;es<eo.length;es++){var el=eo[es];" "!==el||ea||T!==ol||($+=(E-2*c-en)/X),this._partialTextX=$,this._partialTextY=W+V,this._partialText=el,e.fillStrokeShape(this),$+=this.measureSize(el).width+F}}else 0!==F&&e.setAttr("letterSpacing",`${F}px`),this._partialTextX=$,this._partialTextY=W+V,this._partialText=er,e.fillStrokeShape(this);e.restore(),n>1&&(W+=_)}}}_hitFunc(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=iL.Util._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===oo||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===oo||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return iL.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n=getDummyContext(),l=this.fontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:l}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily().split(",").map(e=>{e=e.trim();let t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()===ol&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),n=e.length;return getDummyContext().measureText(e).width+(n?t*(n-1):0)}_setTextData(){var e=this.text().split(`
`),t=+this.fontSize(),n=0,l=this.lineHeight()*t,c=this.attrs.width,y=this.attrs.height,_=c!==oo&&void 0!==c,x=y!==oo&&void 0!==y,S=this.padding(),w=c-2*S,T=y-2*S,E=0,F=this.wrap(),D="char"!==F&&F!==om,L=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();for(var j=L?this._getTextWidth(""):0,O=0,W=e.length;O<W;++O){var $=e[O],V=this._getTextWidth($);if(_&&V>w)for(;$.length>0;){for(var X=0,Y=$.length,Z="",et=0;X<Y;){var er=X+Y>>>1,en=$.slice(0,er+1),ea=this._getTextWidth(en)+j;ea<=w?(X=er+1,Z=en,et=ea):Y=er}if(Z){if(D){var eo,es=$[Z.length];(eo=(" "===es||"-"===es)&&et<=w?Z.length:Math.max(Z.lastIndexOf(" "),Z.lastIndexOf("-"))+1)>0&&(X=eo,Z=Z.slice(0,X),et=this._getTextWidth(Z))}if(Z=Z.trimRight(),this._addTextLine(Z),n=Math.max(n,et),E+=l,this._shouldHandleEllipsis(E)){this._tryToAddEllipsisToLastLine();break}if(($=($=$.slice(X)).trimLeft()).length>0&&(V=this._getTextWidth($))<=w){this._addTextLine($),E+=l,n=Math.max(n,V);break}}else break}else this._addTextLine($),E+=l,n=Math.max(n,V),this._shouldHandleEllipsis(E)&&O<W-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),x&&E+l>T)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){var t=+this.fontSize(),n=this.lineHeight()*t,l=this.attrs.height,c=this.padding();return!(this.wrap()!==om)||l!==oo&&void 0!==l&&e+n>l-2*c}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=this.padding(),n=this.ellipsis(),l=this.textArr[this.textArr.length-1];l&&n&&(e!==oo&&void 0!==e&&(this._getTextWidth(l.text+"")<e-2*t||(l.text=l.text.slice(0,l.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+""))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!!e&&!!t||super._useBufferCanvas()}};or.Text=oy,oy.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},oy.prototype._strokeFunc=function(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},oy.prototype.className="Text",oy.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,iD._registerNode)(oy),iO.Factory.overWriteSetter(oy,"width",(0,iI.getNumberOrAutoValidator)()),iO.Factory.overWriteSetter(oy,"height",(0,iI.getNumberOrAutoValidator)()),iO.Factory.addGetterSetter(oy,"direction",os),iO.Factory.addGetterSetter(oy,"fontFamily","Arial"),iO.Factory.addGetterSetter(oy,"fontSize",12,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oy,"fontStyle",op),iO.Factory.addGetterSetter(oy,"fontVariant",op),iO.Factory.addGetterSetter(oy,"padding",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oy,"align",ou),iO.Factory.addGetterSetter(oy,"verticalAlign","top"),iO.Factory.addGetterSetter(oy,"lineHeight",1,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oy,"wrap","word"),iO.Factory.addGetterSetter(oy,"ellipsis",!1,(0,iI.getBooleanValidator)()),iO.Factory.addGetterSetter(oy,"letterSpacing",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oy,"text","",(0,iI.getStringValidator)()),iO.Factory.addGetterSetter(oy,"textDecoration","");var o_={};Object.defineProperty(o_,"__esModule",{value:!0}),o_.TextPath=void 0;let ox=ao;var oS="normal";function _fillFunc(e){e.fillText(this.partialText,0,0)}function _strokeFunc(e){e.strokeText(this.partialText,0,0)}let TextPath=class TextPath extends ox.Shape{constructor(e){super(e),this.dummyCanvas=iL.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return aE.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;let t=this.pathLength;return e-1>t?null:aE.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=aE.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),n=this.fill(),l=this.fontSize(),c=this.glyphInfo;"underline"===t&&e.beginPath();for(var y=0;y<c.length;y++){e.save();var _=c[y].p0;e.translate(_.x,_.y),e.rotate(c[y].rotation),this.partialText=c[y].text,e.fillStrokeShape(this),"underline"===t&&(0===y&&e.moveTo(0,l/2+1),e.lineTo(l,l/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=n,e.lineWidth=l/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var n=t[0].p0;e.moveTo(n.x,n.y)}for(var l=0;l<t.length;l++){var c=t[l].p1;e.lineTo(c.x,c.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return iL.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return or.Text.prototype.setText.call(this,e)}_getContextFont(){return or.Text.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var n=t.measureText(e);return t.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;let n=this.letterSpacing(),l=this.align(),c=this.kerningFunc(),y=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0),_=0;"center"===l&&(_=Math.max(0,this.pathLength/2-y/2)),"right"===l&&(_=Math.max(0,this.pathLength-y));let x=(0,or.stringToArray)(this.text()),S=_;for(var w=0;w<x.length;w++){let e=this._getPointAtLength(S);if(!e)return;let t=this._getTextSize(x[w]).width+n;if(" "===x[w]&&"justify"===l){let e=this.text().split(" ").length-1;t+=(this.pathLength-y)/e}let _=this._getPointAtLength(S+t);if(!_)return;let T=aE.Path.getLineLength(e.x,e.y,_.x,_.y),E=0;if(c)try{E=c(x[w-1],x[w])*this.fontSize()}catch{E=0}e.x+=E,_.x+=E,this.textWidth+=E;let F=aE.Path.getPointOnLine(E+T/2,e.x,e.y,_.x,_.y),D=Math.atan2(_.y-e.y,_.x-e.x);this.glyphInfo.push({transposeX:F.x,transposeY:F.y,text:x[w],rotation:D,p0:e,p1:_}),S+=t}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)});for(var t,n,l=e[0]||0,c=e[0]||0,y=e[1]||0,_=e[1]||0,x=0;x<e.length/2;x++)t=e[2*x],n=e[2*x+1],l=Math.min(l,t),c=Math.max(c,t),y=Math.min(y,n),_=Math.max(_,n);var S=this.fontSize();return{x:l-S/2,y:y-S/2,width:c-l+S,height:_-y+S}}destroy(){return iL.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};o_.TextPath=TextPath,TextPath.prototype._fillFunc=_fillFunc,TextPath.prototype._strokeFunc=_strokeFunc,TextPath.prototype._fillFuncHit=_fillFunc,TextPath.prototype._strokeFuncHit=_strokeFunc,TextPath.prototype.className="TextPath",TextPath.prototype._attrsAffectingSize=["text","fontSize","data"],(0,iD._registerNode)(TextPath),iO.Factory.addGetterSetter(TextPath,"data"),iO.Factory.addGetterSetter(TextPath,"fontFamily","Arial"),iO.Factory.addGetterSetter(TextPath,"fontSize",12,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(TextPath,"fontStyle",oS),iO.Factory.addGetterSetter(TextPath,"align","left"),iO.Factory.addGetterSetter(TextPath,"letterSpacing",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(TextPath,"textBaseline","middle"),iO.Factory.addGetterSetter(TextPath,"fontVariant",oS),iO.Factory.addGetterSetter(TextPath,"text",""),iO.Factory.addGetterSetter(TextPath,"textDecoration",null),iO.Factory.addGetterSetter(TextPath,"kerningFunc",null);var ow={};Object.defineProperty(ow,"__esModule",{value:!0}),ow.Transformer=void 0;let ok=am;var oC="tr-konva",oP=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${oC}`).join(" "),oM="nodesRect",oT=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],oE={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};let oR="ontouchstart"in iD.Konva._global;var oF=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function rotateAroundPoint(e,t,n){let l=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),c=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:l,y:c}}let oN=class extends ok.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(oP,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return iL.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return oC+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();let t=e.filter(e=>!e.isAncestorOf(this)||(iL.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1));return this._nodes=e=t,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(e=>{let onChange=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},t=e._attrsAffectingSize.map(e=>e+"Change."+this._getEventNamespace()).join(" ");e.on(t,onChange),e.on(oT.map(e=>e+`.${this._getEventNamespace()}`).join(" "),onChange),e.on(`absoluteTransformChange.${this._getEventNamespace()}`,onChange),this._proxyDrag(e)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,n=>{t=e.getAbsolutePosition(),this.isDragging()||e===this.findOne(".back")||this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!t)return;let l=e.getAbsolutePosition(),c=l.x-t.x,y=l.y-t.y;this.nodes().forEach(t=>{if(t===e||t.isDragging())return;let l=t.getAbsolutePosition();t.setAbsolutePosition({x:l.x+c,y:l.y+y}),t.startDrag(n)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(oM),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(oM,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),n){var l=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),c=e.getAbsoluteScale(n),y=e.getAbsolutePosition(n),_=l.x*c.x-e.offsetX()*c.x,x=l.y*c.y-e.offsetY()*c.y;let S=(iD.Konva.getAngle(e.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI),w={x:y.x+_*Math.cos(S)+x*Math.sin(-S),y:y.y+x*Math.cos(S)+_*Math.sin(S),width:l.width*c.x,height:l.height*c.y,rotation:S};return rotateAroundPoint(w,-iD.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};let e=[];this.nodes().map(t=>{let n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var l=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],c=t.getAbsoluteTransform();l.forEach(function(t){var n=c.point(t);e.push(n)})});let t=new iL.Transform;t.rotate(-iD.Konva.getAngle(this.rotation()));var n=1/0,l=1/0,c=-1/0,y=-1/0;e.forEach(function(e){var _=t.point(e);void 0===n&&(n=c=_.x,l=y=_.y),n=Math.min(n,_.x),l=Math.min(l,_.y),c=Math.max(c,_.x),y=Math.max(y,_.y)}),t.invert();let _=t.point({x:n,y:l});return{x:_.x,y:_.y,width:c-n,height:y-l,rotation:iD.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),oF.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var t=new aZ.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:oR?10:"auto"}),n=this;t.on("mousedown touchstart",function(e){n._handleMouseDown(e)}),t.on("dragstart",e=>{t.stopDrag(),e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),t.on("mouseenter",()=>{var n=function(e,t,n){if("rotater"===e)return n;t+=iL.Util.degToRad(oE[e]||0);var l=(iL.Util.radToDeg(t)%360+360)%360;return iL.Util._inRange(l,337.5,360)||iL.Util._inRange(l,0,22.5)?"ns-resize":iL.Util._inRange(l,22.5,67.5)?"nesw-resize":iL.Util._inRange(l,67.5,112.5)?"ew-resize":iL.Util._inRange(l,112.5,157.5)?"nwse-resize":iL.Util._inRange(l,157.5,202.5)?"ns-resize":iL.Util._inRange(l,202.5,247.5)?"nesw-resize":iL.Util._inRange(l,247.5,292.5)?"ew-resize":iL.Util._inRange(l,292.5,337.5)?"nwse-resize":(iL.Util.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}(e,iD.Konva.getAngle(this.rotation()),this.rotateAnchorCursor());t.getStage().content&&(t.getStage().content.style.cursor=n),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){var e=new ao.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(e,t){var n=t.getParent(),l=n.padding();e.beginPath(),e.rect(-l,-l,t.width()+2*l,t.height()+2*l),e.moveTo(t.width()/2,-l),n.rotateEnabled()&&e.lineTo(t.width()/2,-n.rotateAnchorOffset()*iL.Util._sign(t.height())-l),e.fillStrokeShape(t)},hitFunc:(e,t)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();e.beginPath(),e.rect(-n,-n,t.width()+2*n,t.height()+2*n),e.fillStrokeShape(t)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",e=>{e.cancelBubble=!0}),e.on("dragmove",e=>{e.cancelBubble=!0}),e.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),n=t.width,l=t.height,c=Math.sqrt(Math.pow(n,2)+Math.pow(l,2));this.sin=Math.abs(l/c),this.cos=Math.abs(n/c),"u">typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var y=e.target.getAbsolutePosition(),_=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:_.x-y.x,y:_.y-y.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(t=>{t._fire("transformstart",{evt:e.evt,target:t})})}_handleMouseMove(e){var t,n,l,c=this.findOne("."+this._movingAnchorName),y=c.getStage();y.setPointersPositions(e);let _=y.getPointerPosition(),x={x:_.x-this._anchorDragOffset.x,y:_.y-this._anchorDragOffset.y},S=c.getAbsolutePosition();this.anchorDragBoundFunc()&&(x=this.anchorDragBoundFunc()(S,x,e)),c.setAbsolutePosition(x);let w=c.getAbsolutePosition();if(!(S.x===w.x&&S.y===w.y)){if("rotater"===this._movingAnchorName){var T=this._getNodeRect();t=c.x()-T.width/2;let l=Math.atan2(-(n=-c.y()+T.height/2),t)+Math.PI/2;T.height<0&&(l-=Math.PI);var E=iD.Konva.getAngle(this.rotation());let y=E+l,_=iD.Konva.getAngle(this.rotationSnapTolerance()),x=function(e,t,n){let l=t;for(let c=0;c<e.length;c++){let y=iD.Konva.getAngle(e[c]),_=Math.abs(y-t)%(2*Math.PI);Math.min(_,2*Math.PI-_)<n&&(l=y)}return l}(this.rotationSnaps(),y,_)-T.rotation,S=function(e,t){let n={x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)};return rotateAroundPoint(e,t,n)}(T,x);this._fitNodesInto(S,e);return}var F,D=this.shiftBehavior();F="inverted"===D?this.keepRatio()&&!e.shiftKey:"none"===D?this.keepRatio():this.keepRatio()||e.shiftKey;var L=this.centeredScaling()||e.altKey;if("top-left"===this._movingAnchorName){if(F){var j=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};l=Math.sqrt(Math.pow(j.x-c.x(),2)+Math.pow(j.y-c.y(),2));var O=this.findOne(".top-left").x()>j.x?-1:1,W=this.findOne(".top-left").y()>j.y?-1:1;t=l*this.cos*O,n=l*this.sin*W,this.findOne(".top-left").x(j.x-t),this.findOne(".top-left").y(j.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(c.y());else if("top-right"===this._movingAnchorName){if(F){var j=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};l=Math.sqrt(Math.pow(c.x()-j.x,2)+Math.pow(j.y-c.y(),2));var O=this.findOne(".top-right").x()<j.x?-1:1,W=this.findOne(".top-right").y()>j.y?-1:1;t=l*this.cos*O,n=l*this.sin*W,this.findOne(".top-right").x(j.x+t),this.findOne(".top-right").y(j.y-n)}var $=c.position();this.findOne(".top-left").y($.y),this.findOne(".bottom-right").x($.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(c.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(c.x());else if("bottom-left"===this._movingAnchorName){if(F){var j=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};l=Math.sqrt(Math.pow(j.x-c.x(),2)+Math.pow(c.y()-j.y,2));var O=j.x<c.x()?-1:1,W=c.y()<j.y?-1:1;t=l*this.cos*O,n=l*this.sin*W,c.x(j.x-t),c.y(j.y+n)}$=c.position(),this.findOne(".top-left").x($.x),this.findOne(".bottom-right").y($.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(c.y());else if("bottom-right"===this._movingAnchorName){if(F){var j=L?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};l=Math.sqrt(Math.pow(c.x()-j.x,2)+Math.pow(c.y()-j.y,2));var O=this.findOne(".bottom-right").x()<j.x?-1:1,W=this.findOne(".bottom-right").y()<j.y?-1:1;t=l*this.cos*O,n=l*this.sin*W,this.findOne(".bottom-right").x(j.x+t),this.findOne(".bottom-right").y(j.y+n)}}else console.error(Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var L=this.centeredScaling()||e.altKey;if(L){var V=this.findOne(".top-left"),X=this.findOne(".bottom-right"),Y=V.x(),Z=V.y(),et=this.getWidth()-X.x(),er=this.getHeight()-X.y();X.move({x:-Y,y:-Z}),V.move({x:et,y:er})}var en=this.findOne(".top-left").getAbsolutePosition();t=en.x,n=en.y;var ea=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),eo=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:n,width:ea,height:eo,rotation:iD.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,"u">typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach(t=>{t._fire("transformend",{evt:e,target:t})}),this._movingAnchorName=null}}_fitNodesInto(e,t){var n=this._getNodeRect();if(iL.Util._inRange(e.width,-(2*this.padding())-1,1)||iL.Util._inRange(e.height,-(2*this.padding())-1,1)){this.update();return}let l=this.flipEnabled();var c=new iL.Transform;if(c.rotate(iD.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let t=c.point({x:-(2*this.padding()),y:0});if(e.x+=t.x,e.y+=t.y,e.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,!l){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let t=c.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.width+=2*this.padding(),!l){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let t=c.point({x:0,y:-(2*this.padding())});if(e.x+=t.x,e.y+=t.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!l){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let t=c.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=t.x,this._anchorDragOffset.y-=t.y,e.height+=2*this.padding(),!l){this.update();return}}if(this.boundBoxFunc()){let t=this.boundBoxFunc()(n,e);t?e=t:iL.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let y=new iL.Transform;y.translate(n.x,n.y),y.rotate(n.rotation),y.scale(n.width/1e7,n.height/1e7);let _=new iL.Transform;_.translate(e.x,e.y),_.rotate(e.rotation),_.scale(e.width/1e7,e.height/1e7);let x=_.multiply(y.invert());this._nodes.forEach(e=>{var n;let l=e.getParent().getAbsoluteTransform(),c=e.getTransform().copy();c.translate(e.offsetX(),e.offsetY());let y=new iL.Transform;y.multiply(l.copy().invert()).multiply(x).multiply(l).multiply(c);let _=y.decompose();e.setAttrs(_),this._fire("transform",{evt:t,target:e}),e._fire("transform",{evt:t,target:e}),null===(n=e.getLayer())||void 0===n||n.batchDraw()}),this.rotation(iL.Util._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(iL.Util._getRotation(t.rotation));var n=t.width,l=t.height,c=this.enabledAnchors(),y=this.resizeEnabled(),_=this.padding(),x=this.anchorSize();let S=this.find("._anchor");S.forEach(e=>{e.setAttrs({width:x,height:x,offsetX:x/2,offsetY:x/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:x/2+_,offsetY:x/2+_,visible:y&&c.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:x/2+_,visible:y&&c.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:x/2-_,offsetY:x/2+_,visible:y&&c.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:l/2,offsetX:x/2+_,visible:y&&c.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:l/2,offsetX:x/2-_,visible:y&&c.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:l,offsetX:x/2+_,offsetY:x/2-_,visible:y&&c.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:l,offsetY:x/2-_,visible:y&&c.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:l,offsetX:x/2-_,offsetY:x/2-_,visible:y&&c.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*iL.Util._sign(l)-_,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:l,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let w=this.anchorStyleFunc();w&&S.forEach(e=>{w(e)}),null===(e=this.getLayer())||void 0===e||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ok.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return ij.Node.prototype.toObject.call(this)}clone(e){return ij.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};ow.Transformer=oN,oN.prototype.className="Transformer",(0,iD._registerNode)(oN),iO.Factory.addGetterSetter(oN,"enabledAnchors",oF,function(e){return e instanceof Array||iL.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(e){-1===oF.indexOf(e)&&iL.Util.warn("Unknown anchor name: "+e+". Available names are: "+oF.join(", "))}),e||[]}),iO.Factory.addGetterSetter(oN,"flipEnabled",!0,(0,iI.getBooleanValidator)()),iO.Factory.addGetterSetter(oN,"resizeEnabled",!0),iO.Factory.addGetterSetter(oN,"anchorSize",10,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"rotateEnabled",!0),iO.Factory.addGetterSetter(oN,"rotationSnaps",[]),iO.Factory.addGetterSetter(oN,"rotateAnchorOffset",50,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"rotateAnchorCursor","crosshair"),iO.Factory.addGetterSetter(oN,"rotationSnapTolerance",5,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"borderEnabled",!0),iO.Factory.addGetterSetter(oN,"anchorStroke","rgb(0, 161, 255)"),iO.Factory.addGetterSetter(oN,"anchorStrokeWidth",1,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"anchorFill","white"),iO.Factory.addGetterSetter(oN,"anchorCornerRadius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"borderStroke","rgb(0, 161, 255)"),iO.Factory.addGetterSetter(oN,"borderStrokeWidth",1,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"borderDash"),iO.Factory.addGetterSetter(oN,"keepRatio",!0),iO.Factory.addGetterSetter(oN,"shiftBehavior","default"),iO.Factory.addGetterSetter(oN,"centeredScaling",!1),iO.Factory.addGetterSetter(oN,"ignoreStroke",!1),iO.Factory.addGetterSetter(oN,"padding",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(oN,"node"),iO.Factory.addGetterSetter(oN,"nodes"),iO.Factory.addGetterSetter(oN,"boundBoxFunc"),iO.Factory.addGetterSetter(oN,"anchorDragBoundFunc"),iO.Factory.addGetterSetter(oN,"anchorStyleFunc"),iO.Factory.addGetterSetter(oN,"shouldOverdrawWholeArea",!1),iO.Factory.addGetterSetter(oN,"useSingleNodeRotation",!0),iO.Factory.backCompat(oN,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var oA={};Object.defineProperty(oA,"__esModule",{value:!0}),oA.Wedge=void 0;let oD=ao;let Wedge=class Wedge extends oD.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,iD.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};oA.Wedge=Wedge,Wedge.prototype.className="Wedge",Wedge.prototype._centroid=!0,Wedge.prototype._attrsAffectingSize=["radius"],(0,iD._registerNode)(Wedge),iO.Factory.addGetterSetter(Wedge,"radius",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Wedge,"angle",0,(0,iI.getNumberValidator)()),iO.Factory.addGetterSetter(Wedge,"clockwise",!1),iO.Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var oL={};function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Object.defineProperty(oL,"__esModule",{value:!0}),oL.Blur=void 0;var oj=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],oO=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];oL.Blur=function(e){var t=Math.round(this.blurRadius());t>0&&function(e,t){var n,l,c,y,_,x,S,w,T,E,F,D,L,j,O,W,$,V,X,Y,Z,et,er,en,ea=e.data,eo=e.width,es=e.height,el=t+t+1,eh=eo-1,eu=es-1,ed=t+1,ep=ed*(ed+1)/2,em=new BlurStack,ev=null,eb=em,ey=null,e_=null,ex=oj[t],eS=oO[t];for(c=1;c<el;c++)eb=eb.next=new BlurStack,c===ed&&(ev=eb);for(eb.next=em,S=x=0,l=0;l<es;l++){for(W=$=V=X=w=T=E=F=0,D=ed*(Y=ea[x]),L=ed*(Z=ea[x+1]),j=ed*(et=ea[x+2]),O=ed*(er=ea[x+3]),w+=ep*Y,T+=ep*Z,E+=ep*et,F+=ep*er,eb=em,c=0;c<ed;c++)eb.r=Y,eb.g=Z,eb.b=et,eb.a=er,eb=eb.next;for(c=1;c<ed;c++)y=x+((eh<c?eh:c)<<2),w+=(eb.r=Y=ea[y])*(en=ed-c),T+=(eb.g=Z=ea[y+1])*en,E+=(eb.b=et=ea[y+2])*en,F+=(eb.a=er=ea[y+3])*en,W+=Y,$+=Z,V+=et,X+=er,eb=eb.next;for(ey=em,e_=ev,n=0;n<eo;n++)ea[x+3]=er=F*ex>>eS,0!==er?(er=255/er,ea[x]=(w*ex>>eS)*er,ea[x+1]=(T*ex>>eS)*er,ea[x+2]=(E*ex>>eS)*er):ea[x]=ea[x+1]=ea[x+2]=0,w-=D,T-=L,E-=j,F-=O,D-=ey.r,L-=ey.g,j-=ey.b,O-=ey.a,y=S+((y=n+t+1)<eh?y:eh)<<2,W+=ey.r=ea[y],$+=ey.g=ea[y+1],V+=ey.b=ea[y+2],X+=ey.a=ea[y+3],w+=W,T+=$,E+=V,F+=X,ey=ey.next,D+=Y=e_.r,L+=Z=e_.g,j+=et=e_.b,O+=er=e_.a,W-=Y,$-=Z,V-=et,X-=er,e_=e_.next,x+=4;S+=eo}for(n=0;n<eo;n++){for($=V=X=W=T=E=F=w=0,D=ed*(Y=ea[x=n<<2]),L=ed*(Z=ea[x+1]),j=ed*(et=ea[x+2]),O=ed*(er=ea[x+3]),w+=ep*Y,T+=ep*Z,E+=ep*et,F+=ep*er,eb=em,c=0;c<ed;c++)eb.r=Y,eb.g=Z,eb.b=et,eb.a=er,eb=eb.next;for(_=eo,c=1;c<=t;c++)x=_+n<<2,w+=(eb.r=Y=ea[x])*(en=ed-c),T+=(eb.g=Z=ea[x+1])*en,E+=(eb.b=et=ea[x+2])*en,F+=(eb.a=er=ea[x+3])*en,W+=Y,$+=Z,V+=et,X+=er,eb=eb.next,c<eu&&(_+=eo);for(x=n,ey=em,e_=ev,l=0;l<es;l++)ea[(y=x<<2)+3]=er=F*ex>>eS,er>0?(er=255/er,ea[y]=(w*ex>>eS)*er,ea[y+1]=(T*ex>>eS)*er,ea[y+2]=(E*ex>>eS)*er):ea[y]=ea[y+1]=ea[y+2]=0,w-=D,T-=L,E-=j,F-=O,D-=ey.r,L-=ey.g,j-=ey.b,O-=ey.a,y=n+((y=l+ed)<eu?y:eu)*eo<<2,w+=W+=ey.r=ea[y],T+=$+=ey.g=ea[y+1],E+=V+=ey.b=ea[y+2],F+=X+=ey.a=ea[y+3],ey=ey.next,D+=Y=e_.r,L+=Z=e_.g,j+=et=e_.b,O+=er=e_.a,W-=Y,$-=Z,V-=et,X-=er,e_=e_.next,x+=eo}}(e,t)},iO.Factory.addGetterSetter(ij.Node,"blurRadius",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oI={};Object.defineProperty(oI,"__esModule",{value:!0}),oI.Brighten=void 0,oI.Brighten=function(e){var t,n=255*this.brightness(),l=e.data,c=l.length;for(t=0;t<c;t+=4)l[t]+=n,l[t+1]+=n,l[t+2]+=n},iO.Factory.addGetterSetter(ij.Node,"brightness",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oz={};Object.defineProperty(oz,"__esModule",{value:!0}),oz.Contrast=void 0,oz.Contrast=function(e){var t,n=Math.pow((this.contrast()+100)/100,2),l=e.data,c=l.length,y=150,_=150,x=150;for(t=0;t<c;t+=4)y=l[t],_=l[t+1],x=l[t+2],y/=255,y-=.5,y*=n,y+=.5,y*=255,_/=255,_-=.5,_*=n,_+=.5,_*=255,x/=255,x-=.5,x*=n,x+=.5,x*=255,y=y<0?0:y>255?255:y,_=_<0?0:_>255?255:_,x=x<0?0:x>255?255:x,l[t]=y,l[t+1]=_,l[t+2]=x},iO.Factory.addGetterSetter(ij.Node,"contrast",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oW={};Object.defineProperty(oW,"__esModule",{value:!0}),oW.Emboss=void 0,oW.Emboss=function(e){var t=10*this.embossStrength(),n=255*this.embossWhiteLevel(),l=this.embossDirection(),c=this.embossBlend(),y=0,_=0,x=e.data,S=e.width,w=e.height,T=4*S,E=w;switch(l){case"top-left":y=-1,_=-1;break;case"top":y=-1,_=0;break;case"top-right":y=-1,_=1;break;case"right":y=0,_=1;break;case"bottom-right":y=1,_=1;break;case"bottom":y=1,_=0;break;case"bottom-left":y=1,_=-1;break;case"left":y=0,_=-1;break;default:iL.Util.error("Unknown emboss direction: "+l)}do{var F=(E-1)*T,D=y;E+D<1&&(D=0),E+D>w&&(D=0);var L=(E-1+D)*S*4,j=S;do{var O=F+(j-1)*4,W=_;j+W<1&&(W=0),j+W>S&&(W=0);var $=L+(j-1+W)*4,V=x[O]-x[$],X=x[O+1]-x[$+1],Y=x[O+2]-x[$+2],Z=V,et=Z>0?Z:-Z,er=Y>0?Y:-Y;if((X>0?X:-X)>et&&(Z=X),er>et&&(Z=Y),Z*=t,c){var en=x[O]+Z,ea=x[O+1]+Z,eo=x[O+2]+Z;x[O]=en>255?255:en<0?0:en,x[O+1]=ea>255?255:ea<0?0:ea,x[O+2]=eo>255?255:eo<0?0:eo}else{var es=n-Z;es<0?es=0:es>255&&(es=255),x[O]=x[O+1]=x[O+2]=es}}while(--j)}while(--E)},iO.Factory.addGetterSetter(ij.Node,"embossStrength",.5,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"embossWhiteLevel",.5,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"embossDirection","top-left",null,iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"embossBlend",!1,null,iO.Factory.afterSetFilter);var o$={};function remap(e,t,n,l,c){var y=n-t,_=c-l;return 0===y?l+_/2:0===_?l:_*((e-t)/y)+l}Object.defineProperty(o$,"__esModule",{value:!0}),o$.Enhance=void 0,o$.Enhance=function(e){var t,n,l,c,y,_,x,S,w,T,E,F,D,L=e.data,j=L.length,O=L[0],W=O,$=L[1],V=$,X=L[2],Y=X,Z=this.enhance();if(0!==Z){for(D=0;D<j;D+=4)(T=L[D+0])<O?O=T:T>W&&(W=T),(E=L[D+1])<$?$=E:E>V&&(V=E),(F=L[D+2])<X?X=F:F>Y&&(Y=F);for(W===O&&(W=255,O=0),V===$&&(V=255,$=0),Y===X&&(Y=255,X=0),Z>0?(n=W+Z*(255-W),l=O-Z*(O-0),y=V+Z*(255-V),_=$-Z*($-0),S=Y+Z*(255-Y),w=X-Z*(X-0)):(t=(W+O)*.5,n=W+Z*(W-t),l=O+Z*(O-t),c=(V+$)*.5,y=V+Z*(V-c),_=$+Z*($-c),x=(Y+X)*.5,S=Y+Z*(Y-x),w=X+Z*(X-x)),D=0;D<j;D+=4)L[D+0]=remap(L[D+0],O,W,l,n),L[D+1]=remap(L[D+1],$,V,_,y),L[D+2]=remap(L[D+2],X,Y,w,S)}},iO.Factory.addGetterSetter(ij.Node,"enhance",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oG={};Object.defineProperty(oG,"__esModule",{value:!0}),oG.Grayscale=void 0,oG.Grayscale=function(e){var t,n,l=e.data,c=l.length;for(t=0;t<c;t+=4)n=.34*l[t]+.5*l[t+1]+.16*l[t+2],l[t]=n,l[t+1]=n,l[t+2]=n};var oU={};Object.defineProperty(oU,"__esModule",{value:!0}),oU.HSL=void 0,iO.Factory.addGetterSetter(ij.Node,"hue",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"saturation",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"luminance",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),oU.HSL=function(e){var t,n,l,c,y,_=e.data,x=_.length,S=Math.pow(2,this.saturation()),w=Math.abs(this.hue()+360)%360,T=127*this.luminance(),E=1*S*Math.cos(w*Math.PI/180),F=1*S*Math.sin(w*Math.PI/180),D=.299+.701*E+.167*F,L=.587-.587*E+.33*F,j=.114-.114*E-.497*F,O=.299-.299*E-.328*F,W=.587+.413*E+.035*F,$=.114-.114*E+.293*F,V=.299-.3*E+1.25*F,X=.587-.586*E-1.05*F,Y=.114+.886*E-.2*F;for(t=0;t<x;t+=4)n=_[t+0],l=_[t+1],c=_[t+2],y=_[t+3],_[t+0]=D*n+L*l+j*c+T,_[t+1]=O*n+W*l+$*c+T,_[t+2]=V*n+X*l+Y*c+T,_[t+3]=y};var oB={};Object.defineProperty(oB,"__esModule",{value:!0}),oB.HSV=void 0,oB.HSV=function(e){var t,n,l,c,y,_=e.data,x=_.length,S=Math.pow(2,this.value()),w=Math.pow(2,this.saturation()),T=Math.abs(this.hue()+360)%360,E=S*w*Math.cos(T*Math.PI/180),F=S*w*Math.sin(T*Math.PI/180),D=.299*S+.701*E+.167*F,L=.587*S-.587*E+.33*F,j=.114*S-.114*E-.497*F,O=.299*S-.299*E-.328*F,W=.587*S+.413*E+.035*F,$=.114*S-.114*E+.293*F,V=.299*S-.3*E+1.25*F,X=.587*S-.586*E-1.05*F,Y=.114*S+.886*E-.2*F;for(t=0;t<x;t+=4)n=_[t+0],l=_[t+1],c=_[t+2],y=_[t+3],_[t+0]=D*n+L*l+j*c,_[t+1]=O*n+W*l+$*c,_[t+2]=V*n+X*l+Y*c,_[t+3]=y},iO.Factory.addGetterSetter(ij.Node,"hue",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"saturation",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"value",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oH={};Object.defineProperty(oH,"__esModule",{value:!0}),oH.Invert=void 0,oH.Invert=function(e){var t,n=e.data,l=n.length;for(t=0;t<l;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]};var oV={};Object.defineProperty(oV,"__esModule",{value:!0}),oV.Kaleidoscope=void 0;var ToPolar=function(e,t,n){var l,c,y,_,x=e.data,S=t.data,w=e.width,T=e.height,E=n.polarCenterX||w/2,F=n.polarCenterY||T/2,D=0,L=0,j=0,O=0,W=Math.sqrt(E*E+F*F);W=(_=Math.sqrt((c=w-E)*c+(y=T-F)*y))>W?_:W;var $,V,X,Y,Z=360/w*Math.PI/180;for(V=0;V<w;V+=1)for(X=Math.sin(V*Z),Y=Math.cos(V*Z),$=0;$<T;$+=1)c=Math.floor(E+W*$/T*Y),D=x[(l=((y=Math.floor(F+W*$/T*X))*w+c)*4)+0],L=x[l+1],j=x[l+2],O=x[l+3],S[(l=(V+$*w)*4)+0]=D,S[l+1]=L,S[l+2]=j,S[l+3]=O},FromPolar=function(e,t,n){var l,c,y,_,x,S,w=e.data,T=t.data,E=e.width,F=e.height,D=n.polarCenterX||E/2,L=n.polarCenterY||F/2,j=0,O=0,W=0,$=0,V=Math.sqrt(D*D+L*L);V=(S=Math.sqrt((c=E-D)*c+(y=F-L)*y))>V?S:V;var X,Y,Z=n.polarRotation||0;for(c=0;c<E;c+=1)for(y=0;y<F;y+=1)X=Math.sqrt((_=c-D)*_+(x=y-L)*x)*F/V,Y=Math.floor((180*Math.atan2(x,_)/Math.PI+360+Z)%360*E/360),j=w[(l=(Math.floor(X)*E+Y)*4)+0],O=w[l+1],W=w[l+2],$=w[l+3],T[(l=(y*E+c)*4)+0]=j,T[l+1]=O,T[l+2]=W,T[l+3]=$};oV.Kaleidoscope=function(e){var t,n,l,c,y,_,x,S,w,T,E=e.width,F=e.height,D=Math.round(this.kaleidoscopePower()),L=Math.floor(E*(Math.round(this.kaleidoscopeAngle())%360)/360);if(!(D<1)){var j=iL.Util.createCanvasElement();j.width=E,j.height=F;var O=j.getContext("2d").getImageData(0,0,E,F);iL.Util.releaseCanvas(j),ToPolar(e,O,{polarCenterX:E/2,polarCenterY:F/2});for(var W=E/Math.pow(2,D);W<=8;)W*=2,D-=1;var $=W=Math.ceil(W),V=0,X=$,Y=1;for(L+W>E&&(V=$,X=0,Y=-1),n=0;n<F;n+=1)for(t=V;t!==X;t+=Y)l=Math.round(t+L)%E,w=(E*n+l)*4,y=O.data[w+0],_=O.data[w+1],x=O.data[w+2],S=O.data[w+3],T=(E*n+t)*4,O.data[T+0]=y,O.data[T+1]=_,O.data[T+2]=x,O.data[T+3]=S;for(n=0;n<F;n+=1)for($=Math.floor(W),c=0;c<D;c+=1){for(t=0;t<$+1;t+=1)w=(E*n+t)*4,y=O.data[w+0],_=O.data[w+1],x=O.data[w+2],S=O.data[w+3],T=(E*n+2*$-t-1)*4,O.data[T+0]=y,O.data[T+1]=_,O.data[T+2]=x,O.data[T+3]=S;$*=2}FromPolar(O,e,{polarRotation:0})}},iO.Factory.addGetterSetter(ij.Node,"kaleidoscopePower",2,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"kaleidoscopeAngle",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oq={};function pixelAt(e,t,n){var l=(n*e.width+t)*4,c=[];return c.push(e.data[l++],e.data[l++],e.data[l++],e.data[l++]),c}function rgbDistance(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}Object.defineProperty(oq,"__esModule",{value:!0}),oq.Mask=void 0,oq.Mask=function(e){var t=function(e,t){var n=pixelAt(e,0,0),l=pixelAt(e,e.width-1,0),c=pixelAt(e,0,e.height-1),y=pixelAt(e,e.width-1,e.height-1),_=t||10;if(rgbDistance(n,l)<_&&rgbDistance(l,y)<_&&rgbDistance(y,c)<_&&rgbDistance(c,n)<_){for(var x=function(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([l,n,y,c]),S=[],w=0;w<e.width*e.height;w++){var T=rgbDistance(x,[e.data[4*w],e.data[4*w+1],e.data[4*w+2]]);S[w]=T<_?0:255}return S}}(e,this.threshold());return t&&(t=function(e,t,n){for(var l=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],c=Math.round(Math.sqrt(l.length)),y=Math.floor(c/2),_=[],x=0;x<n;x++)for(var S=0;S<t;S++){for(var w=x*t+S,T=0,E=0;E<c;E++)for(var F=0;F<c;F++){var D=x+E-y,L=S+F-y;if(D>=0&&D<n&&L>=0&&L<t){var j=D*t+L,O=l[E*c+F];T+=e[j]*O}}_[w]=T}return _}(t=function(e,t,n){for(var l=[1,1,1,1,1,1,1,1,1],c=Math.round(Math.sqrt(l.length)),y=Math.floor(c/2),_=[],x=0;x<n;x++)for(var S=0;S<t;S++){for(var w=x*t+S,T=0,E=0;E<c;E++)for(var F=0;F<c;F++){var D=x+E-y,L=S+F-y;if(D>=0&&D<n&&L>=0&&L<t){var j=D*t+L,O=l[E*c+F];T+=e[j]*O}}_[w]=T>=1020?255:0}return _}(t=function(e,t,n){for(var l=[1,1,1,1,0,1,1,1,1],c=Math.round(Math.sqrt(l.length)),y=Math.floor(c/2),_=[],x=0;x<n;x++)for(var S=0;S<t;S++){for(var w=x*t+S,T=0,E=0;E<c;E++)for(var F=0;F<c;F++){var D=x+E-y,L=S+F-y;if(D>=0&&D<n&&L>=0&&L<t){var j=D*t+L,O=l[E*c+F];T+=e[j]*O}}_[w]=2040===T?255:0}return _}(t,e.width,e.height),e.width,e.height),e.width,e.height),function(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}(e,t)),e},iO.Factory.addGetterSetter(ij.Node,"threshold",0,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oK={};Object.defineProperty(oK,"__esModule",{value:!0}),oK.Noise=void 0,oK.Noise=function(e){var t,n=255*this.noise(),l=e.data,c=l.length,y=n/2;for(t=0;t<c;t+=4)l[t+0]+=y-2*y*Math.random(),l[t+1]+=y-2*y*Math.random(),l[t+2]+=y-2*y*Math.random()},iO.Factory.addGetterSetter(ij.Node,"noise",.2,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oX={};Object.defineProperty(oX,"__esModule",{value:!0}),oX.Pixelate=void 0,oX.Pixelate=function(e){var t,n,l,c,y,_,x,S,w,T,E,F,D,L,j=Math.ceil(this.pixelSize()),O=e.width,W=e.height,$=Math.ceil(O/j),V=Math.ceil(W/j),X=e.data;if(j<=0){iL.Util.error("pixelSize value can not be <= 0");return}for(F=0;F<$;F+=1)for(D=0;D<V;D+=1){for(c=0,y=0,_=0,x=0,w=(S=F*j)+j,E=(T=D*j)+j,L=0,t=S;t<w;t+=1)if(!(t>=O))for(n=T;n<E;n+=1)n>=W||(c+=X[(l=(O*n+t)*4)+0],y+=X[l+1],_+=X[l+2],x+=X[l+3],L+=1);for(c/=L,y/=L,_/=L,x/=L,t=S;t<w;t+=1)if(!(t>=O))for(n=T;n<E;n+=1)n>=W||(X[(l=(O*n+t)*4)+0]=c,X[l+1]=y,X[l+2]=_,X[l+3]=x)}},iO.Factory.addGetterSetter(ij.Node,"pixelSize",8,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oY={};Object.defineProperty(oY,"__esModule",{value:!0}),oY.Posterize=void 0,oY.Posterize=function(e){var t,n=Math.round(254*this.levels())+1,l=e.data,c=l.length,y=255/n;for(t=0;t<c;t+=1)l[t]=Math.floor(l[t]/y)*y},iO.Factory.addGetterSetter(ij.Node,"levels",.5,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter);var oQ={};Object.defineProperty(oQ,"__esModule",{value:!0}),oQ.RGB=void 0,oQ.RGB=function(e){var t,n,l=e.data,c=l.length,y=this.red(),_=this.green(),x=this.blue();for(t=0;t<c;t+=4)n=(.34*l[t]+.5*l[t+1]+.16*l[t+2])/255,l[t]=n*y,l[t+1]=n*_,l[t+2]=n*x,l[t+3]=l[t+3]},iO.Factory.addGetterSetter(ij.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),iO.Factory.addGetterSetter(ij.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),iO.Factory.addGetterSetter(ij.Node,"blue",0,iI.RGBComponent,iO.Factory.afterSetFilter);var oZ={};Object.defineProperty(oZ,"__esModule",{value:!0}),oZ.RGBA=void 0,oZ.RGBA=function(e){var t,n,l=e.data,c=l.length,y=this.red(),_=this.green(),x=this.blue(),S=this.alpha();for(t=0;t<c;t+=4)n=1-S,l[t]=y*S+l[t]*n,l[t+1]=_*S+l[t+1]*n,l[t+2]=x*S+l[t+2]*n},iO.Factory.addGetterSetter(ij.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),iO.Factory.addGetterSetter(ij.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),iO.Factory.addGetterSetter(ij.Node,"blue",0,iI.RGBComponent,iO.Factory.afterSetFilter),iO.Factory.addGetterSetter(ij.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var oJ={};Object.defineProperty(oJ,"__esModule",{value:!0}),oJ.Sepia=void 0,oJ.Sepia=function(e){var t,n,l,c,y=e.data,_=y.length;for(t=0;t<_;t+=4)n=y[t+0],l=y[t+1],c=y[t+2],y[t+0]=Math.min(255,.393*n+.769*l+.189*c),y[t+1]=Math.min(255,.349*n+.686*l+.168*c),y[t+2]=Math.min(255,.272*n+.534*l+.131*c)};var o0={};Object.defineProperty(o0,"__esModule",{value:!0}),o0.Solarize=void 0,o0.Solarize=function(e){var t=e.data,n=e.width,l=e.height,c=4*n,y=l;do{var _=(y-1)*c,x=n;do{var S=_+(x-1)*4,w=t[S],T=t[S+1],E=t[S+2];w>127&&(w=255-w),T>127&&(T=255-T),E>127&&(E=255-E),t[S]=w,t[S+1]=T,t[S+2]=E}while(--x)}while(--y)};var o1={};Object.defineProperty(o1,"__esModule",{value:!0}),o1.Threshold=void 0,o1.Threshold=function(e){var t,n=255*this.threshold(),l=e.data,c=l.length;for(t=0;t<c;t+=1)l[t]=l[t]<n?0:255},iO.Factory.addGetterSetter(ij.Node,"threshold",.5,(0,iI.getNumberValidator)(),iO.Factory.afterSetFilter),Object.defineProperty(iN,"__esModule",{value:!0}),iN.Konva=void 0,iN.Konva=iA.Konva.Util._assign(iA.Konva,{Arc:aS.Arc,Arrow:aC.Arrow,Circle:aD.Circle,Ellipse:aO.Ellipse,Image:az.Image,Label:aG.Label,Tag:aG.Tag,Line:aP.Line,Path:aE.Path,Rect:aZ.Rect,RegularPolygon:a1.RegularPolygon,Ring:a3.Ring,Sprite:a8.Sprite,Star:a7.Star,Text:or.Text,TextPath:o_.TextPath,Transformer:ow.Transformer,Wedge:oA.Wedge,Filters:{Blur:oL.Blur,Brighten:oI.Brighten,Contrast:oz.Contrast,Emboss:oW.Emboss,Enhance:o$.Enhance,Grayscale:oG.Grayscale,HSL:oU.HSL,HSV:oB.HSV,Invert:oH.Invert,Kaleidoscope:oV.Kaleidoscope,Mask:oq.Mask,Noise:oK.Noise,Pixelate:oX.Pixelate,Posterize:oY.Posterize,RGB:oQ.RGB,RGBA:oZ.RGBA,Sepia:oJ.Sepia,Solarize:o0.Solarize,Threshold:o1.Threshold}}),Object.defineProperty(iF.exports,"__esModule",{value:!0}),iF.exports=iN.Konva;var o5={exports:{}};Object.defineProperty(c=o5.exports,"__esModule",{value:!0}),c.Konva=void 0,Object.defineProperty(c,"Konva",{enumerable:!0,get:function(){return iA.Konva}}),o5.exports=iA.Konva;var o3=o5.exports;let o4=getDefaultExportFromCjs(o3);var o6={exports:{}},o8={exports:{}},o9={};o6.exports=(D||(D=1,F=function(e){var t,n,l,c,y,_={},x=(E||(E=1,o8.exports=(T||(T=1,function(e){function f(e,t){var n=e.length;for(e.push(t);0<n;){var l=n-1>>>1,c=e[l];if(0<g(c,t))e[l]=t,e[n]=c,n=l;else break}}function h2(e){return 0===e.length?null:e[0]}function k(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var l=0,c=e.length,y=c>>>1;l<y;){var _=2*(l+1)-1,x=e[_],S=_+1,w=e[S];if(0>g(x,n))S<c&&0>g(w,x)?(e[l]=w,e[S]=n,l=S):(e[l]=x,e[_]=n,l=_);else if(S<c&&0>g(w,n))e[l]=w,e[S]=n,l=S;else break}}return t}function g(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var t,n=performance;e.unstable_now=function(){return n.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var y=[],_=[],x=1,S=null,w=3,T=!1,E=!1,F=!1,D="function"==typeof setTimeout?setTimeout:null,L="function"==typeof clearTimeout?clearTimeout:null,j="u">typeof setImmediate?setImmediate:null;function G(e){for(var t=h2(_);null!==t;){if(null===t.callback)k(_);else if(t.startTime<=e)k(_),t.sortIndex=t.expirationTime,f(y,t);else break;t=h2(_)}}function H(e){if(F=!1,G(e),!E){if(null!==h2(y))E=!0,I(J);else{var t=h2(_);null!==t&&K(H,t.startTime-e)}}}function J(t,n){E=!1,F&&(F=!1,L($),$=-1),T=!0;var l=w;try{for(G(n),S=h2(y);null!==S&&(!(S.expirationTime>n)||t&&!M());){var c=S.callback;if("function"==typeof c){S.callback=null,w=S.priorityLevel;var x=c(S.expirationTime<=n);n=e.unstable_now(),"function"==typeof x?S.callback=x:S===h2(y)&&k(y),G(n)}else k(y);S=h2(y)}if(null!==S)var D=!0;else{var j=h2(_);null!==j&&K(H,j.startTime-n),D=!1}return D}finally{S=null,w=l,T=!1}}"u">typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var O=!1,W=null,$=-1,V=5,X=-1;function M(){return!(e.unstable_now()-X<V)}function R(){if(null!==W){var n=e.unstable_now();X=n;var l=!0;try{l=W(!0,n)}finally{l?t():(O=!1,W=null)}}else O=!1}if("function"==typeof j)t=function(){j(R)};else if("u">typeof MessageChannel){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=R,t=function(){Z.postMessage(null)}}else t=function(){D(R,0)};function I(e){W=e,O||(O=!0,t())}function K(t,n){$=D(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){E||T||(E=!0,I(J))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return h2(y)},e.unstable_next=function(e){switch(w){case 1:case 2:case 3:var t=3;break;default:t=w}var n=w;w=t;try{return e()}finally{w=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=w;w=e;try{return t()}finally{w=n}},e.unstable_scheduleCallback=function(t,n,l){var c=e.unstable_now();switch(l="object"==typeof l&&null!==l&&"number"==typeof(l=l.delay)&&0<l?c+l:c,t){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=l+S,t={id:x++,callback:n,priorityLevel:t,startTime:l,expirationTime:S,sortIndex:-1},l>c?(t.sortIndex=l,f(_,t),null===h2(y)&&t===h2(_)&&(F?(L($),$=-1):F=!0,K(H,l-c))):(t.sortIndex=S,f(y,t),E||T||(E=!0,I(J))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(e){var t=w;return function(){var n=w;w=t;try{return e.apply(this,arguments)}finally{w=n}}}}(o9)),o9)),o8.exports),S=Object.assign;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),D=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),V=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),en=Symbol.for("react.offscreen"),ea=Symbol.iterator;function ta(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ea&&e[ea]||e["@@iterator"])?e:null}function ua(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case L:return"Fragment";case D:return"Portal";case O:return"Profiler";case j:return"StrictMode";case Y:return"Suspense";case Z:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case V:return(e.displayName||"Context")+".Consumer";case $:return(e._context.displayName||"Context")+".Provider";case X:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case et:return null!==(t=e.displayName||null)?t:ua(e.type)||"Memo";case er:t=e._payload,e=e._init;try{return ua(e(t))}catch{}}return null}function wa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 4098&(t=e).flags&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function xa(e){if(wa(e)!==e)throw Error(m(188))}function ya(e){var t=e.alternate;if(!t){if(null===(t=wa(e)))throw Error(m(188));return t!==e?null:e}for(var n=e,l=t;;){var c=n.return;if(null===c)break;var y=c.alternate;if(null===y){if(null!==(l=c.return)){n=l;continue}break}if(c.child===y.child){for(y=c.child;y;){if(y===n)return xa(c),e;if(y===l)return xa(c),t;y=y.sibling}throw Error(m(188))}if(n.return!==l.return)n=c,l=y;else{for(var _=!1,x=c.child;x;){if(x===n){_=!0,n=c,l=y;break}if(x===l){_=!0,l=c,n=y;break}x=x.sibling}if(!_){for(x=y.child;x;){if(x===n){_=!0,n=y,l=c;break}if(x===l){_=!0,l=y,n=c;break}x=x.sibling}if(!_)throw Error(m(189))}}if(n.alternate!==l)throw Error(m(190))}if(3!==n.tag)throw Error(m(188));return n.stateNode.current===n?e:t}function Aa(e){return null!==(e=ya(e))?function Ba(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ba(e);if(null!==t)return t;e=e.sibling}return null}(e):null}var eo,es=Array.isArray,el=e.getPublicInstance,eh=e.getRootHostContext,eu=e.getChildHostContext,ed=e.prepareForCommit,ep=e.resetAfterCommit,em=e.createInstance,ev=e.appendInitialChild,eb=e.finalizeInitialChildren,ey=e.prepareUpdate,e_=e.shouldSetTextContent,ex=e.createTextInstance,eS=e.scheduleTimeout,ew=e.cancelTimeout,ek=e.noTimeout,eC=e.isPrimaryRenderer,eP=e.supportsMutation,eM=e.supportsPersistence,eT=e.supportsHydration,eE=e.getInstanceFromNode,eR=e.preparePortalMount,eF=e.getCurrentEventPriority,eN=e.detachDeletedInstance,eA=e.supportsMicrotasks,eD=e.scheduleMicrotask,eL=e.supportsTestSelectors,ej=e.findFiberRoot,eO=e.getBoundingRect,eI=e.getTextContent,ez=e.isHiddenSubtree,eW=e.matchAccessibilityRole,e$=e.setFocusIfFocusable,eG=e.setupIntersectionObserver,eU=e.appendChild,eB=e.appendChildToContainer,eH=e.commitTextUpdate,eV=e.commitMount,eq=e.commitUpdate,eK=e.insertBefore,eX=e.insertInContainerBefore,eY=e.removeChild,eQ=e.removeChildFromContainer,eZ=e.resetTextContent,eJ=e.hideInstance,e0=e.hideTextInstance,e1=e.unhideInstance,e2=e.unhideTextInstance,e3=e.clearContainer,e6=e.cloneInstance,e8=e.createContainerChildSet,e9=e.appendChildToContainerChildSet,e7=e.finalizeContainerChildren,tt=e.replaceContainerChildren,tr=e.cloneHiddenInstance,tn=e.cloneHiddenTextInstance,ti=e.canHydrateInstance,to=e.canHydrateTextInstance,ts=e.canHydrateSuspenseInstance,tl=e.isSuspenseInstancePending,th=e.isSuspenseInstanceFallback,tu=e.getSuspenseInstanceFallbackErrorDetails,tc=e.registerSuspenseInstanceRetry,tp=e.getNextHydratableSibling,tg=e.getFirstHydratableChild,tm=e.getFirstHydratableChildWithinContainer,tv=e.getFirstHydratableChildWithinSuspenseInstance,tb=e.hydrateInstance,ty=e.hydrateTextInstance,t_=e.hydrateSuspenseInstance,tx=e.getNextHydratableInstanceAfterSuspenseInstance,tS=e.commitHydratedContainer,tw=e.commitHydratedSuspenseInstance,tk=e.clearSuspenseBoundary,tC=e.clearSuspenseBoundaryFromContainer,tP=e.shouldDeleteUnhydratedTailInstances,tM=e.didNotMatchHydratedContainerTextInstance,tT=e.didNotMatchHydratedTextInstance;function cc(e){if(void 0===eo)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);eo=t&&t[1]||""}return`
`+eo+e}var tE=!1;function ec(e,t){if(!e||tE)return"";tE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var l=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){l=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){l=e}e()}}catch(t){if(t&&l&&"string"==typeof t.stack){for(var c=t.stack.split(`
`),y=l.stack.split(`
`),_=c.length-1,x=y.length-1;1<=_&&0<=x&&c[_]!==y[x];)x--;for(;1<=_&&0<=x;_--,x--)if(c[_]!==y[x]){if(1!==_||1!==x)do if(_--,0>--x||c[_]!==y[x]){var S=`
`+c[_].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=_&&0<=x);break}}}finally{tE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cc(e):""}var tR=Object.prototype.hasOwnProperty,tF=[],tN=-1;function ic(e){return{current:e}}function q(e){0>tN||(e.current=tF[tN],tF[tN]=null,tN--)}function v(e,t){tF[++tN]=e.current,e.current=t}var tA={},tD=ic(tA),tL=ic(!1),tj=tA;function lc(e,t){var n=e.type.contextTypes;if(!n)return tA;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c,y={};for(c in n)y[c]=t[c];return l&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=y),y}function A(e){return null!=(e=e.childContextTypes)}function mc(){q(tL),q(tD)}function nc(e,t,n){if(tD.current!==tA)throw Error(m(168));v(tD,t),v(tL,n)}function oc(e,t,n){var l=e.stateNode;if(t=t.childContextTypes,"function"!=typeof l.getChildContext)return n;for(var c in l=l.getChildContext())if(!(c in t))throw Error(m(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ua(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",c));return S({},n,l)}function pc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tA,tj=tD.current,v(tD,e),v(tL,tL.current),!0}function rc(e,t,n){var l=e.stateNode;if(!l)throw Error(m(169));n?(e=oc(e,t,tj),l.__reactInternalMemoizedMergedChildContext=e,q(tL),q(tD),v(tD,e)):q(tL),v(tL,n)}var tO=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(tI(e)/tz|0)|0},tI=Math.log,tz=Math.LN2,tW=64,t$=4194304;function yc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zc(e,t){var n=e.pendingLanes;if(0===n)return 0;var l=0,c=e.suspendedLanes,y=e.pingedLanes,_=268435455&n;if(0!==_){var x=_&~c;0!==x?l=yc(x):0!=(y&=_)&&(l=yc(y))}else 0!=(_=n&~c)?l=yc(_):0!==y&&(l=yc(y));if(0===l)return 0;if(0!==t&&t!==l&&!(t&c)&&((c=l&-l)>=(y=t&-t)||16===c&&(4194240&y)!=0))return t;if(4&l&&(l|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=l;0<t;)c=1<<(n=31-tO(t)),l|=e[n],t&=~c;return l}function Cc(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Dc(){var e=tW;return 4194240&(tW<<=1)||(tW=64),e}function Ec(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fc(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-tO(t)]=n}function Hc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-tO(n),c=1<<l;c&t|e[l]&t&&(e[l]|=t),n&=~c}}var tG=0;function Ic(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var tU=x.unstable_scheduleCallback,tB=x.unstable_cancelCallback,tH=x.unstable_shouldYield,tV=x.unstable_requestPaint,tq=x.unstable_now,tK=x.unstable_ImmediatePriority,tX=x.unstable_UserBlockingPriority,tY=x.unstable_NormalPriority,tQ=x.unstable_IdlePriority,tZ=null,tJ=null,t0="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t1=null,t2=!1,t3=!1;function Zc(e){null===t1?t1=[e]:t1.push(e)}function ad(){if(!t3&&null!==t1){t3=!0;var e=0,t=tG;try{var n=t1;for(tG=1;e<n.length;e++){var l=n[e];do l=l(!0);while(null!==l)}t1=null,t2=!1}catch(t){throw null!==t1&&(t1=t1.slice(e+1)),tU(tK,ad),t}finally{tG=t,t3=!1}}return null}var t6=[],t8=0,t9=null,t7=0,rt=[],rr=0,rn=null,ri=1,ra="";function kd(e,t){t6[t8++]=t7,t6[t8++]=t9,t9=e,t7=t}function ld(e,t,n){rt[rr++]=ri,rt[rr++]=ra,rt[rr++]=rn,rn=e;var l=ri;e=ra;var c=32-tO(l)-1;l&=~(1<<c),n+=1;var y=32-tO(t)+c;if(30<y){var _=c-c%5;y=(l&(1<<_)-1).toString(32),l>>=_,c-=_,ri=1<<32-tO(t)+c|n<<c|l,ra=y+e}else ri=1<<y|n<<c|l,ra=e}function md(e){null!==e.return&&(kd(e,1),ld(e,1,0))}function nd(e){for(;e===t9;)t9=t6[--t8],t6[t8]=null,t7=t6[--t8],t6[t8]=null;for(;e===rn;)rn=rt[--rr],rt[rr]=null,ra=rt[--rr],rt[rr]=null,ri=rt[--rr],rt[rr]=null}var ro=null,rs=null,rl=!1,ru=!1,rd=null;function sd(e,t){var n=td(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ud(e,t){switch(e.tag){case 5:return null!==(t=ti(t,e.type,e.pendingProps))&&(e.stateNode=t,ro=e,rs=tg(t),!0);case 6:return null!==(t=to(t,e.pendingProps))&&(e.stateNode=t,ro=e,rs=null,!0);case 13:if(null!==(t=ts(t))){var n=null!==rn?{id:ri,overflow:ra}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=td(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ro=e,rs=null,!0}return!1;default:return!1}}function vd(e){return(1&e.mode)!=0&&(128&e.flags)==0}function wd(e){if(rl){var t=rs;if(t){var n=t;if(!ud(e,t)){if(vd(e))throw Error(m(418));t=tp(n);var l=ro;t&&ud(e,t)?sd(l,n):(e.flags=-4097&e.flags|2,rl=!1,ro=e)}}else{if(vd(e))throw Error(m(418));e.flags=-4097&e.flags|2,rl=!1,ro=e}}}function xd(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function yd(e){if(!eT||e!==ro)return!1;if(!rl)return xd(e),rl=!0,!1;if(3!==e.tag&&(5!==e.tag||tP(e.type)&&!e_(e.type,e.memoizedProps))){var t=rs;if(t){if(vd(e))throw zd(),Error(m(418));for(;t;)sd(e,t),t=tp(t)}}if(xd(e),13===e.tag){if(!eT)throw Error(m(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(m(317));rs=tx(e)}else rs=ro?tp(e.stateNode):null;return!0}function zd(){for(var e=rs;e;)e=tp(e)}function Ad(){eT&&(rs=ro=null,ru=rl=!1)}function Bd(e){null===rd?rd=[e]:rd.push(e)}var rp=w.ReactCurrentBatchConfig;function Dd(e,t){if(t0(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var c=n[l];if(!tR.call(t,c)||!t0(e[c],t[c]))return!1}return!0}function Fd(e,t){if(e&&e.defaultProps)for(var n in t=S({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var rm=ic(null),rv=null,rb=null,ry=null;function Kd(){ry=rb=rv=null}function Ld(e,t,n){eC?(v(rm,t._currentValue),t._currentValue=n):(v(rm,t._currentValue2),t._currentValue2=n)}function Md(e){var t=rm.current;q(rm),eC?e._currentValue=t:e._currentValue2=t}function Nd(e,t,n){for(;null!==e;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==l&&(l.childLanes|=t)):null!==l&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Od(e,t){rv=e,ry=rb=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.lanes&t&&(rK=!0),e.firstContext=null)}function Pd(e){var t=eC?e._currentValue:e._currentValue2;if(ry!==e){if(e={context:e,memoizedValue:t,next:null},null===rb){if(null===rv)throw Error(m(308));rb=e,rv.dependencies={lanes:0,firstContext:e}}else rb=rb.next=e}return t}var r_=null;function Rd(e){null===r_?r_=[e]:r_.push(e)}function Sd(e,t,n,l){var c=t.interleaved;return null===c?(n.next=n,Rd(t)):(n.next=c.next,c.next=n),t.interleaved=n,Td(e,l)}function Td(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var rx=!1;function Vd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xd(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yd(e,t,n){var l=e.updateQueue;if(null===l)return null;if(l=l.shared,2&no){var c=l.pending;return null===c?t.next=t:(t.next=c.next,c.next=t),l.pending=t,Td(e,n)}return null===(c=l.interleaved)?(t.next=t,Rd(l)):(t.next=c.next,c.next=t),l.interleaved=t,Td(e,n)}function Zd(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,(4194240&n)!=0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Hc(e,n)}}function $d(e,t){var n=e.updateQueue,l=e.alternate;if(null!==l&&n===(l=l.updateQueue)){var c=null,y=null;if(null!==(n=n.firstBaseUpdate)){do{var _={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===y?c=y=_:y=y.next=_,n=n.next}while(null!==n);null===y?c=y=t:y=y.next=t}else c=y=t;n={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:y,shared:l.shared,effects:l.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ae(e,t,n,l){var c=e.updateQueue;rx=!1;var y=c.firstBaseUpdate,_=c.lastBaseUpdate,x=c.shared.pending;if(null!==x){c.shared.pending=null;var w=x,T=w.next;w.next=null,null===_?y=T:_.next=T,_=w;var E=e.alternate;null!==E&&(x=(E=E.updateQueue).lastBaseUpdate)!==_&&(null===x?E.firstBaseUpdate=T:x.next=T,E.lastBaseUpdate=w)}if(null!==y){var F=c.baseState;for(_=0,E=T=w=null,x=y;;){var D=x.lane,L=x.eventTime;if((l&D)===D){null!==E&&(E=E.next={eventTime:L,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var j=e,O=x;switch(D=t,L=n,O.tag){case 1:if("function"==typeof(j=O.payload)){F=j.call(L,F,D);break e}F=j;break e;case 3:j.flags=-65537&j.flags|128;case 0:if(null==(D="function"==typeof(j=O.payload)?j.call(L,F,D):j))break e;F=S({},F,D);break e;case 2:rx=!0}}null!==x.callback&&0!==x.lane&&(e.flags|=64,null===(D=c.effects)?c.effects=[x]:D.push(x))}else L={eventTime:L,lane:D,tag:x.tag,payload:x.payload,callback:x.callback,next:null},null===E?(T=E=L,w=F):E=E.next=L,_|=D;if(null===(x=x.next)){if(null===(x=c.shared.pending))break;x=(D=x).next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}if(null===E&&(w=F),c.baseState=w,c.firstBaseUpdate=T,c.lastBaseUpdate=E,null!==(t=c.shared.interleaved)){c=t;do _|=c.lane,c=c.next;while(c!==t)}else null===y&&(c.shared.lanes=0);nb|=_,e.lanes=_,e.memoizedState=F}}function ce(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(null!==c){if(l.callback=null,l=n,"function"!=typeof c)throw Error(m(191,c));c.call(l)}}}var rS=new W.Component().refs;function ee(e,t,n,l){n=null==(n=n(l,t=e.memoizedState))?t:S({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rw={isMounted:function(e){return!!(e=e._reactInternals)&&wa(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var l=I(),c=fe(e),y=Xd(l,c);y.payload=t,null!=n&&(y.callback=n),null!==(t=Yd(e,y,c))&&(ge(t,e,c,l),Zd(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=I(),c=fe(e),y=Xd(l,c);y.tag=1,y.payload=t,null!=n&&(y.callback=n),null!==(t=Yd(e,y,c))&&(ge(t,e,c,l),Zd(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=I(),l=fe(e),c=Xd(n,l);c.tag=2,null!=t&&(c.callback=t),null!==(t=Yd(e,c,l))&&(ge(t,e,l,n),Zd(t,e,l))}};function ie(e,t,n,l,c,y,_){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(l,y,_):!t.prototype||!t.prototype.isPureReactComponent||!Dd(n,l)||!Dd(c,y)}function je(e,t,n){var l=!1,c=tA,y=t.contextType;return"object"==typeof y&&null!==y?y=Pd(y):(c=A(t)?tj:tD.current,y=(l=null!=(l=t.contextTypes))?lc(e,c):tA),t=new t(n,y),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rw,e.stateNode=t,t._reactInternals=e,l&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=y),t}function ke(e,t,n,l){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,l),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&rw.enqueueReplaceState(t,t.state,null)}function le(e,t,n,l){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=rS,Vd(e);var y=t.contextType;"object"==typeof y&&null!==y?c.context=Pd(y):(y=A(t)?tj:tD.current,c.context=lc(e,y)),c.state=e.memoizedState,"function"==typeof(y=t.getDerivedStateFromProps)&&(ee(e,t,y,n),c.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof c.getSnapshotBeforeUpdate||"function"!=typeof c.UNSAFE_componentWillMount&&"function"!=typeof c.componentWillMount||(t=c.state,"function"==typeof c.componentWillMount&&c.componentWillMount(),"function"==typeof c.UNSAFE_componentWillMount&&c.UNSAFE_componentWillMount(),t!==c.state&&rw.enqueueReplaceState(c,c.state,null),ae(e,n,c,l),c.state=e.memoizedState),"function"==typeof c.componentDidMount&&(e.flags|=4194308)}function me(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(m(309));var l=n.stateNode}if(!l)throw Error(m(147,e));var c=l,y=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===y?t.ref:((t=function(e){var t=c.refs;t===rS&&(t=c.refs={}),null===e?delete t[y]:t[y]=e})._stringRef=y,t)}if("string"!=typeof e)throw Error(m(284));if(!n._owner)throw Error(m(290,e))}return e}function ne(e,t){throw Error(m(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oe(e){return(0,e._init)(e._payload)}function pe(e){function b(t,n){if(e){var l=t.deletions;null===l?(t.deletions=[n],t.flags|=16):l.push(n)}}function c2(t,n){if(!e)return null;for(;null!==n;)b(t,n),n=n.sibling;return null}function d2(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function e5(e,t){return(e=qe(e,t)).index=0,e.sibling=null,e}function f(t,n,l){return t.index=l,e?null!==(l=t.alternate)?(l=l.index)<n?(t.flags|=2,n):l:(t.flags|=2,n):(t.flags|=1048576,n)}function g(t){return e&&null===t.alternate&&(t.flags|=2),t}function h2(e,t,n,l){return null===t||6!==t.tag?(t=re(n,e.mode,l)).return=e:(t=e5(t,n)).return=e,t}function k(e,t,n,l){var c=n.type;return c===L?n3(e,t,n.props.children,l,n.key):(null!==t&&(t.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===er&&oe(c)===t.type)?(l=e5(t,n.props)).ref=me(e,t,n):(l=se(n.type,n.key,n.props,null,e.mode,l)).ref=me(e,t,n),l.return=e,l)}function l2(e,t,n,l){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=te(n,e.mode,l)).return=e:(t=e5(t,n.children||[])).return=e,t}function n3(e,t,n,l,c){return null===t||7!==t.tag?(t=ue(n,e.mode,l,c)).return=e:(t=e5(t,n)).return=e,t}function t5(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=re(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case F:return(n=se(t.type,t.key,t.props,null,e.mode,n)).ref=me(e,null,t),n.return=e,n;case D:return(t=te(t,e.mode,n)).return=e,t;case er:return t5(e,(0,t._init)(t._payload),n)}if(es(t)||ta(t))return(t=ue(t,e.mode,n,null)).return=e,t;ne(e,t)}return null}function p(e,t,n,l){var c=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==c?null:h2(e,t,""+n,l);if("object"==typeof n&&null!==n){switch(n.$$typeof){case F:return n.key===c?k(e,t,n,l):null;case D:return n.key===c?l2(e,t,n,l):null;case er:return p(e,t,(c=n._init)(n._payload),l)}if(es(n)||ta(n))return null!==c?null:n3(e,t,n,l,null);ne(e,n)}return null}function B(e,t,n,l,c){if("string"==typeof l&&""!==l||"number"==typeof l)return h2(t,e=e.get(n)||null,""+l,c);if("object"==typeof l&&null!==l){switch(l.$$typeof){case F:return k(t,e=e.get(null===l.key?n:l.key)||null,l,c);case D:return l2(t,e=e.get(null===l.key?n:l.key)||null,l,c);case er:return B(e,t,n,(0,l._init)(l._payload),c)}if(es(l)||ta(l))return n3(t,e=e.get(n)||null,l,c,null);ne(t,l)}return null}return function za(t,n,l,c){if("object"==typeof l&&null!==l&&l.type===L&&null===l.key&&(l=l.props.children),"object"==typeof l&&null!==l){switch(l.$$typeof){case F:e:{for(var y=l.key,_=n;null!==_;){if(_.key===y){if((y=l.type)===L){if(7===_.tag){c2(t,_.sibling),(n=e5(_,l.props.children)).return=t,t=n;break e}}else if(_.elementType===y||"object"==typeof y&&null!==y&&y.$$typeof===er&&oe(y)===_.type){c2(t,_.sibling),(n=e5(_,l.props)).ref=me(t,_,l),n.return=t,t=n;break e}c2(t,_);break}b(t,_),_=_.sibling}l.type===L?((n=ue(l.props.children,t.mode,c,l.key)).return=t,t=n):((c=se(l.type,l.key,l.props,null,t.mode,c)).ref=me(t,n,l),c.return=t,t=c)}return g(t);case D:e:{for(_=l.key;null!==n;){if(n.key===_){if(4===n.tag&&n.stateNode.containerInfo===l.containerInfo&&n.stateNode.implementation===l.implementation){c2(t,n.sibling),(n=e5(n,l.children||[])).return=t,t=n;break e}c2(t,n);break}b(t,n),n=n.sibling}(n=te(l,t.mode,c)).return=t,t=n}return g(t);case er:return za(t,n,(_=l._init)(l._payload),c)}if(es(l))return function(t,n,l,c){for(var y=null,_=null,x=n,S=n=0,w=null;null!==x&&S<l.length;S++){x.index>S?(w=x,x=null):w=x.sibling;var T=p(t,x,l[S],c);if(null===T){null===x&&(x=w);break}e&&x&&null===T.alternate&&b(t,x),n=f(T,n,S),null===_?y=T:_.sibling=T,_=T,x=w}if(S===l.length)return c2(t,x),rl&&kd(t,S),y;if(null===x){for(;S<l.length;S++)null!==(x=t5(t,l[S],c))&&(n=f(x,n,S),null===_?y=x:_.sibling=x,_=x);return rl&&kd(t,S),y}for(x=d2(t,x);S<l.length;S++)null!==(w=B(x,t,S,l[S],c))&&(e&&null!==w.alternate&&x.delete(null===w.key?S:w.key),n=f(w,n,S),null===_?y=w:_.sibling=w,_=w);return e&&x.forEach(function(e){return b(t,e)}),rl&&kd(t,S),y}(t,n,l,c);if(ta(l))return function(t,n,l,c){var y=ta(l);if("function"!=typeof y)throw Error(m(150));if(null==(l=y.call(l)))throw Error(m(151));for(var _=y=null,x=n,S=n=0,w=null,T=l.next();null!==x&&!T.done;S++,T=l.next()){x.index>S?(w=x,x=null):w=x.sibling;var E=p(t,x,T.value,c);if(null===E){null===x&&(x=w);break}e&&x&&null===E.alternate&&b(t,x),n=f(E,n,S),null===_?y=E:_.sibling=E,_=E,x=w}if(T.done)return c2(t,x),rl&&kd(t,S),y;if(null===x){for(;!T.done;S++,T=l.next())null!==(T=t5(t,T.value,c))&&(n=f(T,n,S),null===_?y=T:_.sibling=T,_=T);return rl&&kd(t,S),y}for(x=d2(t,x);!T.done;S++,T=l.next())null!==(T=B(x,t,S,T.value,c))&&(e&&null!==T.alternate&&x.delete(null===T.key?S:T.key),n=f(T,n,S),null===_?y=T:_.sibling=T,_=T);return e&&x.forEach(function(e){return b(t,e)}),rl&&kd(t,S),y}(t,n,l,c);ne(t,l)}return"string"==typeof l&&""!==l||"number"==typeof l?(l=""+l,null!==n&&6===n.tag?(c2(t,n.sibling),(n=e5(n,l)).return=t):(c2(t,n),(n=re(l,t.mode,c)).return=t),g(t=n)):c2(t,n)}}var rk=pe(!0),rC=pe(!1),rP={},rM=ic(rP),rT=ic(rP),rE=ic(rP);function Be(e){if(e===rP)throw Error(m(174));return e}function Ce(e,t){v(rE,t),v(rT,e),v(rM,rP),e=eh(t),q(rM),v(rM,e)}function De(){q(rM),q(rT),q(rE)}function Ee(e){var t=Be(rE.current),n=Be(rM.current);t=eu(n,e.type,t),n!==t&&(v(rT,e),v(rM,t))}function Fe(e){rT.current===e&&(q(rM),q(rT))}var rR=ic(0);function Ge(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||tl(n)||th(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rF=[];function Ie(){for(var e=0;e<rF.length;e++){var t=rF[e];eC?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}rF.length=0}var rN=w.ReactCurrentDispatcher,rA=w.ReactCurrentBatchConfig,rD=0,rL=null,rj=null,rO=null,rI=!1,rz=!1,rW=0,r$=0;function N(){throw Error(m(321))}function Qe(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!t0(e[n],t[n]))return!1;return!0}function Re(e,t,n,l,c,y){if(rD=y,rL=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rN.current=null===e||null===e.memoizedState?rU:rB,e=n(l,c),rz){y=0;do{if(rz=!1,rW=0,25<=y)throw Error(m(301));y+=1,rO=rj=null,t.updateQueue=null,rN.current=rH,e=n(l,c)}while(rz)}if(rN.current=rG,t=null!==rj&&null!==rj.next,rD=0,rO=rj=rL=null,rI=!1,t)throw Error(m(300));return e}function We(){var e=0!==rW;return rW=0,e}function Xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rO?rL.memoizedState=rO=e:rO=rO.next=e,rO}function Ye(){if(null===rj){var e=rL.alternate;e=null!==e?e.memoizedState:null}else e=rj.next;var t=null===rO?rL.memoizedState:rO.next;if(null!==t)rO=t,rj=e;else{if(null===e)throw Error(m(310));e={memoizedState:(rj=e).memoizedState,baseState:rj.baseState,baseQueue:rj.baseQueue,queue:rj.queue,next:null},null===rO?rL.memoizedState=rO=e:rO=rO.next=e}return rO}function Ze(e,t){return"function"==typeof t?t(e):t}function $e(e){var t=Ye(),n=t.queue;if(null===n)throw Error(m(311));n.lastRenderedReducer=e;var l=rj,c=l.baseQueue,y=n.pending;if(null!==y){if(null!==c){var _=c.next;c.next=y.next,y.next=_}l.baseQueue=c=y,n.pending=null}if(null!==c){y=c.next,l=l.baseState;var x=_=null,S=null,w=y;do{var T=w.lane;if((rD&T)===T)null!==S&&(S=S.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),l=w.hasEagerState?w.eagerState:e(l,w.action);else{var E={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};null===S?(x=S=E,_=l):S=S.next=E,rL.lanes|=T,nb|=T}w=w.next}while(null!==w&&w!==y);null===S?_=l:S.next=x,t0(l,t.memoizedState)||(rK=!0),t.memoizedState=l,t.baseState=_,t.baseQueue=S,n.lastRenderedState=l}if(null!==(e=n.interleaved)){c=e;do y=c.lane,rL.lanes|=y,nb|=y,c=c.next;while(c!==e)}else null===c&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function af(e){var t=Ye(),n=t.queue;if(null===n)throw Error(m(311));n.lastRenderedReducer=e;var l=n.dispatch,c=n.pending,y=t.memoizedState;if(null!==c){n.pending=null;var _=c=c.next;do y=e(y,_.action),_=_.next;while(_!==c);t0(y,t.memoizedState)||(rK=!0),t.memoizedState=y,null===t.baseQueue&&(t.baseState=y),n.lastRenderedState=y}return[y,l]}function bf(){}function cf(e,t){var n=rL,l=Ye(),c=t(),y=!t0(l.memoizedState,c);if(y&&(l.memoizedState=c,rK=!0),l=l.queue,df(ef.bind(null,n,l,e),[e]),l.getSnapshot!==t||y||null!==rO&&1&rO.memoizedState.tag){if(n.flags|=2048,ff(9,gf.bind(null,n,l,c,t),void 0,null),null===ns)throw Error(m(349));30&rD||hf(n,t,c)}return c}function hf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=rL.updateQueue)?(t={lastEffect:null,stores:null},rL.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function gf(e,t,n,l){t.value=n,t.getSnapshot=l,jf(t)&&kf(e)}function ef(e,t,n){return n(function(){jf(t)&&kf(e)})}function jf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!t0(e,n)}catch{return!0}}function kf(e){var t=Td(e,1);null!==t&&ge(t,e,1,-1)}function lf(e){var t=Xe();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ze,lastRenderedState:e},t.queue=e,e=e.dispatch=mf.bind(null,rL,e),[t.memoizedState,e]}function ff(e,t,n,l){return e={tag:e,create:t,destroy:n,deps:l,next:null},null===(t=rL.updateQueue)?(t={lastEffect:null,stores:null},rL.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function nf(){return Ye().memoizedState}function of(e,t,n,l){var c=Xe();rL.flags|=e,c.memoizedState=ff(1|t,n,void 0,void 0===l?null:l)}function pf(e,t,n,l){var c=Ye();l=void 0===l?null:l;var y=void 0;if(null!==rj){var _=rj.memoizedState;if(y=_.destroy,null!==l&&Qe(l,_.deps)){c.memoizedState=ff(t,n,y,l);return}}rL.flags|=e,c.memoizedState=ff(1|t,n,y,l)}function qf(e,t){return of(8390656,8,e,t)}function df(e,t){return pf(2048,8,e,t)}function rf(e,t){return pf(4,2,e,t)}function sf(e,t){return pf(4,4,e,t)}function tf(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function uf(e,t,n){return n=null!=n?n.concat([e]):null,pf(4,4,tf.bind(null,t,e),n)}function vf(){}function wf(e,t){var n=Ye();t=void 0===t?null:t;var l=n.memoizedState;return null!==l&&null!==t&&Qe(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function xf(e,t){var n=Ye();t=void 0===t?null:t;var l=n.memoizedState;return null!==l&&null!==t&&Qe(t,l[1])?l[0]:(e=e(),n.memoizedState=[e,t],e)}function yf(e,t,n){return 21&rD?(t0(n,t)||(n=Dc(),rL.lanes|=n,nb|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rK=!0),e.memoizedState=n)}function zf(e,t){var n=tG;tG=0!==n&&4>n?n:4,e(!0);var l=rA.transition;rA.transition={};try{e(!1),t()}finally{tG=n,rA.transition=l}}function Af(){return Ye().memoizedState}function Bf(e,t,n){var l=fe(e);(n={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null},Cf(e))?Df(t,n):null!==(n=Sd(e,t,n,l))&&(ge(n,e,l,I()),Ef(n,t,l))}function mf(e,t,n){var l=fe(e),c={lane:l,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cf(e))Df(t,c);else{var y=e.alternate;if(0===e.lanes&&(null===y||0===y.lanes)&&null!==(y=t.lastRenderedReducer))try{var _=t.lastRenderedState,x=y(_,n);if(c.hasEagerState=!0,c.eagerState=x,t0(x,_)){var S=t.interleaved;null===S?(c.next=c,Rd(t)):(c.next=S.next,S.next=c),t.interleaved=c;return}}catch{}finally{}null!==(n=Sd(e,t,c,l))&&(ge(n,e,l,c=I()),Ef(n,t,l))}}function Cf(e){var t=e.alternate;return e===rL||null!==t&&t===rL}function Df(e,t){rz=rI=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ef(e,t,n){if(4194240&n){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Hc(e,n)}}var rG={readContext:Pd,useCallback:N,useContext:N,useEffect:N,useImperativeHandle:N,useInsertionEffect:N,useLayoutEffect:N,useMemo:N,useReducer:N,useRef:N,useState:N,useDebugValue:N,useDeferredValue:N,useTransition:N,useMutableSource:N,useSyncExternalStore:N,useId:N,unstable_isNewReconciler:!1},rU={readContext:Pd,useCallback:function(e,t){return Xe().memoizedState=[e,void 0===t?null:t],e},useContext:Pd,useEffect:qf,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,of(4194308,4,tf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return of(4194308,4,e,t)},useInsertionEffect:function(e,t){return of(4,2,e,t)},useMemo:function(e,t){var n=Xe();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var l=Xe();return t=void 0!==n?n(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=Bf.bind(null,rL,e),[l.memoizedState,e]},useRef:function(e){return e={current:e},Xe().memoizedState=e},useState:lf,useDebugValue:vf,useDeferredValue:function(e){return Xe().memoizedState=e},useTransition:function(){var e=lf(!1),t=e[0];return e=zf.bind(null,e[1]),Xe().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var l=rL,c=Xe();if(rl){if(void 0===n)throw Error(m(407));n=n()}else{if(n=t(),null===ns)throw Error(m(349));30&rD||hf(l,t,n)}c.memoizedState=n;var y={value:n,getSnapshot:t};return c.queue=y,qf(ef.bind(null,l,y,e),[e]),l.flags|=2048,ff(9,gf.bind(null,l,y,n,t),void 0,null),n},useId:function(){var e=Xe(),t=ns.identifierPrefix;if(rl){var n=ra,l=ri;t=":"+t+"R"+(n=(l&~(1<<32-tO(l)-1)).toString(32)+n),0<(n=rW++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=r$++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rB={readContext:Pd,useCallback:wf,useContext:Pd,useEffect:df,useImperativeHandle:uf,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:xf,useReducer:$e,useRef:nf,useState:function(){return $e(Ze)},useDebugValue:vf,useDeferredValue:function(e){return yf(Ye(),rj.memoizedState,e)},useTransition:function(){return[$e(Ze)[0],Ye().memoizedState]},useMutableSource:bf,useSyncExternalStore:cf,useId:Af,unstable_isNewReconciler:!1},rH={readContext:Pd,useCallback:wf,useContext:Pd,useEffect:df,useImperativeHandle:uf,useInsertionEffect:rf,useLayoutEffect:sf,useMemo:xf,useReducer:af,useRef:nf,useState:function(){return af(Ze)},useDebugValue:vf,useDeferredValue:function(e){var t=Ye();return null===rj?t.memoizedState=e:yf(t,rj.memoizedState,e)},useTransition:function(){return[af(Ze)[0],Ye().memoizedState]},useMutableSource:bf,useSyncExternalStore:cf,useId:Af,unstable_isNewReconciler:!1};function Ff(e,t){try{var n="",l=t;do n+=function(e){switch(e.tag){case 5:return cc(e.type);case 16:return cc("Lazy");case 13:return cc("Suspense");case 19:return cc("SuspenseList");case 0:case 2:case 15:return e=ec(e.type,!1);case 11:return e=ec(e.type.render,!1);case 1:return e=ec(e.type,!0);default:return""}}(l),l=l.return;while(l);var c=n}catch(e){c=`
Error generating stack: `+e.message+`
`+e.stack}return{value:e,source:t,stack:c,digest:null}}function Gf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Hf(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var rV="function"==typeof WeakMap?WeakMap:Map;function Jf(e,t,n){(n=Xd(-1,n)).tag=3,n.payload={element:null};var l=t.value;return n.callback=function(){nP||(nP=!0,nM=l),Hf(e,t)},n}function Mf(e,t,n){(n=Xd(-1,n)).tag=3;var l=e.type.getDerivedStateFromError;if("function"==typeof l){var c=t.value;n.payload=function(){return l(c)},n.callback=function(){Hf(e,t)}}var y=e.stateNode;return null!==y&&"function"==typeof y.componentDidCatch&&(n.callback=function(){Hf(e,t),"function"!=typeof l&&(null===nT?nT=new Set([this]):nT.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function Of(e,t,n){var l=e.pingCache;if(null===l){l=e.pingCache=new rV;var c=new Set;l.set(t,c)}else void 0===(c=l.get(t))&&(c=new Set,l.set(t,c));c.has(n)||(c.add(n),e=Pf.bind(null,e,t,n),t.then(e,e))}function Qf(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Rf(e,t,n,l,c){return 1&e.mode?(e.flags|=65536,e.lanes=c):e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Xd(-1,1)).tag=2,Yd(n,t,1))),n.lanes|=1),e}var rq=w.ReactCurrentOwner,rK=!1;function P(e,t,n,l){t.child=null===e?rC(t,null,n,l):rk(t,e.child,n,l)}function Tf(e,t,n,l,c){n=n.render;var y=t.ref;return Od(t,c),l=Re(e,t,n,l,y,c),n=We(),null===e||rK?(rl&&n&&md(t),t.flags|=1,P(e,t,l,c),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Uf(e,t,c))}function Vf(e,t,n,l,c){if(null===e){var y=n.type;return"function"!=typeof y||Wf(y)||void 0!==y.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=se(n.type,null,l,t,t.mode,c)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=y,Xf(e,t,y,l,c))}if(y=e.child,!(e.lanes&c)){var _=y.memoizedProps;if((n=null!==(n=n.compare)?n:Dd)(_,l)&&e.ref===t.ref)return Uf(e,t,c)}return t.flags|=1,(e=qe(y,l)).ref=t.ref,e.return=t,t.child=e}function Xf(e,t,n,l,c){if(null!==e){var y=e.memoizedProps;if(Dd(y,l)&&e.ref===t.ref){if(rK=!1,t.pendingProps=l=y,(e.lanes&c)==0)return t.lanes=e.lanes,Uf(e,t,c);131072&e.flags&&(rK=!0)}}return Yf(e,t,n,l,c)}function Zf(e,t,n){var l=t.pendingProps,c=l.children,y=null!==e?e.memoizedState:null;if("hidden"===l.mode){if(1&t.mode){if(!(1073741824&n))return e=null!==y?y.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,v(np,nu),nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=null!==y?y.baseLanes:n,v(np,nu),nu|=l}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},v(np,nu),nu|=n}else null!==y?(l=y.baseLanes|n,t.memoizedState=null):l=n,v(np,nu),nu|=l;return P(e,t,c,n),t.child}function bg(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yf(e,t,n,l,c){var y=A(n)?tj:tD.current;return y=lc(t,y),Od(t,c),n=Re(e,t,n,l,y,c),l=We(),null===e||rK?(rl&&l&&md(t),t.flags|=1,P(e,t,n,c),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Uf(e,t,c))}function cg(e,t,n,l,c){if(A(n)){var y=!0;pc(t)}else y=!1;if(Od(t,c),null===t.stateNode)dg(e,t),je(t,n,l),le(t,n,l,c),l=!0;else if(null===e){var _=t.stateNode,x=t.memoizedProps;_.props=x;var S=_.context,w=n.contextType;w="object"==typeof w&&null!==w?Pd(w):lc(t,w=A(n)?tj:tD.current);var T=n.getDerivedStateFromProps,E="function"==typeof T||"function"==typeof _.getSnapshotBeforeUpdate;E||"function"!=typeof _.UNSAFE_componentWillReceiveProps&&"function"!=typeof _.componentWillReceiveProps||(x!==l||S!==w)&&ke(t,_,l,w),rx=!1;var F=t.memoizedState;_.state=F,ae(t,l,_,c),S=t.memoizedState,x!==l||F!==S||tL.current||rx?("function"==typeof T&&(ee(t,n,T,l),S=t.memoizedState),(x=rx||ie(t,n,x,l,F,S,w))?(E||"function"!=typeof _.UNSAFE_componentWillMount&&"function"!=typeof _.componentWillMount||("function"==typeof _.componentWillMount&&_.componentWillMount(),"function"==typeof _.UNSAFE_componentWillMount&&_.UNSAFE_componentWillMount()),"function"==typeof _.componentDidMount&&(t.flags|=4194308)):("function"==typeof _.componentDidMount&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=S),_.props=l,_.state=S,_.context=w,l=x):("function"==typeof _.componentDidMount&&(t.flags|=4194308),l=!1)}else{_=t.stateNode,Wd(e,t),x=t.memoizedProps,w=t.type===t.elementType?x:Fd(t.type,x),_.props=w,E=t.pendingProps,F=_.context,S="object"==typeof(S=n.contextType)&&null!==S?Pd(S):lc(t,S=A(n)?tj:tD.current);var D=n.getDerivedStateFromProps;(T="function"==typeof D||"function"==typeof _.getSnapshotBeforeUpdate)||"function"!=typeof _.UNSAFE_componentWillReceiveProps&&"function"!=typeof _.componentWillReceiveProps||(x!==E||F!==S)&&ke(t,_,l,S),rx=!1,F=t.memoizedState,_.state=F,ae(t,l,_,c);var L=t.memoizedState;x!==E||F!==L||tL.current||rx?("function"==typeof D&&(ee(t,n,D,l),L=t.memoizedState),(w=rx||ie(t,n,w,l,F,L,S)||!1)?(T||"function"!=typeof _.UNSAFE_componentWillUpdate&&"function"!=typeof _.componentWillUpdate||("function"==typeof _.componentWillUpdate&&_.componentWillUpdate(l,L,S),"function"==typeof _.UNSAFE_componentWillUpdate&&_.UNSAFE_componentWillUpdate(l,L,S)),"function"==typeof _.componentDidUpdate&&(t.flags|=4),"function"==typeof _.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof _.componentDidUpdate||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),"function"!=typeof _.getSnapshotBeforeUpdate||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=L),_.props=l,_.state=L,_.context=S,l=w):("function"!=typeof _.componentDidUpdate||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),"function"!=typeof _.getSnapshotBeforeUpdate||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),l=!1)}return eg(e,t,n,l,y,c)}function eg(e,t,n,l,c,y){bg(e,t);var _=(128&t.flags)!=0;if(!l&&!_)return c&&rc(t,n,!1),Uf(e,t,y);l=t.stateNode,rq.current=t;var x=_&&"function"!=typeof n.getDerivedStateFromError?null:l.render();return t.flags|=1,null!==e&&_?(t.child=rk(t,e.child,null,y),t.child=rk(t,null,x,y)):P(e,t,x,y),t.memoizedState=l.state,c&&rc(t,n,!0),t.child}function fg(e){var t=e.stateNode;t.pendingContext?nc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nc(e,t.context,!1),Ce(e,t.containerInfo)}function gg(e,t,n,l,c){return Ad(),Bd(c),t.flags|=256,P(e,t,n,l),t.child}var rX={dehydrated:null,treeContext:null,retryLane:0};function ig(e){return{baseLanes:e,cachePool:null,transitions:null}}function jg(e,t,n){var l,c=t.pendingProps,y=rR.current,_=!1,x=(128&t.flags)!=0;if((l=x)||(l=(null===e||null!==e.memoizedState)&&(2&y)!=0),l?(_=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(y|=1),v(rR,1&y),null===e)return wd(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?th(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(x=c.children,e=c.fallback,_?(c=t.mode,_=t.child,x={mode:"hidden",children:x},1&c||null===_?_=kg(x,c,0,null):(_.childLanes=0,_.pendingProps=x),e=ue(e,c,n,null),_.return=t,e.return=t,_.sibling=e,t.child=_,t.child.memoizedState=ig(n),t.memoizedState=rX,e):lg(t,x));if(null!==(y=e.memoizedState)&&null!==(l=y.dehydrated))return function(e,t,n,l,c,y,_){if(n)return 256&t.flags?(t.flags&=-257,ng(e,t,_,l=Gf(Error(m(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(y=l.fallback,c=t.mode,l=kg({mode:"visible",children:l.children},c,0,null),y=ue(y,c,_,null),y.flags|=2,l.return=t,y.return=t,l.sibling=y,t.child=l,1&t.mode&&rk(t,e.child,null,_),t.child.memoizedState=ig(_),t.memoizedState=rX,y);if(!(1&t.mode))return ng(e,t,_,null);if(th(c))return l=tu(c).digest,ng(e,t,_,l=Gf(y=Error(m(419)),l,void 0));if(n=(_&e.childLanes)!=0,rK||n){if(null!==(l=ns)){switch(_&-_){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}0!==(c=c&(l.suspendedLanes|_)?0:c)&&c!==y.retryLane&&(y.retryLane=c,Td(e,c),ge(l,e,c,-1))}return og(),ng(e,t,_,l=Gf(Error(m(421))))}return tl(c)?(t.flags|=128,t.child=e.child,tc(c,t=pg.bind(null,e)),null):(e=y.treeContext,eT&&(rs=tv(c),ro=t,rl=!0,rd=null,ru=!1,null!==e&&(rt[rr++]=ri,rt[rr++]=ra,rt[rr++]=rn,ri=e.id,ra=e.overflow,rn=t)),t=lg(t,l.children),t.flags|=4096,t)}(e,t,x,c,l,y,n);if(_){_=c.fallback,x=t.mode,l=(y=e.child).sibling;var S={mode:"hidden",children:c.children};return 1&x||t.child===y?(c=qe(y,S)).subtreeFlags=14680064&y.subtreeFlags:((c=t.child).childLanes=0,c.pendingProps=S,t.deletions=null),null!==l?_=qe(l,_):(_=ue(_,x,n,null),_.flags|=2),_.return=t,c.return=t,c.sibling=_,t.child=c,c=_,_=t.child,x=null===(x=e.child.memoizedState)?ig(n):{baseLanes:x.baseLanes|n,cachePool:null,transitions:x.transitions},_.memoizedState=x,_.childLanes=e.childLanes&~n,t.memoizedState=rX,c}return e=(_=e.child).sibling,c=qe(_,{mode:"visible",children:c.children}),1&t.mode||(c.lanes=n),c.return=t,c.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=c,t.memoizedState=null,c}function lg(e,t){return(t=kg({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ng(e,t,n,l){return null!==l&&Bd(l),rk(t,e.child,null,n),e=lg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qg(e,t,n){e.lanes|=t;var l=e.alternate;null!==l&&(l.lanes|=t),Nd(e.return,t,n)}function rg(e,t,n,l,c){var y=e.memoizedState;null===y?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:c}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=n,y.tailMode=c)}function sg(e,t,n){var l=t.pendingProps,c=l.revealOrder,y=l.tail;if(P(e,t,l.children,n),2&(l=rR.current))l=1&l|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qg(e,n,t);else if(19===e.tag)qg(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(v(rR,l),1&t.mode)switch(c){case"forwards":for(n=t.child,c=null;null!==n;)null!==(e=n.alternate)&&null===Ge(e)&&(c=n),n=n.sibling;null===(n=c)?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),rg(t,!1,c,n,y);break;case"backwards":for(n=null,c=t.child,t.child=null;null!==c;){if(null!==(e=c.alternate)&&null===Ge(e)){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}rg(t,!0,n,null,y);break;case"together":rg(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function dg(e,t){1&t.mode||null===e||(e.alternate=null,t.alternate=null,t.flags|=2)}function Uf(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),nb|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(m(153));if(null!==t.child){for(n=qe(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qe(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ug(e){e.flags|=4}function vg(e,t){if(null!==e&&e.child===t.child)return!0;if(16&t.flags)return!1;for(e=t.child;null!==e;){if(12854&e.flags||12854&e.subtreeFlags)return!1;e=e.sibling}return!0}if(eP)t=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)ev(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},n=function(){},l=function(e,t,n,l,c){(e=e.memoizedProps)!==l&&(n=ey(t.stateNode,n,e,l,c,Be(rM.current)),(t.updateQueue=n)&&ug(t))},c=function(e,t,n,l){n!==l&&ug(t)};else if(eM){t=function(e,n,l,c){for(var y=n.child;null!==y;){if(5===y.tag){var _=y.stateNode;l&&c&&(_=tr(_,y.type,y.memoizedProps,y)),ev(e,_)}else if(6===y.tag)_=y.stateNode,l&&c&&(_=tn(_,y.memoizedProps,y)),ev(e,_);else if(4!==y.tag){if(22===y.tag&&null!==y.memoizedState)null!==(_=y.child)&&(_.return=y),t(e,y,!0,!0);else if(null!==y.child){y.child.return=y,y=y.child;continue}}if(y===n)break;for(;null===y.sibling;){if(null===y.return||y.return===n)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};var Ag=function(e,t,n,l){for(var c=t.child;null!==c;){if(5===c.tag){var y=c.stateNode;n&&l&&(y=tr(y,c.type,c.memoizedProps,c)),e9(e,y)}else if(6===c.tag)y=c.stateNode,n&&l&&(y=tn(y,c.memoizedProps,c)),e9(e,y);else if(4!==c.tag){if(22===c.tag&&null!==c.memoizedState)null!==(y=c.child)&&(y.return=c),Ag(e,c,!0,!0);else if(null!==c.child){c.child.return=c,c=c.child;continue}}if(c===t)break;for(;null===c.sibling;){if(null===c.return||c.return===t)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};n=function(e,t){var n=t.stateNode;if(!vg(e,t)){var l=e8(e=n.containerInfo);Ag(l,t,!1,!1),n.pendingChildren=l,ug(t),e7(e,l)}},l=function(e,n,l,c,y){var _=e.stateNode,x=e.memoizedProps;if((e=vg(e,n))&&x===c)n.stateNode=_;else{var S=n.stateNode,w=Be(rM.current),T=null;x!==c&&(T=ey(S,l,x,c,y,w)),e&&null===T?n.stateNode=_:(eb(_=e6(_,T,l,x,c,n,e,S),l,c,y,w)&&ug(n),n.stateNode=_,e?ug(n):t(_,n,!1,!1))}},c=function(e,t,n,l){n!==l?(e=Be(rE.current),n=Be(rM.current),t.stateNode=ex(l,e,n,t),ug(t)):t.stateNode=e.stateNode}}else n=function(){},l=function(){},c=function(){};function Bg(e,t){if(!rl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;null!==n;)null!==n.alternate&&(l=n),n=n.sibling;null===l?t||null===e.tail?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Q(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,l=0;if(t)for(var c=e.child;null!==c;)n|=c.lanes|c.childLanes,l|=14680064&c.subtreeFlags,l|=14680064&c.flags,c.return=e,c=c.sibling;else for(c=e.child;null!==c;)n|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}var rY=!1,rQ=!1,rZ="function"==typeof WeakSet?WeakSet:Set,rJ=null;function Jg(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){U(e,t,n)}else n.current=null}}function Kg(e,t,n){try{n()}catch(n){U(e,t,n)}}var r0=!1;function Ng(e,t,n){var l=t.updateQueue;if(null!==(l=null!==l?l.lastEffect:null)){var c=l=l.next;do{if((c.tag&e)===e){var y=c.destroy;c.destroy=void 0,void 0!==y&&Kg(t,n,y)}c=c.next}while(c!==l)}}function Og(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var l=n.create;n.destroy=l()}n=n.next}while(n!==t)}}function Pg(e){var t=e.ref;if(null!==t){var n=e.stateNode;e=5===e.tag?el(n):n,"function"==typeof t?t(e):t.current=e}}function Rg(e){return 5===e.tag||3===e.tag||4===e.tag}function Sg(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var r1=null,r5=!1;function Wg(e,t,n){for(n=n.child;null!==n;)Xg(e,t,n),n=n.sibling}function Xg(e,t,n){if(tJ&&"function"==typeof tJ.onCommitFiberUnmount)try{tJ.onCommitFiberUnmount(tZ,n)}catch{}switch(n.tag){case 5:rQ||Jg(n,t);case 6:if(eP){var l=r1,c=r5;r1=null,Wg(e,t,n),r1=l,r5=c,null!==r1&&(r5?eQ(r1,n.stateNode):eY(r1,n.stateNode))}else Wg(e,t,n);break;case 18:eP&&null!==r1&&(r5?tC(r1,n.stateNode):tk(r1,n.stateNode));break;case 4:eP?(l=r1,c=r5,r1=n.stateNode.containerInfo,r5=!0,Wg(e,t,n),r1=l,r5=c):(eM&&(c=e8(l=n.stateNode.containerInfo),tt(l,c)),Wg(e,t,n));break;case 0:case 11:case 14:case 15:if(!rQ&&null!==(l=n.updateQueue)&&null!==(l=l.lastEffect)){c=l=l.next;do{var y=c,_=y.destroy;y=y.tag,void 0!==_&&(2&y||4&y)&&Kg(n,t,_),c=c.next}while(c!==l)}Wg(e,t,n);break;case 1:if(!rQ&&(Jg(n,t),"function"==typeof(l=n.stateNode).componentWillUnmount))try{l.props=n.memoizedProps,l.state=n.memoizedState,l.componentWillUnmount()}catch(e){U(n,t,e)}Wg(e,t,n);break;case 21:default:Wg(e,t,n);break;case 22:1&n.mode?(rQ=(l=rQ)||null!==n.memoizedState,Wg(e,t,n),rQ=l):Wg(e,t,n)}}function Yg(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new rZ),t.forEach(function(t){var l=Zg.bind(null,e,t);n.has(t)||(n.add(t),t.then(l,l))})}}function $g(e,t){var n=t.deletions;if(null!==n)for(var l=0;l<n.length;l++){var c=n[l];try{var y=t;if(eP){var _=y;e:for(;null!==_;){switch(_.tag){case 5:r1=_.stateNode,r5=!1;break e;case 3:case 4:r1=_.stateNode.containerInfo,r5=!0;break e}_=_.return}if(null===r1)throw Error(m(160));Xg(e,y,c),r1=null,r5=!1}else Xg(e,y,c);var x=c.alternate;null!==x&&(x.return=null),c.return=null}catch(e){U(c,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ah(t,e),t=t.sibling}function ah(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($g(t,e),bh(e),4&l){try{Ng(3,e,e.return),Og(3,e)}catch(t){U(e,e.return,t)}try{Ng(5,e,e.return)}catch(t){U(e,e.return,t)}}break;case 1:$g(t,e),bh(e),512&l&&null!==n&&Jg(n,n.return);break;case 5:if($g(t,e),bh(e),512&l&&null!==n&&Jg(n,n.return),eP){if(32&e.flags){var c=e.stateNode;try{eZ(c)}catch(t){U(e,e.return,t)}}if(4&l&&null!=(c=e.stateNode)){var y=e.memoizedProps;if(n=null!==n?n.memoizedProps:y,l=e.type,t=e.updateQueue,e.updateQueue=null,null!==t)try{eq(c,t,l,n,y,e)}catch(t){U(e,e.return,t)}}}break;case 6:if($g(t,e),bh(e),4&l&&eP){if(null===e.stateNode)throw Error(m(162));c=e.stateNode,y=e.memoizedProps,n=null!==n?n.memoizedProps:y;try{eH(c,n,y)}catch(t){U(e,e.return,t)}}break;case 3:if($g(t,e),bh(e),4&l){if(eP&&eT&&null!==n&&n.memoizedState.isDehydrated)try{tS(t.containerInfo)}catch(t){U(e,e.return,t)}if(eM){c=t.containerInfo,y=t.pendingChildren;try{tt(c,y)}catch(t){U(e,e.return,t)}}}break;case 4:if($g(t,e),bh(e),4&l&&eM){c=(y=e.stateNode).containerInfo,y=y.pendingChildren;try{tt(c,y)}catch(t){U(e,e.return,t)}}break;case 13:$g(t,e),bh(e),8192&(c=e.child).flags&&(y=null!==c.memoizedState,c.stateNode.isHidden=y,y&&(null===c.alternate||null===c.alternate.memoizedState)&&(nw=tq())),4&l&&Yg(e);break;case 22:var _=null!==n&&null!==n.memoizedState;if(1&e.mode?(rQ=(n=rQ)||_,$g(t,e),rQ=n):$g(t,e),bh(e),8192&l){if(n=null!==e.memoizedState,(e.stateNode.isHidden=n)&&!_&&1&e.mode)for(rJ=e,l=e.child;null!==l;){for(t=rJ=l;null!==rJ;){var x=(_=rJ).child;switch(_.tag){case 0:case 11:case 14:case 15:Ng(4,_,_.return);break;case 1:Jg(_,_.return);var S=_.stateNode;if("function"==typeof S.componentWillUnmount){var w=_,T=_.return;try{S.props=w.memoizedProps,S.state=w.memoizedState,S.componentWillUnmount()}catch(e){U(w,T,e)}}break;case 5:Jg(_,_.return);break;case 22:if(null!==_.memoizedState){dh(t);continue}}null!==x?(x.return=_,rJ=x):dh(t)}l=l.sibling}if(eP){e:if(l=null,eP)for(t=e;;){if(5===t.tag){if(null===l){l=t;try{c=t.stateNode,n?eJ(c):e1(t.stateNode,t.memoizedProps)}catch(t){U(e,e.return,t)}}}else if(6===t.tag){if(null===l)try{y=t.stateNode,n?e0(y):e2(y,t.memoizedProps)}catch(t){U(e,e.return,t)}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}}}break;case 19:$g(t,e),bh(e),4&l&&Yg(e);break;case 21:break;default:$g(t,e),bh(e)}}function bh(e){var t=e.flags;if(2&t){try{if(eP){t:{for(var n=e.return;null!==n;){if(Rg(n)){var l=n;break t}n=n.return}throw Error(m(160))}switch(l.tag){case 5:var c=l.stateNode;32&l.flags&&(eZ(c),l.flags&=-33);var y=Sg(e);(function Ug(e,t,n){var l=e.tag;if(5===l||6===l)e=e.stateNode,t?eK(n,e,t):eU(n,e);else if(4!==l&&null!==(e=e.child))for(Ug(e,t,n),e=e.sibling;null!==e;)Ug(e,t,n),e=e.sibling})(e,y,c);break;case 3:case 4:var _=l.stateNode.containerInfo,x=Sg(e);(function Tg(e,t,n){var l=e.tag;if(5===l||6===l)e=e.stateNode,t?eX(n,e,t):eB(n,e);else if(4!==l&&null!==(e=e.child))for(Tg(e,t,n),e=e.sibling;null!==e;)Tg(e,t,n),e=e.sibling})(e,x,_);break;default:throw Error(m(161))}}}catch(t){U(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function hh(e){for(;null!==rJ;){var t=rJ;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:rQ||Og(5,t);break;case 1:var l=t.stateNode;if(4&t.flags&&!rQ){if(null===n)l.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:Fd(t.type,n.memoizedProps);l.componentDidUpdate(c,n.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}}var y=t.updateQueue;null!==y&&ce(t,y,l);break;case 3:var _=t.updateQueue;if(null!==_){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=el(t.child.stateNode);break;case 1:n=t.child.stateNode}ce(t,_,n)}break;case 5:var x=t.stateNode;null===n&&4&t.flags&&eV(x,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(eT&&null===t.memoizedState){var S=t.alternate;if(null!==S){var w=S.memoizedState;if(null!==w){var T=w.dehydrated;null!==T&&tw(T)}}}break;default:throw Error(m(163))}rQ||512&t.flags&&Pg(t)}catch(e){U(t,t.return,e)}}if(t===e){rJ=null;break}if(null!==(n=t.sibling)){n.return=t.return,rJ=n;break}rJ=t.return}}function dh(e){for(;null!==rJ;){var t=rJ;if(t===e){rJ=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rJ=n;break}rJ=t.return}}function gh(e){for(;null!==rJ;){var t=rJ;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Og(4,t)}catch(e){U(t,n,e)}break;case 1:var l=t.stateNode;if("function"==typeof l.componentDidMount){var c=t.return;try{l.componentDidMount()}catch(e){U(t,c,e)}}var y=t.return;try{Pg(t)}catch(e){U(t,y,e)}break;case 5:var _=t.return;try{Pg(t)}catch(e){U(t,_,e)}}}catch(e){U(t,t.return,e)}if(t===e){rJ=null;break}var x=t.sibling;if(null!==x){x.return=t.return,rJ=x;break}rJ=t.return}}var r3=0,r4=1,r6=2,r8=3,r9=4;if("function"==typeof Symbol&&Symbol.for){var r7=Symbol.for;r3=r7("selector.component"),r4=r7("selector.has_pseudo_class"),r6=r7("selector.role"),r8=r7("selector.test_id"),r9=r7("selector.text")}function oh(e){var t=eE(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(m(364));return t}if(null===(e=ej(e)))throw Error(m(362));return e.stateNode.current}function ph(e,t){switch(t.$$typeof){case r3:if(e.type===t.value)return!0;break;case r4:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var l=e[n++],c=e[n++],y=t[c];if(5!==l.tag||!ez(l)){for(;null!=y&&ph(l,y);)y=t[++c];if(c===t.length){t=!0;break e}for(l=l.child;null!==l;)e.push(l,c),l=l.sibling}}t=!1}return t;case r6:if(5===e.tag&&eW(e.stateNode,t.value))return!0;break;case r9:if((5===e.tag||6===e.tag)&&null!==(e=eI(e))&&0<=e.indexOf(t.value))return!0;break;case r8:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(m(365))}return!1}function qh(e){switch(e.$$typeof){case r3:return"<"+(ua(e.value)||"Unknown")+">";case r4:return":has("+(qh(e)||"")+")";case r6:return'[role="'+e.value+'"]';case r9:return'"'+e.value+'"';case r8:return'[data-testname="'+e.value+'"]';default:throw Error(m(365))}}function rh(e,t){var n=[];e=[e,0];for(var l=0;l<e.length;){var c=e[l++],y=e[l++],_=t[y];if(5!==c.tag||!ez(c)){for(;null!=_&&ph(c,_);)_=t[++y];if(y===t.length)n.push(c);else for(c=c.child;null!==c;)e.push(c,y),c=c.sibling}}return n}function sh(e,t){if(!eL)throw Error(m(363));e=rh(e=oh(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var l=e[n++];if(5===l.tag)ez(l)||t.push(l.stateNode);else for(l=l.child;null!==l;)e.push(l),l=l.sibling}return t}var nt=Math.ceil,nr=w.ReactCurrentDispatcher,nn=w.ReactCurrentOwner,na=w.ReactCurrentBatchConfig,no=0,ns=null,nl=null,nh=0,nu=0,np=ic(0),nm=0,nv=null,nb=0,ny=0,n_=0,nx=null,nS=null,nw=0,nk=1/0,nC=null;function Ch(){nk=tq()+500}var nP=!1,nM=null,nT=null,nE=!1,nR=null,nF=0,nN=0,nA=null,nD=-1,nL=0;function I(){return 6&no?tq():-1!==nD?nD:nD=tq()}function fe(e){return 1&e.mode?2&no&&0!==nh?nh&-nh:null!==rp.transition?(0===nL&&(nL=Dc()),nL):0!==(e=tG)?e:eF():1}function ge(e,t,n,l){if(50<nN)throw nN=0,nA=null,Error(m(185));Fc(e,n,l),2&no&&e===ns||(e===ns&&(2&no||(ny|=n),4===nm&&Kh(e,nh)),Lh(e,l),1===n&&0===no&&!(1&t.mode)&&(Ch(),t2&&ad()))}function Lh(e,t){var n,l,c,y=e.callbackNode;(function(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,y=e.pendingLanes;0<y;){var _=31-tO(y),x=1<<_,S=c[_];-1===S?(!(x&n)||x&l)&&(c[_]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(x,t)):S<=t&&(e.expiredLanes|=x),y&=~x}})(e,t);var _=zc(e,e===ns?nh:0);if(0===_)null!==y&&tB(y),e.callbackNode=null,e.callbackPriority=0;else if(t=_&-_,e.callbackPriority!==t){if(null!=y&&tB(y),1===t)0===e.tag?(c=Mh.bind(null,e),t2=!0,Zc(c)):Zc(Mh.bind(null,e)),eA?eD(function(){6&no||ad()}):tU(tK,ad),y=null;else{switch(Ic(_)){case 1:y=tK;break;case 4:y=tX;break;case 16:default:y=tY;break;case 536870912:y=tQ}y=tU(y,Oh.bind(null,e))}e.callbackPriority=t,e.callbackNode=y}}function Oh(e,t){if(nD=-1,nL=0,6&no)throw Error(m(327));var n=e.callbackNode;if(Ph()&&e.callbackNode!==n)return null;var l=zc(e,e===ns?nh:0);if(0===l)return null;if(30&l||l&e.expiredLanes||t)t=Qh(e,l);else{t=l;var c=no;no|=2;var y=Rh();for((ns!==e||nh!==t)&&(nC=null,Ch(),Sh(e,t));;)try{(function(){for(;null!==nl&&!tH();)ai(nl)})();break}catch(t){Uh(e,t)}Kd(),nr.current=y,no=c,null!==nl?t=0:(ns=null,nh=0,t=nm)}if(0!==t){if(2===t&&0!==(c=Cc(e))&&(l=c,t=Vh(e,c)),1===t)throw n=nv,Sh(e,0),Kh(e,l),Lh(e,tq()),n;if(6===t)Kh(e,l);else{if(c=e.current.alternate,!(30&l)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var l=0;l<n.length;l++){var c=n[l],y=c.getSnapshot;c=c.value;try{if(!t0(y(),c))return!1}catch{return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(c)&&(2===(t=Qh(e,l))&&0!==(y=Cc(e))&&(l=y,t=Vh(e,y)),1===t))throw n=nv,Sh(e,0),Kh(e,l),Lh(e,tq()),n;switch(e.finishedWork=c,e.finishedLanes=l,t){case 0:case 1:throw Error(m(345));case 2:case 5:Xh(e,nS,nC);break;case 3:if(Kh(e,l),(130023424&l)===l&&10<(t=nw+500-tq())){if(0!==zc(e,0))break;if(((c=e.suspendedLanes)&l)!==l){I(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=eS(Xh.bind(null,e,nS,nC),t);break}Xh(e,nS,nC);break;case 4:if(Kh(e,l),(4194240&l)===l)break;for(t=e.eventTimes,c=-1;0<l;){var _=31-tO(l);y=1<<_,(_=t[_])>c&&(c=_),l&=~y}if(l=c,10<(l=(120>(l=tq()-l)?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*nt(l/1960))-l)){e.timeoutHandle=eS(Xh.bind(null,e,nS,nC),l);break}Xh(e,nS,nC);break;default:throw Error(m(329))}}}return Lh(e,tq()),e.callbackNode===n?Oh.bind(null,e):null}function Vh(e,t){var n=nx;return e.current.memoizedState.isDehydrated&&(Sh(e,t).flags|=256),2!==(e=Qh(e,t))&&(t=nS,nS=n,null!==t&&Dg(t)),e}function Dg(e){null===nS?nS=e:nS.push.apply(nS,e)}function Kh(e,t){for(t&=~n_,t&=~ny,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tO(t),l=1<<n;e[n]=-1,t&=~l}}function Mh(e){if(6&no)throw Error(m(327));Ph();var t=zc(e,0);if(!(1&t))return Lh(e,tq()),null;var n=Qh(e,t);if(0!==e.tag&&2===n){var l=Cc(e);0!==l&&(t=l,n=Vh(e,l))}if(1===n)throw n=nv,Sh(e,0),Kh(e,t),Lh(e,tq()),n;if(6===n)throw Error(m(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xh(e,nS,nC),Lh(e,tq()),null}function Yh(e){null===nR||0!==nR.tag||6&no||Ph();var t=no;no|=1;var n=na.transition,l=tG;try{if(na.transition=null,tG=1,e)return e()}finally{tG=l,na.transition=n,6&(no=t)||ad()}}function Fg(){nu=np.current,q(np)}function Sh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==ek&&(e.timeoutHandle=ek,ew(n)),null!==nl)for(n=nl.return;null!==n;){var l=n;switch(nd(l),l.tag){case 1:null!=(l=l.type.childContextTypes)&&mc();break;case 3:De(),q(tL),q(tD),Ie();break;case 5:Fe(l);break;case 4:De();break;case 13:case 19:q(rR);break;case 10:Md(l.type._context);break;case 22:case 23:Fg()}n=n.return}if(ns=e,nl=e=qe(e.current,null),nh=nu=t,nm=0,nv=null,n_=ny=nb=0,nS=nx=null,null!==r_){for(t=0;t<r_.length;t++)if(null!==(l=(n=r_[t]).interleaved)){n.interleaved=null;var c=l.next,y=n.pending;if(null!==y){var _=y.next;y.next=c,l.next=_}n.pending=l}r_=null}return e}function Uh(e,t){for(;;){var n=nl;try{if(Kd(),rN.current=rG,rI){for(var l=rL.memoizedState;null!==l;){var c=l.queue;null!==c&&(c.pending=null),l=l.next}rI=!1}if(rD=0,rO=rj=rL=null,rz=!1,rW=0,nn.current=null,null===n||null===n.return){nm=1,nv=t,nl=null;break}e:{var y=e,_=n.return,x=n,S=t;if(t=nh,x.flags|=32768,null!==S&&"object"==typeof S&&"function"==typeof S.then){var w=S,T=x,E=T.tag;if(!(1&T.mode)&&(0===E||11===E||15===E)){var F=T.alternate;F?(T.updateQueue=F.updateQueue,T.memoizedState=F.memoizedState,T.lanes=F.lanes):(T.updateQueue=null,T.memoizedState=null)}var D=Qf(_);if(null!==D){D.flags&=-257,Rf(D,_,x,y,t),1&D.mode&&Of(y,w,t),t=D,S=w;var L=t.updateQueue;if(null===L){var j=new Set;j.add(S),t.updateQueue=j}else L.add(S);break e}if(!(1&t)){Of(y,w,t),og();break e}S=Error(m(426))}else if(rl&&1&x.mode){var O=Qf(_);if(null!==O){65536&O.flags||(O.flags|=256),Rf(O,_,x,y,t),Bd(Ff(S,x));break e}}y=S=Ff(S,x),4!==nm&&(nm=2),null===nx?nx=[y]:nx.push(y),y=_;do{switch(y.tag){case 3:y.flags|=65536,t&=-t,y.lanes|=t;var W=Jf(y,S,t);$d(y,W);break e;case 1:x=S;var $=y.type,V=y.stateNode;if(!(128&y.flags)&&("function"==typeof $.getDerivedStateFromError||null!==V&&"function"==typeof V.componentDidCatch&&(null===nT||!nT.has(V)))){y.flags|=65536,t&=-t,y.lanes|=t;var X=Mf(y,x,t);$d(y,X);break e}}y=y.return}while(null!==y)}Zh(n)}catch(e){t=e,nl===n&&null!==n&&(nl=n=n.return);continue}break}}function Rh(){var e=nr.current;return nr.current=rG,null===e?rG:e}function og(){(0===nm||3===nm||2===nm)&&(nm=4),null!==ns&&(268435455&nb||268435455&ny)&&Kh(ns,nh)}function Qh(e,t){var n=no;no|=2;var l=Rh();for((ns!==e||nh!==t)&&(nC=null,Sh(e,t));;)try{(function(){for(;null!==nl;)ai(nl)})();break}catch(t){Uh(e,t)}if(Kd(),no=n,nr.current=l,null!==nl)throw Error(m(261));return ns=null,nh=0,nm}function ai(e){var t=y(e.alternate,e,nu);e.memoizedProps=e.pendingProps,null===t?Zh(e):nl=t,nn.current=null}function Zh(e){var y=e;do{var _=y.alternate;if(e=y.return,32768&y.flags){if(null!==(_=function(e,t){switch(nd(t),t.tag){case 1:return A(t.type)&&mc(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return De(),q(tL),q(tD),Ie(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Fe(t),null;case 13:if(q(rR),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(m(340));Ad()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return q(rR),null;case 4:return De(),null;case 10:return Md(t.type._context),null;case 22:case 23:return Fg(),null;default:return null}}(_,y))){_.flags&=32767,nl=_;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nm=6,nl=null;return}}else if(null!==(_=function(e,y,_){var x=y.pendingProps;switch(nd(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Q(y),null;case 1:case 17:return A(y.type)&&mc(),Q(y),null;case 3:return _=y.stateNode,De(),q(tL),q(tD),Ie(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(null===e||null===e.child)&&(yd(y)?ug(y):null===e||e.memoizedState.isDehydrated&&!(256&y.flags)||(y.flags|=1024,null!==rd&&(Dg(rd),rd=null))),n(e,y),Q(y),null;case 5:Fe(y),_=Be(rE.current);var S=y.type;if(null!==e&&null!=y.stateNode)l(e,y,S,x,_),e.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!x){if(null===y.stateNode)throw Error(m(166));return Q(y),null}if(e=Be(rM.current),yd(y)){if(!eT)throw Error(m(175));e=tb(y.stateNode,y.type,y.memoizedProps,_,e,y,!ru),y.updateQueue=e,null!==e&&ug(y)}else{var w=em(S,x,_,e,y);t(w,y,!1,!1),y.stateNode=w,eb(w,S,x,_,e)&&ug(y)}null!==y.ref&&(y.flags|=512,y.flags|=2097152)}return Q(y),null;case 6:if(e&&null!=y.stateNode)c(e,y,e.memoizedProps,x);else{if("string"!=typeof x&&null===y.stateNode)throw Error(m(166));if(e=Be(rE.current),_=Be(rM.current),yd(y)){if(!eT)throw Error(m(176));if((x=ty(e=y.stateNode,_=y.memoizedProps,y,!ru))&&null!==(S=ro))switch(S.tag){case 3:tM(S.stateNode.containerInfo,e,_,(1&S.mode)!=0);break;case 5:tT(S.type,S.memoizedProps,S.stateNode,e,_,(1&S.mode)!=0)}x&&ug(y)}else y.stateNode=ex(x,e,_,y)}return Q(y),null;case 13:if(q(rR),x=y.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rl&&null!==rs&&1&y.mode&&!(128&y.flags))zd(),Ad(),y.flags|=98560,S=!1;else if(S=yd(y),null!==x&&null!==x.dehydrated){if(null===e){if(!S)throw Error(m(318));if(!eT)throw Error(m(344));if(!(S=null!==(S=y.memoizedState)?S.dehydrated:null))throw Error(m(317));t_(S,y)}else Ad(),128&y.flags||(y.memoizedState=null),y.flags|=4;Q(y),S=!1}else null!==rd&&(Dg(rd),rd=null),S=!0;if(!S)return 65536&y.flags?y:null}return 128&y.flags?(y.lanes=_,y):((_=null!==x)!=(null!==e&&null!==e.memoizedState)&&_&&(y.child.flags|=8192,1&y.mode&&(null===e||1&rR.current?0===nm&&(nm=3):og())),null!==y.updateQueue&&(y.flags|=4),Q(y),null);case 4:return De(),n(e,y),null===e&&eR(y.stateNode.containerInfo),Q(y),null;case 10:return Md(y.type._context),Q(y),null;case 19:if(q(rR),null===(S=y.memoizedState))return Q(y),null;if(x=(128&y.flags)!=0,null===(w=S.rendering)){if(x)Bg(S,!1);else{if(0!==nm||null!==e&&128&e.flags)for(e=y.child;null!==e;){if(null!==(w=Ge(e))){for(y.flags|=128,Bg(S,!1),null!==(e=w.updateQueue)&&(y.updateQueue=e,y.flags|=4),y.subtreeFlags=0,e=_,_=y.child;null!==_;)x=_,S=e,x.flags&=14680066,null===(w=x.alternate)?(x.childLanes=0,x.lanes=S,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=w.childLanes,x.lanes=w.lanes,x.child=w.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=w.memoizedProps,x.memoizedState=w.memoizedState,x.updateQueue=w.updateQueue,x.type=w.type,S=w.dependencies,x.dependencies=null===S?null:{lanes:S.lanes,firstContext:S.firstContext}),_=_.sibling;return v(rR,1&rR.current|2),y.child}e=e.sibling}null!==S.tail&&tq()>nk&&(y.flags|=128,x=!0,Bg(S,!1),y.lanes=4194304)}}else{if(!x){if(null!==(e=Ge(w))){if(y.flags|=128,x=!0,null!==(e=e.updateQueue)&&(y.updateQueue=e,y.flags|=4),Bg(S,!0),null===S.tail&&"hidden"===S.tailMode&&!w.alternate&&!rl)return Q(y),null}else 2*tq()-S.renderingStartTime>nk&&1073741824!==_&&(y.flags|=128,x=!0,Bg(S,!1),y.lanes=4194304)}S.isBackwards?(w.sibling=y.child,y.child=w):(null!==(e=S.last)?e.sibling=w:y.child=w,S.last=w)}return null!==S.tail?(y=S.tail,S.rendering=y,S.tail=y.sibling,S.renderingStartTime=tq(),y.sibling=null,e=rR.current,v(rR,x?1&e|2:1&e),y):(Q(y),null);case 22:case 23:return Fg(),_=null!==y.memoizedState,null!==e&&null!==e.memoizedState!==_&&(y.flags|=8192),_&&1&y.mode?1073741824&nu&&(Q(y),eP&&6&y.subtreeFlags&&(y.flags|=8192)):Q(y),null;case 24:case 25:return null}throw Error(m(156,y.tag))}(_,y,nu))){nl=_;return}if(null!==(y=y.sibling)){nl=y;return}nl=y=e}while(null!==y);0===nm&&(nm=5)}function Xh(e,t,n){var l=tG,c=na.transition;try{na.transition=null,tG=1,function(e,t,n,l){do Ph();while(null!==nR);if(6&no)throw Error(m(327));n=e.finishedWork;var c=e.finishedLanes;if(null!==n){if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(m(177));e.callbackNode=null,e.callbackPriority=0;var y=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-tO(n),y=1<<c;t[c]=0,l[c]=-1,e[c]=-1,n&=~y}}(e,y),e===ns&&(nl=ns=null,nh=0),(2064&n.subtreeFlags||2064&n.flags)&&!nE&&(nE=!0,tU(tY,function(){return Ph(),null})),y=(15990&n.flags)!=0,15990&n.subtreeFlags||y){y=na.transition,na.transition=null;var _,x=tG;tG=1;var S=no;no|=4,nn.current=null,function(e,t){for(ed(e.containerInfo),rJ=t;null!==rJ;)if(t=(e=rJ).child,(1028&e.subtreeFlags)!=0&&null!==t)t.return=e,rJ=t;else for(;null!==rJ;){e=rJ;try{var n=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var l=n.memoizedProps,c=n.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?l:Fd(e.type,l),c);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:eP&&e3(e.stateNode.containerInfo);break;default:throw Error(m(163))}}catch(t){U(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,rJ=t;break}rJ=e.return}n=r0,r0=!1}(e,n),ah(n,e),ep(e.containerInfo),e.current=n,rJ=_=n,function fh(e,t,n){for(var l=(1&e.mode)!=0;null!==rJ;){var c=rJ,y=c.child;if(22===c.tag&&l){var _=null!==c.memoizedState||rY;if(!_){var x=c.alternate,S=null!==x&&null!==x.memoizedState||rQ;x=rY;var w=rQ;if(rY=_,(rQ=S)&&!w)for(rJ=c;null!==rJ;)S=(_=rJ).child,22===_.tag&&null!==_.memoizedState?gh(c):null!==S?(S.return=_,rJ=S):gh(c);for(;null!==y;)rJ=y,fh(y),y=y.sibling;rJ=c,rY=x,rQ=w}hh(e)}else 8772&c.subtreeFlags&&null!==y?(y.return=c,rJ=y):hh(e)}}(_),tV(),no=S,tG=x,na.transition=y}else e.current=n;if(nE&&(nE=!1,nR=e,nF=c),0===(y=e.pendingLanes)&&(nT=null),function(e){if(tJ&&"function"==typeof tJ.onCommitFiberRoot)try{tJ.onCommitFiberRoot(tZ,e,void 0,(128&e.current.flags)==128)}catch{}}(n.stateNode),Lh(e,tq()),null!==t)for(l=e.onRecoverableError,n=0;n<t.length;n++)l((c=t[n]).value,{componentStack:c.stack,digest:c.digest});if(nP)throw nP=!1,e=nM,nM=null,e;1&nF&&0!==e.tag&&Ph(),1&(y=e.pendingLanes)?e===nA?nN++:(nN=0,nA=e):nN=0,ad()}}(e,t,n,l)}finally{na.transition=c,tG=l}return null}function Ph(){if(null!==nR){var e=Ic(nF),t=na.transition,n=tG;try{if(na.transition=null,tG=16>e?16:e,null===nR)var l=!1;else{if(e=nR,nR=null,nF=0,6&no)throw Error(m(331));var c=no;for(no|=4,rJ=e.current;null!==rJ;){var y=rJ,_=y.child;if(16&rJ.flags){var x=y.deletions;if(null!==x){for(var S=0;S<x.length;S++){var w=x[S];for(rJ=w;null!==rJ;){var T=rJ;switch(T.tag){case 0:case 11:case 15:Ng(8,T,y)}var E=T.child;if(null!==E)E.return=T,rJ=E;else for(;null!==rJ;){var F=(T=rJ).sibling,D=T.return;if(function Qg(e){var t=e.alternate;null!==t&&(e.alternate=null,Qg(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&eN(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}(T),T===w){rJ=null;break}if(null!==F){F.return=D,rJ=F;break}rJ=D}}}var L=y.alternate;if(null!==L){var j=L.child;if(null!==j){L.child=null;do{var O=j.sibling;j.sibling=null,j=O}while(null!==j)}}rJ=y}}if(2064&y.subtreeFlags&&null!==_)_.return=y,rJ=_;else for(;null!==rJ;){if(y=rJ,2048&y.flags)switch(y.tag){case 0:case 11:case 15:Ng(9,y,y.return)}var W=y.sibling;if(null!==W){W.return=y.return,rJ=W;break}rJ=y.return}}var $=e.current;for(rJ=$;null!==rJ;){var V=(_=rJ).child;if(2064&_.subtreeFlags&&null!==V)V.return=_,rJ=V;else for(_=$;null!==rJ;){if(x=rJ,2048&x.flags)try{switch(x.tag){case 0:case 11:case 15:Og(9,x)}}catch(e){U(x,x.return,e)}if(x===_){rJ=null;break}var X=x.sibling;if(null!==X){X.return=x.return,rJ=X;break}rJ=x.return}}if(no=c,ad(),tJ&&"function"==typeof tJ.onPostCommitFiberRoot)try{tJ.onPostCommitFiberRoot(tZ,e)}catch{}l=!0}return l}finally{tG=n,na.transition=t}}return!1}function di(e,t,n){t=Jf(e,t=Ff(n,t),1),e=Yd(e,t,1),t=I(),null!==e&&(Fc(e,1,t),Lh(e,t))}function U(e,t,n){if(3===e.tag)di(e,e,n);else for(;null!==t;){if(3===t.tag){di(t,e,n);break}if(1===t.tag){var l=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof l.componentDidCatch&&(null===nT||!nT.has(l))){e=Mf(t,e=Ff(n,e),1),t=Yd(t,e,1),e=I(),null!==t&&(Fc(t,1,e),Lh(t,e));break}}t=t.return}}function Pf(e,t,n){var l=e.pingCache;null!==l&&l.delete(t),t=I(),e.pingedLanes|=e.suspendedLanes&n,ns===e&&(nh&n)===n&&(4===nm||3===nm&&(130023424&nh)===nh&&500>tq()-nw?Sh(e,0):n_|=n),Lh(e,t)}function ei(e,t){0!==t||(1&e.mode?(t=t$,130023424&(t$<<=1)||(t$=4194304)):t=1);var n=I();null!==(e=Td(e,t))&&(Fc(e,t,n),Lh(e,n))}function pg(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ei(e,n)}function Zg(e,t){var n=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;null!==c&&(n=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(m(314))}null!==l&&l.delete(t),ei(e,n)}function gi(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function td(e,t,n,l){return new gi(e,t,n,l)}function Wf(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qe(e,t){var n=e.alternate;return null===n?((n=td(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function se(e,t,n,l,c,y){var _=2;if(l=e,"function"==typeof e)Wf(e)&&(_=1);else if("string"==typeof e)_=5;else e:switch(e){case L:return ue(n.children,c,y,t);case j:_=8,c|=8;break;case O:return(e=td(12,n,t,2|c)).elementType=O,e.lanes=y,e;case Y:return(e=td(13,n,t,c)).elementType=Y,e.lanes=y,e;case Z:return(e=td(19,n,t,c)).elementType=Z,e.lanes=y,e;case en:return kg(n,c,y,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case $:_=10;break e;case V:_=9;break e;case X:_=11;break e;case et:_=14;break e;case er:_=16,l=null;break e}throw Error(m(130,null==e?e:typeof e,""))}return(t=td(_,n,t,c)).elementType=e,t.type=l,t.lanes=y,t}function ue(e,t,n,l){return(e=td(7,e,l,t)).lanes=n,e}function kg(e,t,n,l){return(e=td(22,e,l,t)).elementType=en,e.lanes=n,e.stateNode={isHidden:!1},e}function re(e,t,n){return(e=td(6,e,null,t)).lanes=n,e}function te(e,t,n){return(t=td(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hi(e,t,n,l,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ek,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ec(0),this.expirationTimes=Ec(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ec(0),this.identifierPrefix=l,this.onRecoverableError=c,eT&&(this.mutableSourceEagerHydrationData=null)}function ii(e,t,n,l,c,y,_,x,S){return e=new hi(e,t,n,x,S),1===t?(t=1,!0===y&&(t|=8)):t=0,y=td(3,null,null,t),e.current=y,y.stateNode=e,y.memoizedState={element:l,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vd(y),e}function ji(e){if(!e)return tA;e=e._reactInternals;e:{if(wa(e)!==e||1!==e.tag)throw Error(m(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(A(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(m(171))}if(1===e.tag){var n=e.type;if(A(n))return oc(e,n,t)}return t}function ki(e){var t=e._reactInternals;if(void 0===t)throw"function"==typeof e.render?Error(m(188)):Error(m(268,e=Object.keys(e).join(",")));return null===(e=Aa(t))?null:e.stateNode}function li(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function mi(e,t){li(e,t),(e=e.alternate)&&li(e,t)}function ni(e){return null===(e=Aa(e))?null:e.stateNode}function oi(){return null}return y=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||tL.current)rK=!0;else{if(!(e.lanes&n)&&!(128&t.flags))return rK=!1,function(e,t,n){switch(t.tag){case 3:fg(t),Ad();break;case 5:Ee(t);break;case 1:A(t.type)&&pc(t);break;case 4:Ce(t,t.stateNode.containerInfo);break;case 10:Ld(t,t.type._context,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(null!==l)return null!==l.dehydrated?(v(rR,1&rR.current),t.flags|=128,null):n&t.child.childLanes?jg(e,t,n):(v(rR,1&rR.current),null!==(e=Uf(e,t,n))?e.sibling:null);v(rR,1&rR.current);break;case 19:if(l=(n&t.childLanes)!=0,128&e.flags){if(l)return sg(e,t,n);t.flags|=128}var c=t.memoizedState;if(null!==c&&(c.rendering=null,c.tail=null,c.lastEffect=null),v(rR,rR.current),l)break;return null;case 22:case 23:return t.lanes=0,Zf(e,t,n)}return Uf(e,t,n)}(e,t,n);rK=!!(131072&e.flags)}}else rK=!1,rl&&1048576&t.flags&&ld(t,t7,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;dg(e,t),e=t.pendingProps;var c=lc(t,tD.current);Od(t,n),c=Re(null,t,l,e,c,n);var y=We();return t.flags|=1,"object"==typeof c&&null!==c&&"function"==typeof c.render&&void 0===c.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,A(l)?(y=!0,pc(t)):y=!1,t.memoizedState=null!==c.state&&void 0!==c.state?c.state:null,Vd(t),c.updater=rw,t.stateNode=c,c._reactInternals=t,le(t,l,e,n),t=eg(null,t,l,!0,y,n)):(t.tag=0,rl&&y&&md(t),P(null,t,c,n),t=t.child),t;case 16:l=t.elementType;e:{switch(dg(e,t),e=t.pendingProps,l=(c=l._init)(l._payload),t.type=l,c=t.tag=function(e){if("function"==typeof e)return Wf(e)?1:0;if(null!=e){if((e=e.$$typeof)===X)return 11;if(e===et)return 14}return 2}(l),e=Fd(l,e),c){case 0:t=Yf(null,t,l,e,n);break e;case 1:t=cg(null,t,l,e,n);break e;case 11:t=Tf(null,t,l,e,n);break e;case 14:t=Vf(null,t,l,Fd(l.type,e),n);break e}throw Error(m(306,l,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Fd(l,c),Yf(e,t,l,c,n);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Fd(l,c),cg(e,t,l,c,n);case 3:e:{if(fg(t),null===e)throw Error(m(387));l=t.pendingProps,c=(y=t.memoizedState).element,Wd(e,t),ae(t,l,null,n);var _=t.memoizedState;if(l=_.element,eT&&y.isDehydrated){if(y={element:l,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},t.updateQueue.baseState=y,t.memoizedState=y,256&t.flags){c=Ff(Error(m(423)),t),t=gg(e,t,l,n,c);break e}if(l!==c){c=Ff(Error(m(424)),t),t=gg(e,t,l,n,c);break e}for(eT&&(rs=tm(t.stateNode.containerInfo),ro=t,rl=!0,rd=null,ru=!1),n=rC(t,null,l,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ad(),l===c){t=Uf(e,t,n);break e}P(e,t,l,n)}t=t.child}return t;case 5:return Ee(t),null===e&&wd(t),l=t.type,c=t.pendingProps,y=null!==e?e.memoizedProps:null,_=c.children,e_(l,c)?_=null:null!==y&&e_(l,y)&&(t.flags|=32),bg(e,t),P(e,t,_,n),t.child;case 6:return null===e&&wd(t),null;case 13:return jg(e,t,n);case 4:return Ce(t,t.stateNode.containerInfo),l=t.pendingProps,null===e?t.child=rk(t,null,l,n):P(e,t,l,n),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Fd(l,c),Tf(e,t,l,c,n);case 7:return P(e,t,t.pendingProps,n),t.child;case 8:case 12:return P(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(l=t.type._context,c=t.pendingProps,y=t.memoizedProps,Ld(t,l,_=c.value),null!==y){if(t0(y.value,_)){if(y.children===c.children&&!tL.current){t=Uf(e,t,n);break e}}else for(null!==(y=t.child)&&(y.return=t);null!==y;){var x=y.dependencies;if(null!==x){_=y.child;for(var S=x.firstContext;null!==S;){if(S.context===l){if(1===y.tag){(S=Xd(-1,n&-n)).tag=2;var w=y.updateQueue;if(null!==w){var T=(w=w.shared).pending;null===T?S.next=S:(S.next=T.next,T.next=S),w.pending=S}}y.lanes|=n,null!==(S=y.alternate)&&(S.lanes|=n),Nd(y.return,n,t),x.lanes|=n;break}S=S.next}}else if(10===y.tag)_=y.type===t.type?null:y.child;else if(18===y.tag){if(null===(_=y.return))throw Error(m(341));_.lanes|=n,null!==(x=_.alternate)&&(x.lanes|=n),Nd(_,n,t),_=y.sibling}else _=y.child;if(null!==_)_.return=y;else for(_=y;null!==_;){if(_===t){_=null;break}if(null!==(y=_.sibling)){y.return=_.return,_=y;break}_=_.return}y=_}}P(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,l=t.pendingProps.children,Od(t,n),l=l(c=Pd(c)),t.flags|=1,P(e,t,l,n),t.child;case 14:return c=Fd(l=t.type,t.pendingProps),c=Fd(l.type,c),Vf(e,t,l,c,n);case 15:return Xf(e,t,t.type,t.pendingProps,n);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Fd(l,c),dg(e,t),t.tag=1,A(l)?(e=!0,pc(t)):e=!1,Od(t,n),je(t,l,c),le(t,l,c,n),eg(null,t,l,!0,e,n);case 19:return sg(e,t,n);case 22:return Zf(e,t,n)}throw Error(m(156,t.tag))},_.attemptContinuousHydration=function(e){if(13===e.tag){var t=Td(e,134217728);null!==t&&ge(t,e,134217728,I()),mi(e,134217728)}},_.attemptDiscreteHydration=function(e){if(13===e.tag){var t=Td(e,1);null!==t&&ge(t,e,1,I()),mi(e,1)}},_.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=fe(e),n=Td(e,t);null!==n&&ge(n,e,t,I()),mi(e,t)}},_.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yc(t.pendingLanes);0===n||(Hc(t,1|n),Lh(t,tq()),6&no||(Ch(),ad()))}break;case 13:Yh(function(){var t=Td(e,1);null!==t&&ge(t,e,1,I())}),mi(e,1)}},_.batchedUpdates=function(e,t){var n=no;no|=1;try{return e(t)}finally{0===(no=n)&&(Ch(),t2&&ad())}},_.createComponentSelector=function(e){return{$$typeof:r3,value:e}},_.createContainer=function(e,t,n,l,c,y,_){return ii(e,t,!1,null,n,l,c,y,_)},_.createHasPseudoClassSelector=function(e){return{$$typeof:r4,value:e}},_.createHydrationContainer=function(e,t,n,l,c,y,_,x,S){return(e=ii(n,l,!0,e,c,y,_,x,S)).context=ji(null),n=e.current,(y=Xd(l=I(),c=fe(n))).callback=t??null,Yd(n,y,c),e.current.lanes=c,Fc(e,c,l),Lh(e,l),e},_.createPortal=function(e,t,n){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:D,key:null==l?null:""+l,children:e,containerInfo:t,implementation:n}},_.createRoleSelector=function(e){return{$$typeof:r6,value:e}},_.createTestNameSelector=function(e){return{$$typeof:r8,value:e}},_.createTextSelector=function(e){return{$$typeof:r9,value:e}},_.deferredUpdates=function(e){var t=tG,n=na.transition;try{return na.transition=null,tG=16,e()}finally{tG=t,na.transition=n}},_.discreteUpdates=function(e,t,n,l,c){var y=tG,_=na.transition;try{return na.transition=null,tG=1,e(t,n,l,c)}finally{tG=y,na.transition=_,0===no&&Ch()}},_.findAllNodes=sh,_.findBoundingRects=function(e,t){if(!eL)throw Error(m(363));t=sh(e,t),e=[];for(var n=0;n<t.length;n++)e.push(eO(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var l=n.x,c=l+n.width,y=n.y,_=y+n.height,x=t-1;0<=x;x--)if(t!==x){var S=e[x],w=S.x,T=w+S.width,E=S.y,F=E+S.height;if(l>=w&&y>=E&&c<=T&&_<=F){e.splice(t,1);break}if(l!==w||n.width!==S.width||F<y||E>_){if(!(y!==E||n.height!==S.height||T<l||w>c)){w>l&&(S.width+=w-l,S.x=l),T<c&&(S.width=c-w),e.splice(t,1);break}}else{E>y&&(S.height+=E-y,S.y=y),F<_&&(S.height=_-E),e.splice(t,1);break}}}return e},_.findHostInstance=ki,_.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=ya(e))?function Ca(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=Ca(e);if(null!==t)return t}e=e.sibling}return null}(e):null)?null:e.stateNode},_.findHostInstanceWithWarning=function(e){return ki(e)},_.flushControlled=function(e){var t=no;no|=1;var n=na.transition,l=tG;try{na.transition=null,tG=1,e()}finally{tG=l,na.transition=n,0===(no=t)&&(Ch(),ad())}},_.flushPassiveEffects=Ph,_.flushSync=Yh,_.focusWithin=function(e,t){if(!eL)throw Error(m(363));for(t=Array.from(t=rh(e=oh(e),t)),e=0;e<t.length;){var n=t[e++];if(!ez(n)){if(5===n.tag&&e$(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},_.getCurrentUpdatePriority=function(){return tG},_.getFindAllNodesFailureDescription=function(e,t){if(!eL)throw Error(m(363));var n=0,l=[];e=[oh(e),0];for(var c=0;c<e.length;){var y=e[c++],_=e[c++],x=t[_];if((5!==y.tag||!ez(y))&&(ph(y,x)&&(l.push(qh(x)),++_>n&&(n=_)),_<t.length))for(y=y.child;null!==y;)e.push(y,_),y=y.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(qh(t[n]));return`findAllNodes was able to match part of the selector:
  `+l.join(" > ")+`

No matching component was found for:
  `+e.join(" > ")}return null},_.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?el(e.child.stateNode):e.child.stateNode:null},_.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:ni,findFiberByHostInstance:e.findFiberByHostInstance||oi,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{tZ=t.inject(e),tJ=t}catch{}e=!!t.checkDCE}}return e},_.isAlreadyRendering=function(){return!1},_.observeVisibleRects=function(e,t,n,l){if(!eL)throw Error(m(363));var c=eG(e=sh(e,t),n,l).disconnect;return{disconnect:function(){c()}}},_.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},_.runWithPriority=function(e,t){var n=tG;try{return tG=e,t()}finally{tG=n}},_.shouldError=function(){return null},_.shouldSuspend=function(){return!1},_.updateContainer=function(e,t,n,l){var c=t.current,y=I(),_=fe(c);return n=ji(n),null===t.context?t.context=n:t.pendingContext=n,(t=Xd(y,_)).payload={element:e},null!==(l=void 0===l?null:l)&&(t.callback=l),null!==(e=Yd(c,t,_))&&(ge(e,c,_,y),Zd(e,c,_)),_},_}),F);var o7=o6.exports;let st=getDefaultExportFromCjs(o7);var sr={exports:{}},sn={};sr.exports=(L||(L=1,sn.ConcurrentRoot=1,sn.ContinuousEventPriority=4,sn.DefaultEventPriority=16,sn.DiscreteEventPriority=1,sn.IdleEventPriority=536870912,sn.LegacyRoot=0),sn);var si=sr.exports;let sa={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0},so=!1,ss=!1,sl=".react-konva-event",su=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,sc=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,sp={};function applyNodeProps(e,t,n=sp){if(!so&&"zIndex"in t&&(console.warn(sc),so=!0),!ss&&t.draggable){var l=void 0!==t.x||void 0!==t.y,c=t.onDragEnd||t.onDragMove;l&&!c&&(console.warn(su),ss=!0)}for(var y in n)if(!sa[y]){var _="on"===y.slice(0,2),x=n[y]!==t[y];if(_&&x){var S=y.substr(2).toLowerCase();"content"===S.substr(0,7)&&(S="content"+S.substr(7,1).toUpperCase()+S.substr(8)),e.off(S,n[y])}t.hasOwnProperty(y)||e.setAttr(y,void 0)}var w=t._useStrictMode,T={},E=!1;let F={};for(var y in t)if(!sa[y]){var _="on"===y.slice(0,2),D=n[y]!==t[y];if(_&&D){var S=y.substr(2).toLowerCase();"content"===S.substr(0,7)&&(S="content"+S.substr(7,1).toUpperCase()+S.substr(8)),t[y]&&(F[S]=t[y])}!_&&(t[y]!==n[y]||w&&t[y]!==e.getAttr(y))&&(E=!0,T[y]=t[y])}for(var S in E&&(e.setAttrs(T),updatePicture(e)),F)e.on(S+sl,F[S])}function updatePicture(e){if(!iD.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var sm={exports:{}},sv={};sm.exports=(j||(j=1,function(e){function f(e,t){var n=e.length;for(e.push(t);0<n;){var l=n-1>>>1,c=e[l];if(0<g(c,t))e[l]=t,e[n]=c,n=l;else break}}function h2(e){return 0===e.length?null:e[0]}function k(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var l=0,c=e.length,y=c>>>1;l<y;){var _=2*(l+1)-1,x=e[_],S=_+1,w=e[S];if(0>g(x,n))S<c&&0>g(w,x)?(e[l]=w,e[S]=n,l=S):(e[l]=x,e[_]=n,l=_);else if(S<c&&0>g(w,n))e[l]=w,e[S]=n,l=S;else break}}return t}function g(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var t,n=performance;e.unstable_now=function(){return n.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var y=[],_=[],x=1,S=null,w=3,T=!1,E=!1,F=!1,D="function"==typeof setTimeout?setTimeout:null,L="function"==typeof clearTimeout?clearTimeout:null,j="u">typeof setImmediate?setImmediate:null;function G(e){for(var t=h2(_);null!==t;){if(null===t.callback)k(_);else if(t.startTime<=e)k(_),t.sortIndex=t.expirationTime,f(y,t);else break;t=h2(_)}}function H(e){if(F=!1,G(e),!E){if(null!==h2(y))E=!0,I(J);else{var t=h2(_);null!==t&&K(H,t.startTime-e)}}}function J(t,n){E=!1,F&&(F=!1,L($),$=-1),T=!0;var l=w;try{for(G(n),S=h2(y);null!==S&&(!(S.expirationTime>n)||t&&!M());){var c=S.callback;if("function"==typeof c){S.callback=null,w=S.priorityLevel;var x=c(S.expirationTime<=n);n=e.unstable_now(),"function"==typeof x?S.callback=x:S===h2(y)&&k(y),G(n)}else k(y);S=h2(y)}if(null!==S)var D=!0;else{var j=h2(_);null!==j&&K(H,j.startTime-n),D=!1}return D}finally{S=null,w=l,T=!1}}"u">typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var O=!1,W=null,$=-1,V=5,X=-1;function M(){return!(e.unstable_now()-X<V)}function R(){if(null!==W){var n=e.unstable_now();X=n;var l=!0;try{l=W(!0,n)}finally{l?t():(O=!1,W=null)}}else O=!1}if("function"==typeof j)t=function(){j(R)};else if("u">typeof MessageChannel){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=R,t=function(){Z.postMessage(null)}}else t=function(){D(R,0)};function I(e){W=e,O||(O=!0,t())}function K(t,n){$=D(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){E||T||(E=!0,I(J))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return h2(y)},e.unstable_next=function(e){switch(w){case 1:case 2:case 3:var t=3;break;default:t=w}var n=w;w=t;try{return e()}finally{w=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=w;w=e;try{return t()}finally{w=n}},e.unstable_scheduleCallback=function(t,n,l){var c=e.unstable_now();switch(l="object"==typeof l&&null!==l&&"number"==typeof(l=l.delay)&&0<l?c+l:c,t){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=l+S,t={id:x++,callback:n,priorityLevel:t,startTime:l,expirationTime:S,sortIndex:-1},l>c?(t.sortIndex=l,f(_,t),null===h2(y)&&t===h2(_)&&(F?(L($),$=-1):F=!0,K(H,l-c))):(t.sortIndex=S,f(y,t),E||T||(E=!0,I(J))),t},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(e){var t=w;return function(){var n=w;w=t;try{return e.apply(this,arguments)}finally{w=n}}}}(sv)),sv);var sb=sm.exports;let sy={},s_={};o4.Node.prototype._applyProps=applyNodeProps;let sx=setTimeout,sS=clearTimeout;function insertBefore(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),updatePicture(e)}let sw=Object.freeze(Object.defineProperty({__proto__:null,appendChild:function(e,t){t.parent===e?t.moveToTop():e.add(t),updatePicture(e)},appendChildToContainer:function(e,t){t.parent===e?t.moveToTop():e.add(t),updatePicture(e)},appendInitialChild:function(e,t){if("string"==typeof t){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),updatePicture(e)},cancelTimeout:sS,clearContainer:function(e){},commitMount:function(e,t,n){},commitTextUpdate:function(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)},commitUpdate:function(e,t,n,l,c){applyNodeProps(e,c,l)},createInstance:function(e,t,n){let l=o4[e];l||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),l=o4.Group);let c={},y={};for(var _ in t)"on"===_.slice(0,2)?y[_]=t[_]:c[_]=t[_];let x=new l(c);return applyNodeProps(x,y),x},createTextInstance:function(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)},detachDeletedInstance:function(){},finalizeInitialChildren:function(e,t,n){return!1},getChildHostContext:function(){return sy},getCurrentEventPriority:()=>si.DefaultEventPriority,getPublicInstance:function(e){return e},getRootHostContext:function(){return sy},hideInstance:function(e){e.hide(),updatePicture(e)},hideTextInstance:function(e){},idlePriority:sb.unstable_IdlePriority,insertBefore,insertInContainerBefore:function(e,t,n){insertBefore(e,t,n)},isPrimaryRenderer:!1,noTimeout:-1,now:sb.unstable_now,prepareForCommit:function(){return null},preparePortalMount:function(){return null},prepareUpdate:function(e,t,n,l){return s_},removeChild:function(e,t){t.destroy(),t.off(sl),updatePicture(e)},removeChildFromContainer:function(e,t){t.destroy(),t.off(sl),updatePicture(e)},resetAfterCommit:function(){},resetTextContent:function(e){},run:sb.unstable_runWithPriority,scheduleTimeout:sx,shouldDeprioritizeSubtree:function(e,t){return!1},shouldSetTextContent:function(e,t){return!1},supportsMutation:!0,unhideInstance:function(e,t){(null==t.visible||t.visible)&&e.show()},unhideTextInstance:function(e,t){},warnsIfNotActing:!0},Symbol.toStringTag,{value:"Module"}));var sk=Object.defineProperty,sC=Object.defineProperties,sP=Object.getOwnPropertyDescriptors,sM=Object.getOwnPropertySymbols,sT=Object.prototype.hasOwnProperty,sE=Object.prototype.propertyIsEnumerable,__defNormalProp2=(e,t,n)=>t in e?sk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))sT.call(t,n)&&__defNormalProp2(e,n,t[n]);if(sM)for(var n of sM(t))sE.call(t,n)&&__defNormalProp2(e,n,t[n]);return e},__spreadProps=(e,t)=>sC(e,sP(t));function wrapContext(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch{return e}}let sR=wrapContext(W.createContext(null));let FiberProvider=class FiberProvider extends W.Component{render(){return W.createElement(sR.Provider,{value:this._reactInternals},this.props.children)}};let{ReactCurrentOwner:sF,ReactCurrentDispatcher:sN}=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,StageWrap=e=>{let t=W.useRef(),n=W.useRef(),l=W.useRef(),c=function(e){let t=W.useRef({});return W.useLayoutEffect(()=>{t.current=e}),W.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}(e),y=function(){let e=function(){var e,t;let n=function(){let e=W.useContext(sR);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=W.useId();return W.useMemo(()=>{for(let n of[null==sF?void 0:sF.current,e,null==e?void 0:e.alternate]){if(!n)continue;let e=function traverseFiber(e,t,n){if(!e)return;if(!0===n(e))return e;let l=t?e.return:e.child;for(;l;){let e=traverseFiber(l,t,n);if(e)return e;l=t?null:l.sibling}}(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}(),[l]=W.useState(()=>new Map);l.clear();let c=n;for(;c;){let n=null==(e=c.type)?void 0:e._context;n&&n!==sR&&!l.has(n)&&l.set(n,null==(t=null==sN?void 0:sN.current)?void 0:t.readContext(wrapContext(n))),c=c.return}return l}();return W.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>l=>W.createElement(t,null,W.createElement(n.Provider,__spreadProps(__spreadValues({},l),{value:e.get(n)}))),e=>W.createElement(FiberProvider,__spreadValues({},e))),[e])}(),_setRef=t=>{let{forwardedRef:n}=e;n&&("function"==typeof n?n(t):n.current=t)};return W.useLayoutEffect(()=>(n.current=new o4.Stage({width:e.width,height:e.height,container:t.current}),_setRef(n.current),l.current=sz.createContainer(n.current,si.LegacyRoot,!1,null),sz.updateContainer(W.createElement(y,{},e.children),l.current),()=>{o4.isBrowser&&(_setRef(null),sz.updateContainer(null,l.current,null),n.current.destroy())}),[]),W.useLayoutEffect(()=>{_setRef(n.current),applyNodeProps(n.current,e,c),sz.updateContainer(W.createElement(y,{},e.children),l.current,null)}),W.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},sA="Layer",sD="Group",sL="Label",sj="Rect",sO="Line",sI="Text",sz=st(sw);sz.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:W.version,rendererPackageName:"react-konva"});let sW=W.forwardRef((e,t)=>W.createElement(FiberProvider,{},W.createElement(StageWrap,{...e,forwardedRef:t})));let _ToolbarCheckbox=class _ToolbarCheckbox extends W.Component{constructor(){super(...arguments),__publicField(this,"id")}UNSAFE_componentWillMount(){this.id=v4()}render(){let{id:e,label:t,keyName:n,checked:l,onChange:c,disabled:y,classes:_,theme:x,...S}=this.props,w=e||this.id,T=na(_.checkbox,{[_.checkboxDisabled]:y}),E=n?`(${n})`:void 0;return(0,O.jsxs)("label",{htmlFor:w,className:T,title:E,children:[(0,O.jsx)("input",{id:w,type:"checkbox",checked:l,onChange:c,...S}),(0,O.jsx)("span",{className:_.checkboxLabel,children:t})]})}};let s$=withStyles(styles$p)(_ToolbarCheckbox),getLinePoints=(e,t,n,l)=>{let c=e.flat();return l&&"number"==typeof t&&"number"==typeof n?[...c,t,n]:c},sG=W.forwardRef((e,t)=>{let{children:n,span:l,name:c="shape",draggable:y,currentColor:_,strokeWidth:x,fontSize:S,pixel:w,showLabel:T,handleDragEnd:E,handleDragStart:F,handlePointClick:D,handleDragPoint:L,closed:j,pointHover:$,setPointHover:V,drawing:X,isSelected:Y,showPoints:Z,showCenter:et,theme:er,isDrawn:en,x:ea,y:eo,...es}=e,el=l.color||_,eh={name:c,ref:t,stroke:el,strokeWidth:x,strokeScaleEnabled:!1,fill:Y?getAlphaColor(el,.3):"transparent",...es},eu={strokeWidth:Math.max(x/2,1),stroke:el},ed=E(l),ep=F(l),em=y&&!$,ev="freehand"!==l.type&&(Z||en),handlePointMouseDown=(e,t)=>n=>{X&&t&&n.stopPropagation(),X&&e&&D(n)};return(0,O.jsx)(W.Fragment,{children:(0,O.jsxs)(sD,{draggable:em,onDragStart:em?ep:void 0,onDragEnd:em?ed:void 0,children:["rect"===l.type?(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(sj,{...eh,x:l.x,y:l.y,width:l.width,height:l.height}),et&&Y&&!X&&Z&&(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(sO,{points:[l.x,l.y,l.x+l.width,l.y+l.height],...eu}),(0,O.jsx)(sO,{points:[l.x+l.width,l.y,l.x,l.y+l.height],...eu})]})]}):(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(sO,{points:[...getLinePoints(l.points,ea,eo,en)],...eh,closed:j,lineJoin:ev?"round":"miter",lineCap:"round"}),ev&&l.points.map((e,t)=>{let n=`${l.id}-${t}`,c=$===n?2:1.5,y=Math.max(x*w,3),_=0===t,S=t===l.points.length-1;return(0,O.jsx)("Circle",{x:e[0],y:e[1],fill:el,radius:y*c,onMouseOver:()=>{(!X||_)&&V(n)},onMouseOut:()=>V(null),onMouseDown:handlePointMouseDown(_,S),onDragMove:L(l,t),onTouchStart:handlePointMouseDown(_,S),draggable:!!$,listening:!X||!S},t)})]}),n]})})});sG.displayName="Shape";let getLabelPos=e=>{if("rect"===e.type)return{x:e.width>=0?e.x:e.x+e.width,y:e.height>=0?e.y:e.y+e.height};let t=[...e.points].sort((e,t)=>e[1]-t[1])[0];return{x:t[0],y:t[1]}},ShapeLabel=e=>{let{span:t,strokeWidth:n,pixel:l,theme:c,fontSize:y,..._}=e,x=getLabelPos(t);return(0,O.jsx)(sD,{name:"label",children:(0,O.jsxs)(sL,{x:x.x,y:x.y-n/2*l,..._,children:[(0,O.jsx)("Tag",{fill:t.color}),(0,O.jsx)(sI,{text:t.label,fontFamily:c.fontSecondary,fontSize:y,fontStyle:"bold",padding:.2*y,fill:getContrastColor(t.color)})]})})};let URLImage=class URLImage extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{image:void 0}),__publicField(this,"image"),__publicField(this,"imageNode",null),__publicField(this,"handleLoad",()=>{var e,t;this.setState({image:this.image}),null==(t=null==(e=this.imageNode)?void 0:e.getLayer())||t.batchDraw(),this.props.onLoad&&this.props.onLoad(this.image)})}componentDidMount(){this.loadImage()}componentDidUpdate(e){e.src!==this.props.src&&this.loadImage()}componentWillUnmount(){this.image&&this.image.removeEventListener("load",this.handleLoad)}loadImage(){"u">typeof window&&(this.image=new window.Image,this.image.src=this.props.src,this.image.addEventListener("load",this.handleLoad))}render(){return(0,O.jsx)("Image",{x:this.props.x,y:this.props.y,opacity:this.props.opacity,image:this.state.image,ref:e=>{this.imageNode=e}})}};let sU="u">typeof window,getShape=(e,t="shape")=>e.name()===t?e:e.getChildren(e=>e.name()===t)[0],filterDuplicatePoints=e=>e.map(([t,n],l)=>{if(0===l)return[t,n];let[c,y]=e[l-1];return t===c&&n===y?null:[t,n]}).filter(e=>null!==e),getDimensions=(e,t)=>{let n=t.scaleX(),l=t.scaleY(),c=roundPx(t.x()),y=roundPx(t.y());if(t.scaleX(1),t.scaleY(1),t.x(0),t.y(0),"rect"===e.type&&isRect(e)){let _="shape"===t.name(),x={x:_?c:roundPx(e.x*n+c),y:_?y:roundPx(e.y*l+y),width:roundPx(e.width*n),height:roundPx(e.height*l)};return _&&(t.x(x.x),t.y(x.y)),{...x,points:rectToPoints(x),center:getCenter$1(x)}}if(!e.points)return{};let _=e.points.map(e=>[roundPx(e[0]*n+c),roundPx(e[1]*l+y)]);return getShape(t).points(_.flat()),{points:_}};let _ImageManualNew=class _ImageManualNew extends W.Component{constructor(){super(...arguments),__publicField(this,"keymap","IMAGE"),__publicField(this,"state",{label:"",modes:["rect","polygon"],mode:"rect",showAll:!0,showLabels:!0,spans:[],origSpans:[],current:null,drawing:!1,selected:null,hover:null,pointHover:null,pixel:1,strokeWidth:4,fontSize:16,fromCenter:!1,keepRatio:!1,selectKey:!1,SPANS_KEY:"spans",x:null,y:null,isDragged:null,isTransforming:null}),__publicField(this,"content",null),__publicField(this,"trf",null),__publicField(this,"layer",null),__publicField(this,"current",null),__publicField(this,"spans",{}),__publicField(this,"resetState",{x:null,y:null,current:null,selected:null,drawing:!1,isDragged:!1,isTransforming:!1,selectKey:!1,pointHover:null}),__publicField(this,"UNSAFE_componentWillMount",()=>{let{config:e}=this.props;this.setState({modes:e.imageManualModes,mode:e.imageManualModes[0],strokeWidth:e.imageManualStrokeWidth,fontSize:e.imageManualFontSize,minFontSize:e.imageManualFontSize,fromCenter:e.imageManualFromCenter,showCenter:e.showCenter,showLabels:e.imageManualShowLabels,SPANS_KEY:e.imageManualSpansKey})}),__publicField(this,"componentDidMount",()=>{let{content:e,config:t}=this.props;if(this.updateBoxes(e),t.labels&&t.labels.length&&this.setState({label:t.labels[0]}),sU&&this.context.shortcuts){let e=getKey(this.context,this.keymap,"select").toLowerCase(),t=getKey(this.context,this.keymap,"ratio").toLowerCase();document.body.addEventListener("keydown",n=>{this.keypressToState(n.key,e,"selectKey",!0),this.keypressToState(n.key,t,"keepRatio",!0)}),document.body.addEventListener("keyup",n=>{this.keypressToState(n.key,e,"selectKey",!1),this.keypressToState(n.key,t,"keepRatio",!1)})}}),__publicField(this,"componentDidUpdate",e=>{let{content:t}=this.props;e.content&&e.content[X]!==t[X]&&this.updateBoxes(t)}),__publicField(this,"keypressToState",(e,t,n,l)=>{e.toLowerCase()===t&&this.setState({[n]:l})}),__publicField(this,"handleImageLoad",e=>{if(!e)return;let t=e.naturalWidth,n=e.naturalHeight;this.props.content.width&&this.props.content.height||this.props.update({width:t,height:n});let{minWidth:l}=this.props,{minFontSize:c}=this.state;if(!c)return;let y=Math.max(c,c/l*t),_=Math.max(1,1/l*t),x=this.content?this.content.clientWidth:l;this.setState({width:t,height:n,fontSize:y,contentWidth:x,pixel:_})}),__publicField(this,"updateBoxes",e=>{let{SPANS_KEY:t}=this.state,n=(e[t]||[]).map((e,t)=>{let n={...e,color:e.color||this.getColor(e.label,t),id:e.id||v4()};if(isPointsRect(n)){let e=pointsToRect([n.points[0],n.points[2]]),t=getCenter$1(e);return{...n,...e,center:t,type:"type"in n&&n.type?n.type:"rect"}}if(isRect(n)){let e=getCenter$1(n),t="points"in n?n.points:rectToPoints(n);return{...n,points:t,center:e,type:n.type||"rect"}}if(n.points){let e=filterDuplicatePoints(n.points);return{...n,points:e,type:"type"in n&&n.type?n.type:"polygon"}}return n});this.setState({origSpans:n,spans:n,current:null,drawing:!1,selected:null})}),__publicField(this,"selectSpan",e=>{let{drawing:t}=this.state;t||this.setState({selected:e.id,label:e.label},()=>{this.trf&&this.trf.setNode(this.spans[e.id])})}),__publicField(this,"handleLabelSelect",e=>{let{selected:t,spans:n}=this.state;if(this.setState({label:e}),t){let l=n.map(e=>e.id).indexOf(t),c=this.getColor(e,l);this.updateSpan(t,{label:e,color:c})}}),__publicField(this,"handleDelete",()=>{let{selected:e,spans:t,SPANS_KEY:n}=this.state,l=e?t.filter(t=>t.id!==e):t;this.setState({spans:l,...this.resetState}),this.props.update({[n]:l})}),__publicField(this,"handleReset",()=>{let{SPANS_KEY:e}=this.state,t=this.state.origSpans;this.setState({spans:t,...this.resetState}),this.props.update({[e]:t})}),__publicField(this,"handleMouseDown",e=>{let{mode:t,current:n,selected:l,pointHover:c}=this.state,y=e.target.getStage();if(!y)return;let _=getRelativePointerPosition(y);if(!_)return;let x=roundPx(_.x),S=roundPx(_.y);if(c)return;let w=e.target.attrs.name;if(!(w&&("shape"==w||-1!==w.indexOf("anchor")))){if("rect"!==t){if(null!==l){this.setState({selected:null});return}let e=n?n.points:[];if(!e)return;if(e.length>=1){let[t,n]=e[e.length-1];if(t===x&&n===S)return}let c=[...e,[x,S]];this.setState({drawing:!0,selected:null,current:{...n,points:c,type:t}})}else this.setState({drawing:!0,current:{x,y:S,height:0,width:0,center:[x,S],type:t}})}}),__publicField(this,"handleMouseMove",e=>{let{drawing:t,current:n,fromCenter:l,keepRatio:c}=this.state;if(!t)return;let y=e.target.getStage();if(!y)return;let _=getRelativePointerPosition(y);if(!_)return;let x=roundPx(_.x),S=roundPx(_.y);if(this.setState({x,y:S}),n&&"rect"===n.type&&isRect(n)){let[e,t]=n.center,y=Math.max(Math.abs(x-n.x),Math.abs(S-n.y)),_=x<n.x?-y:y,w=S<n.y?-y:y,T=l?(x-e)*2:c?_:x-n.x,E=l?(S-t)*2:c?w:S-n.y,F=l?e-T/2:n.x,D=l?t-E/2:n.y,L={x:F,y:D,width:T,height:E},j=l?n.center:getCenter$1(L),O=[[F,D],c?[F+T,D+E]:[x,S]];this.setState({current:{...n,...L,center:j,points:O}})}else if(n&&"freehand"===n.type&&n.points){let e={points:[...n.points,[x,S]]};this.setState({current:{...n,...e}})}}),__publicField(this,"handleMouseUp",()=>{let{current:e,drawing:t}=this.state;if(t){if(e&&"rect"===e.type){if(0===e.width||0===e.height||!e.points){this.setState(this.resetState);return}let t=pointsToRect([e.points[0],e.points[1]]),n=rectToPoints(t);this.setState(this.resetState),this.addSpan({...e,...t,points:n})}else e&&"freehand"===e.type&&this.handleClosePoints()}}),__publicField(this,"handleClosePoints",()=>{let{drawing:e,current:t}=this.state;if(e&&t&&"rect"!==t.type&&t.points){if(t.points.length<=2)return;this.addSpan(t),this.setState(this.resetState)}}),__publicField(this,"handleDragStart",e=>()=>{this.setState({isDragged:e.id})}),__publicField(this,"handleDragEnd",e=>t=>{this.state.isDragged&&(this.setState({isDragged:null}),this.updateSpan(e.id,getDimensions(e,t.target)))}),__publicField(this,"handleDragPoint",(e,t)=>n=>{let l=n.target.getStage();if(!l||!e.points)return;let c=getRelativePointerPosition(l);if(!c)return;let y=roundPx(c.x),_=roundPx(c.y),x=e.points.map((e,n)=>n===t?[y,_]:e);this.updateSpan(e.id,{points:x})}),__publicField(this,"handleSelectSpan",e=>t=>{t.cancelBubble=!0,this.selectSpan(e)}),__publicField(this,"addSpan",e=>{let{spans:t,label:n,SPANS_KEY:l}=this.state,c=this.getColor(n??void 0,t.length),y={id:v4(),label:n??void 0,color:c,...e},_=[...t,y];this.setState({spans:_}),this.props.update({[l]:_}),sU&&document.dispatchEvent(new CustomEvent("prodigyspanselected",{detail:y}))}),__publicField(this,"updateSpan",(e,t)=>{let{spans:n,SPANS_KEY:l}=this.state,c=n.map(e=>e.id).indexOf(e),y=n.find(t=>t.id==e);if(!y)return;let _=n.filter(t=>t.id!==e),x={...y,...t},S=insertInto(_,x,c);this.setState({spans:S}),this.props.update({[l]:S})}),__publicField(this,"handlePixelMove",e=>{let{selected:t,spans:n,pixel:l}=this.state;if(!t)return;let c=n.find(e=>e.id==t);if(c&&"rect"===c.type){let n={...c};if(!isRect(n))return;"left"===e?n.x=n.x-1:"right"===e?n.x=n.x+1:"up"===e?n.y=n.y-1:"down"===e&&(n.y=n.y+1);let l=getCenter$1(n),y=rectToPoints(n);this.updateSpan(t,{...n,center:l,points:y})}else if(c&&c.points){let n=[...c.points];"left"===e?n=n.map(([e,t])=>[e-l,t]):"right"===e?n=n.map(([e,t])=>[e+l,t]):"up"===e?n=n.map(([e,t])=>[e,t-l]):"down"===e&&(n=n.map(([e,t])=>[e,t+l])),this.updateSpan(t,{points:n})}}),__publicField(this,"handleTrfStart",e=>()=>{this.setState({isTransforming:e.id})}),__publicField(this,"handleTrfEnd",e=>t=>{this.setState({isTransforming:null}),this.updateSpan(e.id,getDimensions(e,t.target))}),__publicField(this,"changeMode",e=>{this.setState({mode:e,selected:null})}),__publicField(this,"changeShowLabels",()=>{this.setState({showLabels:!this.state.showLabels})}),__publicField(this,"sortSpans",e=>{let{selected:t}=this.state;if(null===t)return e;let n=e.find(e=>e.id==t),l=e.filter(e=>e.id!==t);return n?[...l,n]:l}),__publicField(this,"getColor",(e,t)=>{let{theme:n}=this.props,{labelColors:l}=this.props.config;return"string"==typeof e&&l[e]||getColor(n.palettes.images,t)}),__publicField(this,"getCursor",()=>{let{hover:e,pointHover:t,selected:n,drawing:l,mode:c}=this.state;return l&&t?"pointer":!l&&t?"move":null!==e&&e===n?"grab":null===e||l?"freehand"===c?"default":"crosshair":"pointer"}),__publicField(this,"handleShortcuts",e=>{switch(e){case"rect":this.state.modes.includes("rect")&&this.setState({mode:"rect"});break;case"polygon":this.state.modes.includes("polygon")&&this.setState({mode:"polygon"});break;case"freehand":this.state.modes.includes("freehand")&&this.setState({mode:"freehand"});break;case"labels":this.changeShowLabels();break;case"reset":this.handleReset();break;case"delete":this.handleDelete();break;case"exit":this.state.drawing?this.handleDelete():this.setState({selected:null});break;case"left":this.handlePixelMove("left");break;case"right":this.handlePixelMove("right");break;case"up":this.handlePixelMove("up");break;case"down":this.handlePixelMove("down")}})}render(){let{content:e,config:t,classes:n,theme:l,anchorSize:c,uiLang:y}=this.props,{labels:_,labelStyle:x,darkenImage:S}=t,{mode:w,modes:T,selected:E,label:F,spans:D,current:L,origSpans:j,contentWidth:$,fontSize:V,pixel:X,isTransforming:Y,isDragged:Z,pointHover:et,drawing:er,strokeWidth:en,fromCenter:ea,showCenter:eo,showLabels:es,x:el,y:eh,selectKey:eu,keepRatio:ed}=this.state,ep=this.sortSpans(D),em="dropdown"==x?nj:nW,ev=this.getColor(F,D.length),eb={rotateEnabled:!1,anchorStrokeWidth:0,anchorSize:c,anchorCornerRadius:5,borderStrokeWidth:Math.max(en/2,2),borderDash:[2,3],centeredScaling:ea,keepRatio:ed},ey=void 0!==$&&e.width>$?$/e.width:1,e_={showCenter:!!eo,strokeWidth:en,fontSize:V,pixel:X,theme:l,currentColor:ev,drawing:er,pointHover:et,setPointHover:e=>this.setState({pointHover:e}),handlePointClick:()=>this.handleClosePoints(),handleDragPoint:this.handleDragPoint,handleDragEnd:this.handleDragEnd,handleDragStart:this.handleDragStart,x:el,y:eh},ex={strokeWidth:en,fontSize:V,pixel:X,theme:l},eS=getTranslate(y),ew=void 0!==e.width?e.width*ey:void 0,ek=void 0!==e.height?e.height*ey:void 0,eC=(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,className:n.shortcuts,name:this.keymap,handler:this.handleShortcuts,targetNodeSelector:"body",global:!0,children:(0,O.jsxs)(n$,{children:[(0,O.jsxs)("div",{className:n.checkboxWrapper,children:[T.map(e=>(0,O.jsx)(nG,{id:e,active:w==e,onClick:()=>this.changeMode(e),keyName:getKeyName(this.context,this.keymap,e),title:eS(`image_${e}`,e)},e)),(0,O.jsx)(s$,{checked:es,onChange:this.changeShowLabels,label:eS("show_all_labels","All labels"),disabled:!D.length,keyName:getKeyName(this.context,this.keymap,"labels")})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)(nG,{id:"delete",onClick:this.handleDelete,disabled:!E&&!er,keyName:getKeyName(this.context,this.keymap,"delete"),title:eS("delete","Delete")}),(0,O.jsx)(nG,{id:"reset",onClick:this.handleReset,disabled:!D.length&&!j.length,keyName:getKeyName(this.context,this.keymap,"reset"),title:eS("reset","Reset")})]})]})});return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nB,{toolbar:eC,classes:{_root:n.heading},hasLabels:!0,children:(0,O.jsx)(em,{labels:_,selected:F,handleSelect:this.handleLabelSelect,keymap:t.labelKeymap})}),(0,O.jsx)(nU,{className:n.content,children:(0,O.jsx)("div",{className:n.wrapper,ref:e=>{this.content=e},children:(0,O.jsxs)(sW,{className:n.stage,scaleX:ey,scaleY:ey,width:ew,height:ek,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onDblClick:this.handleClosePoints,onTouchStart:this.handleMouseDown,onTouchMove:this.handleMouseMove,onTouchEnd:this.handleMouseUp,onDblTap:this.handleClosePoints,style:{cursor:this.getCursor()},children:[(0,O.jsxs)(sA,{children:[(0,O.jsx)(sj,{x:0,y:0,fill:"#000",width:ew,height:ek,listening:!1}),(0,O.jsx)(URLImage,{src:e.image,x:0,y:0,opacity:1-S,onLoad:this.handleImageLoad})]}),(0,O.jsxs)(sA,{ref:e=>{this.layer=e},children:[ep.map(e=>(0,O.jsx)(sD,{name:"shape",id:e.id,onMouseDown:()=>this.selectSpan(e),onMouseOver:()=>this.setState({hover:e.id}),onMouseOut:()=>this.setState({hover:null}),onTouchStart:()=>this.selectSpan(e),children:(0,O.jsx)(sG,{span:e,ref:t=>{this.spans[e.id]=t},draggable:!0,listening:E===e.id||eu,closed:!0,isSelected:E===e.id,showPoints:Y!==e.id&&Z!==e.id&&E===e.id,...e_,children:e.id==E&&(0,O.jsx)("Transformer",{ref:e=>{this.trf=e},borderStroke:e.color,anchorFill:e.color,...eb,borderEnabled:"rect"!==e.type,anchorSize:"rect"===e.type?2.5*en:2*en,onTransformStart:this.handleTrfStart(e),onTransformEnd:this.handleTrfEnd(e)})})},e.id)),ep.map(e=>es&&Y!==e.id&&Z!==e.id&&(0,O.jsx)(ShapeLabel,{span:e,onMouseOver:()=>{this.setState({hover:e.id})},onMouseOut:()=>this.setState({hover:null}),onMouseDown:this.handleSelectSpan(e),onTouchStart:this.handleSelectSpan(e),listening:!er&&E!==e.id,...ex},e.id)),L&&(0,O.jsx)(sG,{span:L,ref:e=>{this.current=e},listening:!1,isDrawn:!0,...e_})]})]})})})]})}};__publicField(_ImageManualNew,"id","image_manual"),__publicField(_ImageManualNew,"defaultProps",{ToolbarButton:nG,minWidth:650,anchorSize:8,config:{}}),__publicField(_ImageManualNew,"contextTypes",{shortcuts:eP.object});let sB=withStyles({content:{"& .konvajs-content":{margin:[[0,"auto"]]}},wrapper:{width:"100%",height:"100%",overflow:"hidden"},heading:{display:"flex",textAlign:"start"},shortcuts:{display:"block",width:"100%",outline:0},stage:{display:["inline","!important"]},checkboxWrapper:{alignSelf:"center",display:"flex",flexWrap:"wrap",alignItems:"center"}},{injectTheme:!0})(_ImageManualNew);let _TextInput=class _TextInput extends W.Component{render(){let{content:e,update:t,config:n,nowrap:l,classes:c}=this.props,y=e.field_id||"user_input",_=e.field_suggestions||[],x=!!_.length,S=x?v4():void 0,w=e.field_label,T=e.field_rows||1,E=x?1:T,{cardStyle:F}=n,D={key:e[X],id:y,placeholder:e.field_placeholder||"Type here...",className:na("prodigy-text-input",c.input,{[c.textarea]:E>1}),onChange:e=>t({[y]:e.target.value}),value:e[y],autoFocus:e.field_autofocus,tabIndex:1};return(0,O.jsxs)(nU,{cardStyle:F,nowrap:l,children:[(0,O.jsxs)("div",{className:c.root,children:[w&&(0,O.jsx)("label",{className:c.label,htmlFor:y,children:w}),E>1?(0,O.jsx)("textarea",{rows:E,...D}):(0,O.jsx)("input",{type:"text",...D,list:S})]}),x&&(0,O.jsx)("datalist",{id:S,children:_.map(e=>(0,O.jsx)("option",{value:e},e))})]})}};__publicField(_TextInput,"id","text_input");let sH=withStyles(e=>({root:{textAlign:"start",border:e.cardBorder,borderRadius:4,"&:focus-within":{boxShadow:`0 0 0 1px ${e.colorHighlightLabel}`,borderColor:e.colorHighlightLabel}},label:{fontSize:12,paddingLeft:10,paddingRight:10,opacity:.75,position:"relative",top:-3,fontWeight:"bold"},input:{width:"100%",fontFamily:e.fontPrimary,fontSize:e.smallText,padding:10,border:0,background:"transparent","&:focus":{outline:0}},textarea:{resize:"vertical",marginBottom:-4}}))(_TextInput);let _LLMIO=class _LLMIO extends W.Component{render(){let{classes:e,children:t,content:n,uiLang:l}=this.props,{llm:c}=n,y=getTranslate(l),_=y("llm_io_none_label","No LLM Prompt or Response provided for Task"),x=y("llm_io_prompt_label","Show the prompt sent to the LLM"),S=y("llm_io_response_label","Show the response from the LLM");if(!c)return(0,O.jsx)(W.Fragment,{children:(0,O.jsx)(nU,{children:_})});let{prompt:w,response:T}=c;return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsxs)(nU,{className:na(e.root),children:[(0,O.jsxs)("details",{className:na(e.details),children:[(0,O.jsx)("summary",{className:na(e.summary),children:x}),(0,O.jsx)("pre",{className:na(e.llm_content),children:w})]}),(0,O.jsxs)("details",{className:na(e.details),children:[(0,O.jsx)("summary",{className:na(e.summary),children:S}),(0,O.jsx)("pre",{className:na(e.llm_content),children:T})]})]}),t]})}};__publicField(_LLMIO,"id","llm_io");let sV=withStyles(e=>({root:{textAlign:"left",fontSize:14,padding:[[10,20]]},no_llm_content:{},llm_content:{backgroundColor:e.bgMeta,padding:[[15,20]],borderRadius:10,whiteSpace:"pre-wrap"},summary:{fontWeight:"bold",cursor:"pointer",fontSize:"1.2em"},details:{marginBottom:"1rem"}}),{injectTheme:!0})(_LLMIO),sq="u">typeof window,spansEqual=(e,t)=>e.label==t.label&&e.start==t.start&&e.end==t.end;let _NerManual=class _NerManual extends W.Component{constructor(){super(...arguments),__publicField(this,"keymap","SPANS"),__publicField(this,"state",{selected:[],label:"",touched:null,charMode:!0}),__publicField(this,"componentDidMount",()=>{this.setState({label:this.props.config.labels[0]}),this.updateSpans(this.props.content)}),__publicField(this,"UNSAFE_componentWillReceiveProps",({content:e})=>{let t=!0,n=this.props.content.spans||[],l=e.spans||[];t=n.length===l.length&&(n.every((e,t)=>spansEqual(e,l[t]))||!0),(this.props.content&&this.props.content[X]!=e[X]||!t)&&this.updateSpans(e)}),__publicField(this,"updateSpans",({spans:e=[]})=>{let t=[...e].sort(sortSpans);this.setState({selected:t})}),__publicField(this,"getSpans",({tokens:e})=>this.state.selected.map(({token_start:t,token_end:n,start:l,end:c,label:y,..._})=>{let x=l,S=c;return(null==x||null==S)&&(x=e[t].start,S=e[n].end),{..._,start:x,end:S,token_start:t,token_end:n,label:y}})),__publicField(this,"handleUpdate",()=>{this.props.update({spans:this.getSpans(this.props.content)})}),__publicField(this,"handleTouchStart",({currentTarget:e})=>{if(!e||!e.hasAttribute("id"))return;let t=e.getAttribute("id");null!==t&&this.setState({touched:parseInt(t)})}),__publicField(this,"handleTouchEnd",({changedTouches:e})=>{let{touched:t}=this.state;if(!sq)return;let n=document.elementFromPoint(e[0].clientX,e[0].clientY);if(!n||!n.hasAttribute("id")||null===t)return;let l=n.getAttribute("id");if(null===l)return;let[c,y]=[t,parseInt(l)].sort((e,t)=>e-t),{tokens:_}=this.props.content;this.updateSelected(c,y,_[c].start,_[y].end),this.setState({touched:null})}),__publicField(this,"handleSelection",()=>{let{overlappingSpans:e}=this.props.config,{charMode:t}=this.state,n=sq?window.getSelection():null;if(n&&!n.isCollapsed&&null!==n.anchorNode&&null!==n.focusNode){let l=n.getRangeAt(0),c=getSelectedElement(l.startContainer),y=getSelectedElement(l.endContainer),_=e&&y&&null===y.getAttribute("data-prodigy-token")&&y.parentNode?y.parentNode.parentElement:y;if(l.toString().includes("")&&!this.props.config.allowNewlineHighlight){n.removeAllRanges();return}let x=null==c?void 0:c.getAttribute("data-prodigy-token"),S=null==_?void 0:_.getAttribute("data-prodigy-token"),w=null==c?void 0:c.getAttribute("data-prodigy-char"),T=null==_?void 0:_.getAttribute("data-prodigy-char");if(null==x||null==S||null==w||null==T){n.removeAllRanges();return}let E=parseInt(x),F=parseInt(S),D=parseInt(w),L=parseInt(T);if(this.props.config.highlightChars&&t){let e=n.anchorNode.compareDocumentPosition(n.focusNode);e&Node.DOCUMENT_POSITION_FOLLOWING?(D+=n.anchorOffset,L+=n.focusOffset):e&Node.DOCUMENT_POSITION_PRECEDING?(D+=n.focusOffset,L+=n.anchorOffset):L+=1,this.updateSelected(E,F,D,L)}else{let{tokens:e}=this.props.content;this.updateSelected(E,F,e[E].start,e[F].end)}n.removeAllRanges()}}),__publicField(this,"updateSelected",(e,t,n,l)=>{if(!this.isValidSelection(e,t,n,l))return;let c={token_start:e,token_end:t,start:n,end:l,label:this.state.label};sq&&document.dispatchEvent(new CustomEvent("prodigyspanselected",{detail:c})),this.setState(e=>({selected:[...e.selected,c].sort(sortSpans)}),this.handleUpdate)}),__publicField(this,"handleDeletion",e=>{let{overlappingSpans:t}=this.props.config,getSpanKeyToken=e=>`${e.token_start}||${e.token_end}||${e.label}`,getSpanKeyChar=e=>`${e.start}||${e.end}||${e.label}`;this.setState(n=>({hovered:null,selected:n.selected.filter(n=>t?getSpanKeyChar(n)!==getSpanKeyChar(e)||getSpanKeyToken(n)!==getSpanKeyToken(e):getSpanKeyChar(n)!==getSpanKeyChar(e)&&getSpanKeyToken(n)!==getSpanKeyToken(e))}),this.handleUpdate)}),__publicField(this,"handleShortcuts",e=>{"chars"===e&&this.setState({charMode:!this.state.charMode})}),__publicField(this,"isValidSelection",(e,t,n,l)=>{let{overlappingSpans:c,highlightChars:y}=this.props.config,_=y&&this.state.charMode||c,x=_?n:e,S=_?l-1:t;if(isNaN(x)||isNaN(S))return!1;for(let{token_start:e,token_end:t,start:n,end:l,disabled:y,label:w}of this.state.selected){if(y)return!1;let T=_?n:e,E=_?l-1:t;if(!c&&Math.max(T,x)<=Math.min(E,S)||c&&T===x&&E===S&&w===this.state.label)return!1}return!0}),__publicField(this,"changeCharMode",()=>{this.setState({charMode:!this.state.charMode})})}render(){let{content:e,config:t,classes:n,children:l,uiLang:c}=this.props,{charMode:y}=this.state,{labels:_,labelStyle:x,manualHighlight:S,highlightChars:w,cardStyle:T}=t,E=getTranslate(c),F="dropdown"==x?nj:nW,D=(0,O.jsx)("button",{onClick:this.handleSelection,children:(0,O.jsx)(Icon,{name:"plus"})}),L=(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,className:n.shortcuts,name:this.keymap,handler:this.handleShortcuts,targetNodeSelector:"body",global:!0,children:(0,O.jsxs)(n$,{children:[(0,O.jsx)("div",{}),(0,O.jsx)("div",{children:(0,O.jsx)(s$,{checked:y,"data-test":"highlight-chars",onChange:this.changeCharMode,label:E("highlight_chars","Highlight chars"),keyName:getKeyName(this.context,this.keymap,"chars")})})]})});return(0,O.jsxs)("div",{className:n.root,children:[(0,O.jsxs)(nB,{classes:{_root:n.heading},hasLabels:!0,toolbar:w?L:void 0,children:[(0,O.jsx)(F,{labels:_,selected:this.state.label,handleSelect:e=>this.setState({label:e}),keymap:t.labelKeymap}),S&&D]}),(0,O.jsx)(nU,{nowrap:!0,cardStyle:T,onMouseUp:S?void 0:this.handleSelection,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,children:(0,O.jsx)(id,{content:e,config:t,spans:this.state.selected,handleDeletion:this.handleDeletion,className:n.entities,highlightChars:w})}),l]})}};__publicField(_NerManual,"id","ner_manual"),__publicField(_NerManual,"contextTypes",{shortcuts:eP.object});let sK=withStyles({root:{width:"100%"},heading:{display:"flex",textAlign:"start"},entities:{padding:20,lineHeight:2},shortcuts:{display:"block",width:"100%",outline:0}})(_NerManual),animate=e=>()=>requestAnimationFrame(e),getArrowColor=e=>nz(e).darken(1.3).saturate(1.5).hex(),Arc2=e=>{let{rel:t,hideRelationArrow:n,arrowWidth:l,theme:c}=e,{color:y=c.colorText,points:_,tension:x}=t,S=getArrowColor(y),w=n?0:2*l;return(0,O.jsx)("Arrow",{points:_?[..._]:[],stroke:S,hitStrokeWidth:0,strokeWidth:l,pointerLength:w,pointerWidth:w,tension:x,perfectDrawEnabled:!1,listening:!1})},toggleElement=(e,t,n)=>{let l=null==e?void 0:e.findOne(e=>e.name()===t);l&&(n?l.show():l.hide())},ArrowLabel=e=>{let{rel:t,i:n,handleDelete:l,labelHeight:c,drawing:y,onHover:_,listening:x,isSpans:S,labelFontSize:w,theme:T,spacing:E}=e,{head:F,child:D,label:L,color:j=T.colorText,labelX:W,labelY:$,rotation:V,offsetX:X,offsetY:Y,labelWidth:Z}=t,et=getArrowColor(j),onMouseOver=e=>{var t;if(y)return;let{parent:l}=e.target;S||toggleElement(l,"delete",!0),null==(t=null==l?void 0:l.getLayer())||t.batchDraw(),_(n)},onMouseOut=e=>{var t;if(y)return;let{parent:n}=e.target;S||toggleElement(n,"delete",!1),null==(t=null==n?void 0:n.getLayer())||t.batchDraw(),_(null)};return(0,O.jsxs)(sL,{x:W,y:$,rotation:V,offsetX:X,offsetY:Y,onClick:l(F,D,L),onTouchStart:l(F,D,L),onMouseOver:e=>animate(onMouseOver(e)),onMouseOut:e=>animate(onMouseOut(e)),listening:x,perfectDrawEnabled:!1,children:[(0,O.jsx)("Tag",{fill:et,cornerRadius:5,listening:x,perfectDrawEnabled:!1}),(0,O.jsx)(sI,{fill:"white",fontSize:w,fontFamily:T.fontSecondary,fontStyle:"bold",text:L,padding:E/5,height:c,width:Z,verticalAlign:"middle",transformsEnabled:"none",listening:x,perfectDrawEnabled:!1}),(0,O.jsx)(sI,{fill:et,text:"\xd7",fontStyle:"bold",fontSize:w,fontFamily:T.fontSecondary,verticalAlign:"middle",x:Z,y:-5,transformsEnabled:"position",listening:x,name:"delete",visible:!1,perfectDrawEnabled:!1})]},n)},getColorStops=e=>{let t=[];for(let n=0;n<e.length;n++){let l=e[n];t.push(n/e.length,l,(n+1)/e.length,l)}return e.length>1&&t.push(1,e[e.length-1]),t};let Token=class Token extends W.Component{constructor(){super(...arguments),__publicField(this,"ref",null),__publicField(this,"getHasRel",()=>{let{token:e,relColors:t}=this.props;return!![...t[e.id]||[]].length}),__publicField(this,"getIsDrawingSelected",()=>{let{drawing:e,drawingRange:t,token:n}=this.props;return e&&t&&t.includes(n.id)}),__publicField(this,"getFill",()=>{let{isSelected:e,theme:t}=this.props,n=this.getHasRel();return e?t.bgCardTertiary:n?void 0:t.bgCard}),__publicField(this,"getHoverFill",()=>{let{selected:e,theme:t,token:n}=this.props;return null!==e&&e!==n.id?t.bgCardSecondary:null}),__publicField(this,"getStroke",()=>{let{drawingValid:e,theme:t,isSelected:n,token:l}=this.props,c=e?t.accept:t.reject,y=this.getHasRel();return this.getIsDrawingSelected()?c:n?t.bgCardTertiary:y||l.disabled?t.bgCard:l.label?t.bgCardQuaternary:t.bgCardTertiary}),__publicField(this,"getHoverStroke",()=>{let{drawingValid:e,drawingRange:t,drawing:n,token:l,label:c,theme:y,isSpans:_}=this.props,x=n&&t&&t.includes(l.id),S=e?y.accept:y.reject;return x?S:_?y.bgCardQuaternary:getArrowColor(this.props.getColor(c))}),__publicField(this,"getGradient",()=>{let{isSelected:e,relColors:t,token:n}=this.props,l=[...t[n.id]||[]],c=getColorStops(l),y=this.getHasRel(),_={fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:n.width,y:n.height},fillLinearGradientColorStops:[...c]};return!e&&y?_:{}}),__publicField(this,"getTextGradient",()=>{let{isSelected:e,theme:t,token:n,relColors:l}=this.props,c=[...l[n.id]||[]],y=getColorStops(c),_=e?t.bgCardTertiary:y.length?y[y.length-1]:t.bgCard,x={fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:n.width,y:0},fillLinearGradientColorStops:[.8,t.colorText,.99,_],ellipsis:!0,wrap:"none"};return n.ellipsis?x:{}}),__publicField(this,"getDash",()=>{let{token:e}=this.props;return e.label?[2,2]:void 0}),__publicField(this,"handleClick",e=>{let{token:t,isManual:n}=this.props;return!t.disabled&&n?t=>animate(e(t)):void 0}),__publicField(this,"onMouseOver",e=>{var t;let{drawing:n,onHover:l,token:c,showLabels:y}=this.props;if(n)return;let{parent:_}=e.target;if(!_||!_.children)return;let x=_.children[0],S=_.parent,w=this.getHoverFill(),T=this.getHoverStroke();w&&x.fill(w),T&&x.stroke(T),c.label&&x.dashEnabled(!1),y||toggleElement(S,"label",!0),null==(t=null==x?void 0:x.getLayer())||t.batchDraw(),l(_.id())}),__publicField(this,"onMouseOut",e=>{var t,n;let{drawing:l,isSpans:c,isSelected:y,showLabels:_,onHover:x}=this.props;if(l)return;let{parent:S}=e.target,w=null==(t=null==S?void 0:S.children)?void 0:t[0];if(!w)return;let T=null==S?void 0:S.parent;if(!c||c&&!y){let e=this.getFill();e?w.fill(e):w.fill()}w.stroke(this.getStroke()),w.dashEnabled(!0);let E=this.getDash();E?w.dash(E):w.dash(),_||toggleElement(T,"label",!1),null==(n=null==w?void 0:w.getLayer())||n.batchDraw(),x(null)}),__publicField(this,"onClick",e=>{var t,n;let{theme:l,isSelected:c,handleTokenClick:y}=this.props,{parent:_}=e.target,x=null==(t=null==_?void 0:_.children)?void 0:t[0];if(x){if(c){let e=this.getFill();e?x.fill(e):x.fill(),x.stroke(this.getStroke()),x.dashEnabled(!0);let t=this.getDash();t?x.dash(t):x.dash()}else x.fill(l.bgCardTertiary),x.stroke(l.bgCardTertiary),x.dashEnabled(!1);null==(n=null==x?void 0:x.getLayer())||n.batchDraw(),y(e),this.onMouseOut(e)}})}componentDidUpdate(e){var t,n;let{showLabels:l}=this.props;this.ref&&e.showLabels!==l&&(toggleElement(this.ref.parent,"label",l),null==(n=null==(t=this.ref)?void 0:t.getLayer())||n.batchDraw())}render(){let{token:e,theme:t,drawing:n,tokenFontSize:l,labelHeight:c,spacing:y,handleTokenDblclick:_,labelFontSize:x,isSpans:S,showLabels:w,drawingHandlers:T,getSpanLabelColors:E}=this.props,{text:F,x:D,y:L,width:j,height:W,id:$,disabled:V,label:X,labelWidth:Y,ellipsis:Z}=e,et=!!X&&Y>j,er=et?D:D+j/2-Y/2,en=L+c+y,ea=!V||!S,eo=this.getFill(),es=this.getStroke(),el=this.getGradient(),eh=this.getTextGradient(),eu=this.getDash(),[ed,ep]=E(X);return(0,O.jsxs)(sD,{...T,children:[(0,O.jsxs)(sL,{x:D,y:L,width:j,height:W,transformsEnabled:"position",onClick:this.handleClick(this.onClick),onTap:this.handleClick(this.onClick),onDblclick:this.handleClick(_),onDbltap:this.handleClick(_),onMouseOver:ea?e=>animate(this.onMouseOver(e)):void 0,onMouseOut:ea?e=>animate(this.onMouseOut(e)):void 0,opacity:V?.5:1,perfectDrawEnabled:!1,name:"token",id:`${$}`,ref:e=>{this.ref=e},listening:!!n||!V,children:[(0,O.jsx)("Tag",{stroke:es,hitStrokeWidth:0,strokeWidth:2,fill:eo,cornerRadius:5,dash:eu,perfectDrawEnabled:!1,transformsEnabled:"position",fillPriority:"linear-gradient",...el}),(0,O.jsx)(sI,{fill:Z?void 0:t.colorText,fontSize:l,fontFamily:t.fontPrimary,fontStyle:"bold",text:replaceWs(F),padding:y,width:j,height:W,verticalAlign:"middle",perfectDrawEnabled:!1,listening:!S,transformsEnabled:"position",name:"token-text",...eh})]}),!!X&&!V&&(0,O.jsxs)(sL,{x:Math.max(er,0),y:en,listening:!1,name:"label",transformsEnabled:"position",perfectDrawEnabled:!1,visible:w,children:[(0,O.jsx)("Tag",{fill:ed,stroke:t.bgCard,hitStrokeWidth:0,strokeWidth:2,cornerRadius:5,transformsEnabled:"position",perfectDrawEnabled:!1}),(0,O.jsx)(sI,{fill:ep,text:X,fontStyle:"bold",fontSize:x,fontFamily:t.fontSecondary,verticalAlign:"middle",height:c,padding:y/5,width:Math.min(Y,j),transformsEnabled:"position",perfectDrawEnabled:!1,ellipsis:et,wrap:"none"})]},$)]})}};let sX="u">typeof window,getCurve=(e,t=.2,n=.01,l=0)=>{let[c,y]=[Math.max(e[0],e[2]),Math.min(e[0],e[2])],[_,x]=[Math.max(e[1],e[3]),Math.min(e[1],e[3])],S=(c-y)/2;return[y+S-S*t,Math.max(x+(_-x)/2-S*n,l)]},getRelKey=({head:e,child:t,label:n})=>`${e}|${t}|${n}`,mergeTokens=(e,t)=>{let{tokens:n=[],text:l}=e,c=Object.assign({},...t.map(e=>({[e.token_end]:e}))),y=new Set([...t.map(e=>range(e.token_start,e.token_end)).flat()]),_={},x={},S=[];for(let e of n){let t=c[e.id];if(t){let n=[...l].slice(t.start,t.end).join(""),c={...e,...t,text:n,merged:!0};for(let e of(S.push(c),range(t.token_start,t.token_end)))x[e]=c.id}else y.has(e.id)?_[e.id]=e:S.push(e)}return{tokens:S,tokensById:_,replacedById:x}},getRelationToken=e=>({start:e.start,end:e.end,token_start:e.token_start??e.id,token_end:e.token_end??e.id,label:e.label||null}),getLevelsByRow=(e,t)=>{if(!t)return{};let n={};e.forEach(({head:e,child:l,label:c})=>{let y=t[e].row;y===t[l].row&&(n[y]||(n[y]=[]),n[y].push({head:e,child:l,label:c}))});let l={};return Object.keys(n).forEach(e=>{l[e]=Object.assign({},...[...n[e]].sort((e,t)=>Math.abs(e.head-e.child)-Math.abs(t.head-t.child)).map((e,t)=>({[getRelKey(e)]:t})))}),l},isValidSelection=(e,t,n,l)=>{if(isNaN(n)||isNaN(l))return!1;for(let{token_start:t,token_end:c}of e)if(Math.max(t,n)<=Math.min(c,l))return!1;for(let e of range(n,l+1)){let n=t[e];if(!n||n.disabled)return!1}return!0};let _Relations=class _Relations extends W.Component{constructor(){super(...arguments),__publicField(this,"keymap","RELATIONS"),__publicField(this,"layers",{}),__publicField(this,"measureCanvases",{}),__publicField(this,"state",{width:500,selected:null,hover:null,arcHover:null,rows:[],relations:[],origRelations:[],visibleRelations:[],relColors:{},spans:[],origSpans:[],label:"",spanLabel:"",showAll:!0,showLabels:!1,wrap:!0,drawing:null,drawingValid:null,drawingRange:null,x:null,y:null,mode:"rels",modes:[],hasSpans:!1,toMerge:null,selectKey:!1}),__publicField(this,"content",null),__publicField(this,"UNSAFE_componentWillMount",()=>{let{wrapRelations:e,showRelationsLabels:t,relationsSpanLabels:n}=this.props.config;this.setState({wrap:e,showLabels:t}),n&&n.length&&this.setState({modes:["rels","spans"],hasSpans:!0})}),__publicField(this,"componentDidMount",()=>{let{config:e}=this.props;if(this.setupData(this.props),e.labels&&e.labels.length&&this.setState({label:e.labels[0]}),e.relationsSpanLabels&&e.relationsSpanLabels.length&&this.setState({spanLabel:e.relationsSpanLabels[0]}),this.content&&(this.content.addEventListener("scroll",this.repositionStage),this.repositionStage()),sX&&this.context.shortcuts){let e=getKey(this.context,this.keymap,"select").toLowerCase();document.body.addEventListener("keydown",t=>{t.key.toLowerCase()===e&&this.setState({selectKey:!0})}),document.body.addEventListener("keyup",t=>{t.key.toLowerCase()===e&&(this.setState({selectKey:!1}),this.state.toMerge&&this.setState({toMerge:null,selected:null}))})}}),__publicField(this,"componentDidUpdate",e=>{let{content:t}=this.props;e.content&&e.content[X]!=t[X]&&this.setupData(this.props)}),__publicField(this,"getMeasureCanvas",e=>{if(this.measureCanvases[e])return this.measureCanvases[e];if(!sX)return;let{labelFontSize:t,tokenFontSize:n,theme:l}=this.props,c=document.createElement("canvas").getContext("2d");return c?("token"===e?c.font=`bold ${n}px ${l.fontPrimary}`:"label"===e&&(c.font=`bold ${t}px ${l.fontSecondary}`),this.measureCanvases[e]=c,c):c??void 0}),__publicField(this,"measureTextWidth",(e,t)=>{let{labelFontSize:n,tokenFontSize:l}=this.props,c=replaceWs(t||""),y=this.getMeasureCanvas(e),_=y&&y.measureText(c).width;return _||("token"===e?l*c.length*.6:n*c.length*.55)}),__publicField(this,"getCardWidth",()=>{let e=this.props.theme.cardPadding||0;return this.content?this.content.clientWidth-2*e:500}),__publicField(this,"repositionStage",()=>{var e,t;let{wrap:n,offset:l}=this.state;if(this.content&&!n&&void 0!==l&&l>=2e3){let n=this.content.scrollLeft,c=null==(t=null==(e=this.layers)?void 0:e.tokens)?void 0:t.getStage();c&&n<=l-2*this.getCardWidth()&&(c.container().style.transform=`translateX(${n}px)`,c.x(-n),c.batchDraw())}}),__publicField(this,"resetStage",()=>{var e,t;let n=null==(t=null==(e=this.layers)?void 0:e.tokens)?void 0:t.getStage();n&&(n.container().style.transform="translateX(0px)",n.x(0),n.batchDraw())}),__publicField(this,"setupData",e=>{let{showAll:t}=this.state,n=e.content.spans||[],l=(e.content.relations||[]).map(e=>({...e,color:e.color||this.getColor(e.label)})),c=this.formatTokens(e,n,l,this.state.wrap),{rows:y,tokensById:_,height:x,width:S,padding:w,offset:T}=c,E=c.relations.map(e=>{let t=this.getRelation(e.head,e.child,e.label,e.color,_);return{...t,color:e.color||t.color}});this.setState({rows:y,tokensById:_,height:x,width:S,padding:w,relations:E,spans:n,origRelations:E,origSpans:n,offset:T},()=>this.updateVisibleRelations(E,t)),this.props.update({spans:n,relations:E})}),__publicField(this,"updateVisibleRelations",(e,t=!0)=>{let n=this.filterRelations(e,t),l=this.getRelationColors(e),c=this.getArcs(n);this.setState({visibleRelations:c,relColors:l})}),__publicField(this,"updateTokens",e=>{let t=this.formatTokens(this.props,this.state.spans,this.state.relations,e),{rows:n,tokensById:l,height:c,width:y,padding:_,relations:x,offset:S}=t;this.setState({rows:n,tokensById:l,height:c,width:y,padding:_,offset:S},()=>{this.updateRelations(x)})}),__publicField(this,"updateSpans",e=>{let t=[...e].sort((e,t)=>e.start-t.start);this.setState({spans:t},()=>this.updateTokens(this.state.wrap)),this.props.update({spans:t})}),__publicField(this,"updateSpan",(e,t)=>{let{spans:n}=this.state,l=n.find(t=>t.token_end==e);if(!l)return;let c=n.map(e=>e.token_end).indexOf(e),y=n.filter(t=>t.token_end!==e),_={...l,...t},x=insertInto(y,_,c);this.updateSpans(x)}),__publicField(this,"updateRelations",e=>{let t=this.getSyncedRelations(e);this.setState({relations:t,selected:null,hover:null,arcHover:null},()=>{this.updateVisibleRelations(t,this.state.showAll)}),this.props.update({relations:t})}),__publicField(this,"handleReset",()=>{let{origRelations:e,origSpans:t}=this.state;this.setState({relations:e,spans:t,selected:null},()=>{this.updateTokens(this.state.wrap)}),this.props.update({spans:t,relations:e})}),__publicField(this,"formatTokens",(e,t,n,l)=>{let{spacing:c,content:y,tokenHeight:_,theme:x,config:S}=e,{allowNewlineHighlight:w,writingDir:T}=S,{hasSpans:E}=this.state,{tokens:F,tokensById:D,replacedById:L}=mergeTokens(y,t),j=F[F.length-1],O=this.getCardWidth(),W=l?x.relationHeightWrap:x.relationHeight,$=.75*c,V=[[]],X=1;for(let e of F){let t=/^[\n\s]*$/.test(e.text),n=e.disabled||!w&&t,y=t&&e.text.match(/\n/g)||[],x=this.measureTextWidth("token",e.text)+2*c,S=l?Math.min(x,O-c):x;l&&X+S+1>O&&(V.push([]),X=1);let T=V.length-1,E=0===T?W:2*W*(T+1)-W,F=this.measureTextWidth("label",e.label)+2*c/4,L=l?x>S:x>O,Y={...e,disabled:n,x:X,y:E,width:!L||l?S:O,height:_,row:T,rowIdx:V[T].length,ellipsis:L,labelWidth:F};D[e.id]=Y,V[T].push(Y),X+=S+(e.ws?2*$:$/2),l&&y.length&&e.id!=j.id&&(V.push(...Array(y.length).fill([])),X=1)}if("rtl"===T)for(let e of V){let t=Math.max(O-1,X);for(let n of e)n.x=t-n.width-1,t-=n.width+(n.ws?2*$:$/2)}let Y=V[V.length-1][0].y+_+(E?5*$:2*$),Z=l?O:X<2e3?X+2*$:2.5*O,et=Object.keys(L).length?n.map(e=>{let t=L[e.head],n=L[e.child],l="u">typeof t?t:e.head,c="u">typeof n?n:e.child,y=this.getRelation(l,c,e.label,e.color,D);return{...e,...y}}):n;return{rows:V,tokensById:D,height:Y,width:Z,offset:X,padding:W,relations:et}}),__publicField(this,"getColor",e=>{let{theme:t}=this.props,{labels:n,labelColors:l}=this.props.config;if(l[e])return l[e];let c=n.indexOf(e),y=-1!==c?c:n.length+1;return getColor(t.palettes.relations,y)}),__publicField(this,"getSpanLabelColors",e=>{let{theme:t}=this.props,{labelColors:n}=this.props.config,l=n[e];return l?[l,getContrastColor(l)]:[t.colorText,t.bgCard]}),__publicField(this,"deleteSelected",()=>{this.handleDeleteSpan(this.state.selected)}),__publicField(this,"handleDeleteSpan",e=>{let{tokensById:t,mode:n}=this.state;if(!t||null===e)return;let l=t[e];"spans"===n&&l&&l.label&&this.splitSpan(l)}),__publicField(this,"toggleElementSelect",e=>{let{mode:t,selected:n}=this.state;"spans"===t?this.setState({spanLabel:e}):this.setState({label:e}),"spans"===t&&null!==n&&this.updateSpan(n,{label:e})}),__publicField(this,"getRelation",(e,t,n,l,c=null)=>{let y=c||this.state.tokensById||{},_=l||this.getColor(n),x=getRelationToken(y[e]),S=getRelationToken(y[t]);return{head:e,child:t,head_span:x,child_span:S,color:_,label:n}}),__publicField(this,"getSyncedRelations",e=>{let{tokensById:t}=this.state;return e.map(({head:e,child:n,label:l,color:c})=>this.getRelation(e,n,l,c,t))}),__publicField(this,"handleTokenClick",e=>()=>{let{selected:t,relations:n,label:l,mode:c,selectKey:y,toMerge:_}=this.state;if(t===e.id)this.setState({selected:null});else if("spans"===c){if(e.label)this.setState({selected:e.id,spanLabel:e.label});else if(y){if(null===_)this.setState({toMerge:e,selected:e.id});else{let t=[e,_].sort((e,t)=>e.id-t.id);this.addSpan(...t),this.setState({toMerge:null,selected:null})}}else this.addSpan(e,e),this.setState({selected:null})}else if(null!==t){let c=this.getRelation(t,e.id,l);this.updateRelations([...n,c])}else this.setState({selected:e.id})}),__publicField(this,"handleTokenDblclick",e=>()=>{let{label:t,mode:n,relations:l,selected:c}=this.state;if("spans"===n||null!==c)return;let y=this.getRelation(e.id,e.id,t);this.updateRelations([...l,y])}),__publicField(this,"handleDelete",(e,t,n)=>()=>{let{relations:l}=this.state,c=l.filter(l=>getRelKey(l)!==getRelKey({head:e,child:t,label:n}));this.updateRelations(c)}),__publicField(this,"getRelationColors",e=>{let t={};return e.forEach(({head:e,child:n,label:l,color:c})=>{let y=c||this.getColor(l);t[e]||(t[e]=new Set),t[n]||(t[n]=new Set),t[e].add(y),t[n].add(y)}),t}),__publicField(this,"getArcs",e=>{let{padding:t,tokensById:n}=this.state;if(!n)return[];let{spacing:l,arrowWidth:c,labelHeight:y,arcHeight:_}=this.props,x=getLevelsByRow(e,n);return e.map(e=>{let{head:S,child:w,label:T}=e,E=n[S],F=n[w],D=c/2-l/2,L=E.x+E.width/2-D,j=F.x+F.width/2-D,O=E.y>F.y,W=E.y<=F.y,$=E.x<=F.x,V=E.x>F.x,X=E.row===F.row,Y=[L,E.y,j,F.y],Z=[],et=c+y/2;if(W&&(Z=getCurve(Y=[L,E.y+E.height+et,j,F.y-et])),O&&(Z=getCurve(Y=[L,E.y-et,j,F.y+F.height+et],V?.2:-.2,V?.01:-.01)),X){let n=x[E.row],l=Object.keys(n).length,y=n[getRelKey(e)],T=(l+1)/(l-y),O=Math.max(E.width/2/T,c),W=Math.max(F.width/2/T,c);Y=S===w?[L,E.y-c,j,F.y]:[V?E.x+O:E.x+E.width-O,E.y-c,V?F.x+W:F.x+F.width-W,F.y-c];let $=Y[1]-Math.min(l*_,(t??0)+3*D-c)/l*(y+1);Z=[Y[0],$,Y[2],$]}let er=this.measureTextWidth("label",T)+2*l/5,en=[Y[0],Y[1],...Z,Y[2],Y[3]],ea=Math.atan2(en[3]-en[1],en[2]-en[0])*(180/Math.PI);return{...e,points:en,labelX:X?V?Y[2]-(Y[2]-Y[0])/2-er/2:Y[0]+(Y[2]-Y[0])/2-er/2:ea?en[0]:en[0]-er/2,labelY:X?Z[1]:ea?en[1]:en[1]-y/2,rotation:X?0:V?180+ea:ea,offsetX:X?0:$||!ea?-l:er+l,offsetY:ea?y/2:0,labelWidth:er,tension:X?0:.5}})}),__publicField(this,"filterRelations",(e,t)=>{let{hover:n,selected:l}=this.state;return t?e:null===n||null!==l?[]:e.filter(({head:e,child:t})=>e===n||t===n)}),__publicField(this,"getTokenSelection",e=>{var t,n,l;let{tokensById:c,spans:y}=this.state;if(!e||!e.height||!e.width)return null;let _=new Set;null==(l=null==(n=null==(t=this.layers)?void 0:t.tokens)?void 0:n.children)||l.forEach(t=>{var n;if(!("children"in t))return;let l=null==(n=t.children)?void 0:n[0];if(!l||"token"!==l.name())return;let c=l.getClientRect(),{x:y,y:x,width:S,height:w}=e;c.x===y&&c.y===x&&c.width===S&&c.height===w||checkIntersection(c,e)&&_.add(l.id())});let x=[..._].sort((e,t)=>e-t);if(x.length&&c){let e=c[x[0]],t=c[x[x.length-1]],n=isValidSelection(y,c,e.id,t.id);return{startToken:e,endToken:t,range:x,isValid:n}}return null}),__publicField(this,"handleSelectSpanDown",e=>{if("token-text"==e.target.name())return;let t=getPointerPosition(e.target.getStage());t&&this.setState({x:t.x,y:t.y,drawing:{x:t.x,y:t.y,width:0,height:0}})}),__publicField(this,"handleSelectSpanMove",e=>{let{drawing:t,x:n,y:l}=this.state;if(!t||null===n||null===l)return;let c=getPointerPosition(e.target.getStage());if(!c)return;let y=pointsToRect([[n,l],[c.x,c.y]]),_=this.getTokenSelection(y),x=_?_.isValid:null,S=_?_.range:null;this.setState({drawing:y,drawingValid:x,drawingRange:S})}),__publicField(this,"splitSpan",e=>{let{spans:t}=this.state;if(t.length){let n=t.filter(t=>t.token_end!==e.id);this.updateSpans(n)}}),__publicField(this,"addSpan",(e,t)=>{let{spanLabel:n,spans:l}=this.state,c={start:e.start,end:t.end,token_start:e.id,token_end:t.id,label:n},y=[...l,c].sort((e,t)=>e.start-t.start);this.updateSpans(y),this.setState({hover:null,selected:null}),sX&&document.dispatchEvent(new CustomEvent("prodigyspanselected",{detail:c}))}),__publicField(this,"handleSelectSpanUp",()=>{let{drawing:e}=this.state,t=this.getTokenSelection(e);if(t){let{startToken:e,endToken:n,isValid:l}=t;l&&this.addSpan(e,n)}e&&this.setState({drawing:null,drawingValid:null,drawingRange:null,selected:null,x:null,y:null})}),__publicField(this,"handleWrap",()=>{let{wrap:e,offset:t}=this.state;!e&&void 0!==t&&t>=2e3&&this.resetStage(),this.setState({wrap:!e},()=>this.updateTokens(!e))}),__publicField(this,"getCursor",()=>{let{hover:e,arcHover:t,mode:n,selected:l}=this.state,{isManual:c}=this.props;return null!==l&&null!==e&&e!==l&&c&&"spans"!==n?"alias":"spans"===n?"crosshair":(null!==e||null!==t)&&c?"pointer":void 0}),__publicField(this,"handleShortcuts",e=>{let{modes:t,mode:n,selected:l}=this.state;switch(e){case"rels":t&&this.setState({mode:"rels"});break;case"spans":t&&this.setState({mode:"spans"});break;case"delete":"spans"===n&&null!==l&&this.deleteSelected();break;case"reset":this.handleReset();break;case"exit":this.setState({selected:null,drawing:null,drawingValid:null,drawingRange:null})}})}render(){let{isManual:e,spacing:t,arrowWidth:n,tokenFontSize:l,labelFontSize:c,labelHeight:y,config:_,nowrap:x,classes:S,theme:w,uiLang:T,children:E}=this.props,{cardStyle:F,labelStyle:D,labelKeymap:L,labels:j,relationsSpanLabels:$,hideRelationArrow:V}=_,{relations:X,origRelations:Y,spans:Z,origSpans:et,selected:er,rows:en,width:ea,height:eo,offset:es,showAll:el,showLabels:eh,label:eu,spanLabel:ed,wrap:ep,drawing:em,drawingValid:ev,drawingRange:eb,mode:ey,modes:e_,visibleRelations:ex,relColors:eS,hasSpans:ew}=this.state,ek="dropdown"==D?nj:nW,eC="spans"===ey,eP=e&&(!eC||!!em),handleStageEvent=e=>eC?t=>animate(e(t)):null,eM={onMouseDown:handleStageEvent(this.handleSelectSpanDown),onMouseMove:handleStageEvent(this.handleSelectSpanMove),onMouseUp:handleStageEvent(this.handleSelectSpanUp),onTouchStart:handleStageEvent(this.handleSelectSpanDown),onTouchMove:handleStageEvent(this.handleSelectSpanMove),ontouchEnd:handleStageEvent(this.handleSelectSpanUp)},eT={theme:w,label:eu,selected:er,relColors:eS,getColor:this.getColor,getSpanLabelColors:this.getSpanLabelColors,drawingRange:eb,drawing:em,drawingValid:ev,tokenFontSize:l,spacing:t,isManual:e,isSpans:eC,labelHeight:y,labelFontSize:c,showLabels:eh,onHover:e=>{this.setState({hover:e}),el||this.updateVisibleRelations(X,!1)},drawingHandlers:eM},eE={theme:w,hideRelationArrow:V,arrowWidth:n},eR={theme:w,spacing:t,handleDelete:this.handleDelete,labelHeight:y,labelFontSize:c,drawing:em,listening:eP,isSpans:eC,onHover:e=>this.setState({arcHover:e})},eF=getTranslate(T),eN=(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,className:S.shortcuts,name:this.keymap,handler:this.handleShortcuts,targetNodeSelector:"body",global:!0,children:(0,O.jsxs)(n$,{children:[(0,O.jsxs)("div",{className:S.checkboxWrapper,children:[e_.map(e=>(0,O.jsx)(nG,{id:e,active:ey==e,onClick:()=>this.setState({mode:e,selected:null}),title:eF(`relations_${e}`,e),keyName:getKeyName(this.context,this.keymap,e)},e)),(0,O.jsxs)("div",{children:[(0,O.jsx)(s$,{checked:el,onChange:()=>{this.setState({showAll:!el}),this.updateVisibleRelations(X,!el)},label:eF("show_all_rels","All relations"),disabled:!X.length}),(0,O.jsx)(s$,{checked:eh,onChange:()=>this.setState({showLabels:!eh}),label:eF("show_all_labels","All labels"),disabled:!Z.length}),(0,O.jsx)(s$,{checked:ep,onChange:this.handleWrap,label:eF("wrap_lines","Wrap")})]})]}),e&&(0,O.jsxs)("div",{children:[ew&&(0,O.jsx)(nG,{id:"delete",onClick:this.deleteSelected,disabled:!eC||null===er,keyName:getKeyName(this.context,this.keymap,"delete"),title:eF("delete_span","Delete span")}),(0,O.jsx)(nG,{id:"reset",onClick:this.handleReset,keyName:getKeyName(this.context,this.keymap,"reset"),title:eF("reset","Reset"),disabled:!X.length&&!Y.length&&!et.length&&!Z.length})]})]})});return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nB,{toolbar:eN,classes:{_root:S.heading},hasLabels:!0,children:(0,O.jsx)(ek,{labels:eC?$:j,selected:eC?ed:eu,handleSelect:this.toggleElementSelect,keymap:L})}),(0,O.jsx)(nU,{cardStyle:F,nowrap:x,children:(0,O.jsx)("div",{className:S.wrapper,ref:e=>{this.content=e},children:(0,O.jsxs)(sW,{width:ea,height:eo,style:{cursor:this.getCursor()},...eM,children:[(0,O.jsx)(sA,{ref:e=>{this.layers.tokens=e},children:en.map(e=>e.map(e=>(0,O.jsx)(Token,{token:e,isSelected:er===e.id,handleTokenClick:this.handleTokenClick(e),handleTokenDblclick:this.handleTokenDblclick(e),...eT},e.id)))}),(0,O.jsx)(sA,{ref:e=>{this.layers.arrows=e},listening:!1,hitGraphEnabled:!1,children:ex.map((e,t)=>(0,O.jsx)(Arc2,{rel:e,...eE},t))}),(0,O.jsx)(sA,{ref:e=>{this.layers.arrowLabels=e},listening:eP,hitGraphEnabled:eP,children:ex.map((e,t)=>(0,O.jsx)(ArrowLabel,{rel:e,i:t,...eR},t))}),(0,O.jsx)(sA,{ref:e=>{this.layers.drawing=e},children:eC&&em&&void 0!==es&&(0,O.jsx)(sj,{x:em.x+(this.content&&!ep&&es>=2e3?this.content.scrollLeft:0),y:em.y,width:em.width,height:em.height,cornerRadius:3,perfectDrawEnabled:!1,listening:!1,fill:!0===ev?w.accept:!1===ev?w.reject:w.ignore,opacity:.2})})]})})}),E]})}};__publicField(_Relations,"id","relations"),__publicField(_Relations,"defaultProps",{isManual:!0,spacing:10,arrowWidth:3,tokenHeight:36,tokenFontSize:16,labelFontSize:12,labelHeight:16.8,arcHeight:24}),__publicField(_Relations,"contextTypes",{shortcuts:eP.object});let sY=withStyles({stage:{},wrapper:{width:"100%",height:"100%",position:"relative",overflow:"auto"},checkboxWrapper:{alignSelf:"center",display:"flex",alignItems:"center"},shortcuts:{display:"block",width:"100%",outline:0},heading:{display:"flex",textAlign:"start"}},{injectTheme:!0})(_Relations);let _SessionTag=class _SessionTag extends W.Component{render(){let{id:e,content:t={},styled:n=!0,classes:l}=this.props,{answer:c}=t,y=na(l.tag,{[l.tagAccept]:"accept"===c,[l.tagReject]:"reject"===c,[l.tagSubtle]:!n}),_=na(l.tagText,{[l.tagTextSimple]:!n});return(0,O.jsxs)("span",{className:y,children:[(0,O.jsx)("span",{className:_,children:e}),c&&n&&(0,O.jsx)(Icon,{size:16,name:c,className:l.tagIcon})]})}};let sQ=withStyles(e=>({tag:{lineHeight:1.5,fontSize:"1.2rem",background:e.bgCard,borderColor:e.colorMeta,fontWeight:"bold",borderRadius:"2em",display:"inline-block",border:[[1,"solid"]],margin:[[0,5,5,5]],padding:2},tagAccept:{borderColor:e.accept,background:e.accept},tagReject:{borderColor:e.reject,background:e.reject},tagSubtle:{borderWidth:2,background:["transparent","!important"]},tagText:{background:e.bgCard,lineHeight:1,padding:[[2,7,4]],margin:0,borderRadius:"inherit",display:"inline-block"},tagTextSimple:{verticalAlign:"text-top",padding:[[1,7,0]],color:e.colorMeta,background:"transparent",margin:0},tagIcon:{margin:[[0,2,0,2]],verticalAlign:"middle",position:"relative",top:-1,color:e.colorButton}}))(_SessionTag);let _ChoiceOption=class _ChoiceOption extends W.Component{render(){let{meta:e={},children:t,classes:n,...l}=this.props,{sessions:c=[]}=e;return(0,O.jsxs)(nK,{...l,className:n.choiceOption,children:[t,!!c.length&&(0,O.jsx)("div",{className:n.choiceOptionTags,children:c.map(e=>(0,O.jsx)(sQ,{id:e,styled:!1},e))})]})}};let sZ=withStyles({choiceOption:{alignItems:"flex-start","& input":{marginTop:6}},choiceOptionTags:{lineHeight:1,padding:[[1,15,0,0]]}})(_ChoiceOption),isViewIdManual=e=>e.endsWith("_manual"),mapViewIdManualToNonManual=e=>e.split("_manual")[0],getVersionInterface=e=>"classification"===e?"text":isViewIdManual(e)?mapViewIdManualToNonManual(e):e;let _Review=class _Review extends W.Component{constructor(){super(...arguments),__publicField(this,"state",{key:0})}getMainContent(e){let{content:t}=this.props,{versions:n=[]}=t;if("choice"==e){let e=Object.assign({},...t.options.map(({id:e})=>({[e]:[]})));n.forEach(({accept:t,sessions:n})=>t.forEach(t=>{e[t]=[...e[t],...n]}));let l=t.options.map(t=>({...t,meta:{sessions:[...new Set(e[t.id])].sort()}}));return{...t,options:l}}return t}updateFromVersion(e){let t=["_input_hash",X,"_session_id","default","sessions"],n=Object.keys(e).filter(e=>!t.includes(e)),l=Object.assign({},...n.map(t=>({[t]:e[t]})));this.props.update(l),this.setState({key:this.state.key+1})}render(){let{key:e}=this.state,{content:t,classes:n}=this.props,{view_id:l,versions:c=[]}=t,y=l||findInterface(t),_=getVersionInterface(y),x=y.endsWith("_manual")||"relations"===y,S=s0[y],w=s0[_],T=na(n.container,{[n.toolbar]:!x}),E=this.getMainContent(y);return(0,O.jsx)(W.Fragment,{children:(0,W.createElement)(S,{...this.props,content:E,ChoiceOption:sZ,key:e},(0,O.jsx)("div",{className:T,children:c.map((e,t)=>x?(0,O.jsxs)("div",{className:n.version,onClick:()=>this.updateFromVersion(e),children:[(0,O.jsx)(w,{...this.props,content:e,config:this.props.config,nowrap:!0}),(e.sessions||[]).map((t,n)=>(0,O.jsx)(sQ,{id:t,content:e,styled:!1},n))]},t):(0,O.jsx)(W.Fragment,{children:(e.sessions||[]).map((t,n)=>(0,O.jsx)(sQ,{id:t,content:e},n))},t))}))})}};__publicField(_Review,"id","review"),__publicField(_Review,"defaultProps",{content:{options:[]},config:{}});let sJ=withStyles(e=>({container:{width:"100%",background:e.bgMeta,borderTop:e.cardBorder},toolbar:{padding:[[10,10,5]]},version:{width:"100%",padding:10,opacity:.8,cursor:"pointer","&:not(:last-child)":{borderBottom:e.cardBorder},"& > *:first-child":{fontSize:"1.4em",marginBottom:10,"& mark":{background:e.bgLowlight}}}}))(_Review),s0={text:im,classification:({children:e,...t})=>{let n=getClassificationCard(t.content);return(0,O.jsxs)(W.Fragment,{children:[(0,O.jsx)(nB,{children:t.content.label}),(0,O.jsx)(n,{...t}),e]})},spans:Spans,spans_manual:e=>{let{config:t,...n}=e;return(0,O.jsx)(sK,{...n,config:{...t,overlappingSpans:!0}})},ner:ip,ner_manual:sK,pos:ip,pos_manual:sK,dep:iy,image:Image$3,image_manual:e=>e.config.imageManualLegacy?(0,O.jsx)(iR,{...e}):(0,O.jsx)(sB,{...e}),html:it,compare:iv,diff:iE,choice:nX,review:sJ,text_input:sH,blocks:nq,audio:e=>(0,O.jsx)(nV,{...e,isManual:!1}),audio_manual:e=>(0,O.jsx)(nV,{...e,isManual:!0}),relations:sY,llm_io:sV},convertLink=(e,t)=>{if("string"==typeof e&&(e.startsWith("https://")||e.startsWith("http://"))){let n=e.split("://")[1];return n.startsWith("www.")&&(n=n.split("www.")[1]),(0,O.jsx)("a",{href:e,target:"_blank",className:t,rel:"noreferrer",children:n})}return e},convertValue=(e,t,n)=>"score"===e&&"number"==typeof t?t.toFixed(2):"string"!=typeof t?String(t):convertLink(t,n.link);let _CardMeta=class _CardMeta extends W.Component{render(){let{content:e,visible:t,wide:n,classes:l}=this.props,c=na(l.root,"prodigy-meta",{[l.wide]:!!n});return t?(0,O.jsx)("div",{className:c,children:"string"==typeof e?convertLink(e):Object.entries(e).map(([e,t])=>(0,O.jsxs)("span",{children:[(0,O.jsxs)("strong",{children:[e.toUpperCase(),": "]}),convertValue(e,t,l)]},e))}):null}};__publicField(_CardMeta,"defaultProps",{content:{}});let s1=withStyles(e=>({root:{background:e.bgMeta,borderTopLeftRadius:10,borderBottomRightRadius:e.cardBorderRadius,color:e.colorMeta,fontSize:12,marginLeft:"auto",padding:[[3,10,3]],textAlign:"end","& > *:not(:first-child)":{marginLeft:10}},wide:{width:"100%",borderRadius:0},link:{color:"inherit"}}))(_CardMeta);let _Flag=class _Flag extends W.Component{render(){let{onClick:e,active:t,title:n,size:l,visible:c,classes:y}=this.props;return c&&(0,O.jsx)("button",{className:na(y.root,{[y.active]:t}),onClick:e,"aria-label":n,title:n,children:(0,O.jsx)(Icon,{name:"flag",size:l})})}};__publicField(_Flag,"defaultProps",{size:20});let s2=withStyles(e=>({root:{position:"absolute",top:0,right:0,borderBottomLeftRadius:10,background:e.bgCard,padding:[[3,3,3,5]],opacity:.5,transition:[["opacity","0.1s","ease"]],border:"none",zIndex:110},active:{opacity:1,color:e.reject}}))(_Flag),s5="u">typeof window,updateGlobals=({viewId:e,config:t,content:n,updateQuestion:l,handleAnswer:c,theme:y,emitEvent:_})=>{s5&&(window.prodigy={viewId:e,config:t,content:n,update:l,answer:c,theme:y,event:_})},getInterfaceComp=(e={},t={})=>{let n=findInterface(e),l=s0[n];return(0,O.jsx)(l,{content:e,...t})},isLocalUrl=e=>{try{return new URL(e),!1}catch{return!0}},addCssLink=e=>{if(!s5)return;let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",isLocalUrl(e),t.href=e,document.body.appendChild(t)},addJsScript=e=>{if(!s5)return;let t=document.createElement("script"),n=isLocalUrl(e);t.src=e,t.crossOrigin="",t.async=!0,document.body.appendChild(t),t.addEventListener("load",()=>{document.dispatchEvent(new CustomEvent("prodigyscriptload",{detail:{url:e,local:n}}))})};let _CardWithoutTheme=class _CardWithoutTheme extends W.Component{constructor(){super(...arguments),__publicField(this,"UNSAFE_componentWillMount",()=>{if(this.props.config.global_css_urls)for(let e of this.props.config.global_css_urls)addCssLink(e);if(this.props.config.global_css_url&&addCssLink(this.props.config.global_css_url),this.props.config.global_css&&s5){let e=document.createElement("style");e.textContent=this.props.config.global_css,document.body.appendChild(e)}if(this.props.config.javascript_urls)for(let e of(updateGlobals(this.props),this.props.config.javascript_urls))addJsScript(e);if(this.props.config.javascript){updateGlobals(this.props);let e=document.createElement("script");e.textContent=this.props.config.javascript,document.body.appendChild(e)}}),__publicField(this,"componentDidMount",()=>{s5&&document.dispatchEvent(new CustomEvent("prodigymount"))}),__publicField(this,"componentDidUpdate",()=>{s5&&document.dispatchEvent(new CustomEvent("prodigyupdate",{detail:{task:this.props.content}})),this.hasCustomJs()&&updateGlobals(this.props)}),__publicField(this,"hasCustomJs",()=>{let{javascript:e,javascript_urls:t}=this.props.config;return e||t&&t.length>0}),__publicField(this,"flagTask",()=>{getConfig(this.props.config,this.props.content).showFlag&&this.props.updateQuestion({flagged:!this.props.content.flagged})}),__publicField(this,"handleShortcuts",e=>{"flag"===e&&this.flagTask()})}render(){let{viewId:e,content:t,config:n,updateQuestion:l,handleAnswer:c,indicateAction:y,uiLang:_,classes:x,children:S}=this.props,w=getConfig(n,t),T=s0[e||findInterface(t)],E={name:"ACTIONS",handler:this.handleShortcuts,targetNodeSelector:"body",global:!0},F=na("prodigy-container",x.root,x._root,{[x.active]:!!y,[x._active]:!!y},y?x[y]:null);return T?(0,O.jsxs)("div",{className:F,dir:w.writingDir,[`data-action-${y}`]:!!y,children:[(0,O.jsx)(ShortcutsWrapper,{ctx:this.context.shortcuts,...E,children:(0,O.jsx)(s2,{visible:w.showFlag,onClick:this.flagTask,active:t.flagged,title:getTranslate(_)("flag")})}),(0,O.jsx)(T,{content:t,config:w,update:l,answer:c,uiLang:_,getInterfaceComp,children:S}),(0,O.jsx)(s1,{visible:!!t.meta&&!w.hideTaskMeta,wide:"review"===e,content:t.meta})]}):null}};__publicField(_CardWithoutTheme,"defaultProps",{config:{}}),__publicField(_CardWithoutTheme,"contextTypes",{shortcuts:eP.object});let s4=withStyles(e=>({_root:{},_active:{},root:{fontFamily:e.fontPrimary,color:e.colorText,display:"flex",flex:1,flexDirection:"row",flexWrap:"wrap",alignContent:"space-between",background:e.bgCard,border:e.cardBorder,borderRadius:e.cardBorderRadius,boxShadow:e.cardShadow,margin:[[40,"auto",0,"auto"]],maxWidth:e.cardMaxWidth,minHeight:e.cardMinHeight,minWidth:e.cardMinWidth,position:"relative"},"@media(max-width: 52em)":{root:{marginTop:60,maxWidth:"100%",minWidth:"auto"}},active:{outline:[[2,"solid"]]},accept:{borderColor:e.accept,outlineColor:e.accept},reject:{borderColor:e.reject,outlineColor:e.reject},ignore:{borderColor:e.ignore,outlineColor:e.ignore}}))(_CardWithoutTheme);function Card({theme:e,...t}){let n=(0,O.jsx)(s4,{...t});return e?(0,O.jsx)(nt,{theme:e,children:n}):n}}}]);